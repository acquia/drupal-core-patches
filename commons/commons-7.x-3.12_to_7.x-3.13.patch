diff --git a/PATCHES.txt b/PATCHES.txt
index a477100..c54c6b7 100644
--- a/PATCHES.txt
+++ b/PATCHES.txt
@@ -2,7 +2,7 @@ The following patches have been applied to this project:
 - http://drupal.org/files/install_profile_requirements_on_install.patch
 - http://drupal.org/files/drupal-7.x-allow_profile_change_sys_req-1772316-21.patch
 - http://drupal.org/files/1664602-1.patch
-- https://drupal.org/files/issues/drupal-optimize_node_access_queries-106721-D7-71-do-not-test.patch
+- https://drupal.org/files/issues/drupal-106721-optimize_node_access_queries-81.patch
 - https://drupal.org/files/issues/node_access_grants-static-cache-11.patch
 - https://drupal.org/files/issues/1805690_11.patch
 
diff --git a/profiles/commons/commons.info b/profiles/commons/commons.info
index 691e5f4..ce65a22 100644
--- a/profiles/commons/commons.info
+++ b/profiles/commons/commons.info
@@ -118,9 +118,9 @@ dependencies[] = commons_wysiwyg
 ; System Requirements.
 php_memory_limit = 128M
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/commons.install b/profiles/commons/commons.install
index a51fc04..b8a4273 100644
--- a/profiles/commons/commons.install
+++ b/profiles/commons/commons.install
@@ -57,15 +57,9 @@ function commons_install_tasks() {
     ini_set('memory_limit', '196M');
   }
 
-  $demo_content = variable_get('commons_install_example_content', FALSE);
-  $acquia_connector = variable_get('commons_install_acquia_connector', FALSE);
+  $selected_extras = variable_get('commons_selected_extras', array());
 
   return array(
-    'commons_acquia_connector_enable' => array(
-      'display' => FALSE,
-      'type' => '',
-      'run' => $acquia_connector ? INSTALL_TASK_RUN_IF_NOT_COMPLETED : INSTALL_TASK_SKIP,
-    ),
     'commons_installer_palette' => array(
       'display_name' => st('Choose site color palette'),
       'display' => TRUE,
@@ -81,16 +75,21 @@ function commons_install_tasks() {
     'commons_revert_features' => array(
       'display' => FALSE,
     ),
-    'commons_demo_content' => array(
+    'commons_install_additional_modules' => array(
+      'display_name' => !empty($selected_extras['example_content']) ? st('Install example content') : st('Install additional functionality'),
       'display' => FALSE,
-      'type' => '',
-      'run' => $demo_content ? INSTALL_TASK_RUN_IF_NOT_COMPLETED : INSTALL_TASK_SKIP,
+      'type' => 'batch',
     ),
     'commons_create_first_group' => array(
       'display_name' => st('Create the first group'),
       'display' => TRUE,
       'type' => 'form',
     ),
+    'commons_rebuild_node_access' => array(
+      'display' => FALSE,
+      'type' => 'batch',
+      'run' => !empty($selected_extras['og_access']) ? INSTALL_TASK_RUN_IF_NOT_COMPLETED : INSTALL_TASK_SKIP,
+    ),
     'commons_admin_permissions' => array(
       'display' => FALSE,
     ),
@@ -201,16 +200,6 @@ function commons_install_finished(&$install_state) {
 }
 
 /**
- * Enable Acquia Connector module if selected on site configuration step.
- */
-function commons_acquia_connector_enable() {
-  $modules = variable_get('commons_install_acquia_modules', array());
-  if (!empty($modules)) {
-    module_enable($modules, TRUE);
-  }
-}
-
-/**
  * Allow users to select from a predefined list of color palettes during the
  * commons installation.
  */
@@ -266,6 +255,13 @@ function commons_anonymous_welcome_text_form() {
     '#default_value' => TRUE
   );
 
+  $form['commons_enable_og_access'] = array(
+    '#type' => 'checkbox',
+    '#title' => st('Enable private group support'),
+    '#description' => st('Add the ability to create private groups. Content in private groups can only be accessed by group members. <strong>Warning: Enable only if you require the ability to create private groups; this setting has performance implications.</strong>'),
+    '#default_value' => FALSE,
+  );
+
   $form['commons_anonymous_welcome_submit'] = array(
     '#type'  => 'submit',
     '#value' => st('Save and continue')
@@ -279,9 +275,19 @@ function commons_anonymous_welcome_text_form() {
  * @see commons_anonymous_welcome_text_form()
  */
 function commons_anonymous_welcome_text_form_submit($form_id, &$form_state) {
+  $selected_extras = variable_get('commons_selected_extras', array());
+
+  if ($form_state['values']['commons_enable_og_access']) {
+    $selected_extras['og_access'] = TRUE;
+  }
+
+  if ($form_state['values']['commons_install_example_content']) {
+    $selected_extras['example_content'] = TRUE;
+  }
+
+  variable_set('commons_selected_extras', $selected_extras);
   variable_set('commons_anonymous_welcome_title', $form_state['values']['commons_anonymous_welcome_title']);
   variable_set('commons_anonymous_welcome_body', $form_state['values']['commons_anonymous_welcome_body']);
-  variable_set('commons_install_example_content', $form_state['values']['commons_install_example_content']);
 }
 
 /*
@@ -305,184 +311,90 @@ function commons_revert_features() {
 }
 
 /**
- * This function generates demo content.
+ * Task callback: uses Batch API to enable modules based on user selection.
+ *
+ * Creates all demo content if requested and installs optional modules that
+ * providing additional functionality to the base install.
  */
-function commons_demo_content() {
+function commons_install_additional_modules() {
+  $selected_extras = variable_get('commons_selected_extras', array());
 
-  // Reset the Flag cache.
-  flag_get_flags(NULL, NULL, NULL, TRUE);
+  $modules = array();
 
-  // Create demo Users
-  $demo_users = array(
-    'Jeff Noyes' => 'Jeff Noyes',
-    'Drew Robertson' => 'Drew Robertson',
-    'Lisa Rex' => 'Lisa Rex',
-    'Katelyn Fogarty' => 'Katelyn Fogarty',
-    'Dharmesh Mistry' => 'Dharmesh Mistry',
-    'Erica Ligeski' => 'Erica Ligeski',
-  );
-
-  foreach ($demo_users as $name) {
-    list($first_name, $last_name)  = explode(" ", $name);
-    $normalize_name = commons_normalize_name($name);
-    $password = user_password(8);
+  if (!empty($selected_extras['acquia_agent'])) {
+    $modules[] = 'acquia_agent';
+  }
 
-    $fields = array(
-      'name' => $name,
-      'mail' => "{$normalize_name}@example.com",
-      'pass' => $password,
-      'status' => 1,
-      'init' => "{$normalize_name}@example.com",
-      'roles' => array(
-        DRUPAL_AUTHENTICATED_RID => 'authenticated user'
-      ),
-    );
+  if (!empty($selected_extras['acquia_search'])) {
+    $modules[] = 'acquia_search';
+  }
 
-    $fields['field_name_first'][LANGUAGE_NONE][0]['value'] = $first_name;
-    $fields['field_name_last'][LANGUAGE_NONE][0]['value'] = $last_name;
+  if (!empty($selected_extras['acquia_spi'])) {
+    $modules[] = 'acquia_spi';
+  }
 
-    $demo_users[$name] = user_save('', $fields);
+  if (!empty($selected_extras['og_access'])) {
+    $modules[] = 'og_access';
+  }
 
-    // Add avatars to demo Users.
-    commons_add_user_avatar($demo_users[$name]);
+  // Resolve the dependencies now, so that module_enable() doesn't need
+  // to do it later for each individual module (which kills performance).
+  $files = system_rebuild_module_data();
+  $modules_sorted = array();
+  foreach ($modules as $module) {
+    if ($files[$module]->requires) {
+      // Create a list of dependencies that haven't been installed yet.
+      $dependencies = array_keys($files[$module]->requires);
+      $dependencies = array_filter($dependencies, '_commons_filter_dependencies');
+      // Add them to the module list.
+      $modules = array_merge($modules, $dependencies);
+    }
   }
+  $modules = array_unique($modules);
+  foreach ($modules as $module) {
+    $modules_sorted[$module] = $files[$module]->sort;
+  }
+  arsort($modules_sorted);
 
-  // Demo Content.
-
-  // Group: Boston
-  $boston_group = new stdClass();
-  $boston_group->type = 'group';
-  node_object_prepare($boston_group);
-
-  $boston_group->title = 'Boston';
-  $boston_group->body[LANGUAGE_NONE][0]['value'] = commons_veggie_ipsum();
-  $boston_group->uid = $demo_users['Jeff Noyes']->uid;
-  $boston_group->language = LANGUAGE_NONE;
-  $boston_group->created = time() - 604800;
-  $boston_group->status = 1;
-  node_save($boston_group);
-
-  // Group: New York City
-  $nyc_group = new stdClass();
-  $nyc_group->type = 'group';
-  node_object_prepare($nyc_group);
-
-  $nyc_group->title = 'New York City';
-  $nyc_group->body[LANGUAGE_NONE][0]['value'] = commons_veggie_ipsum();
-  $nyc_group->uid = $demo_users['Drew Robertson']->uid;
-  $nyc_group->language = LANGUAGE_NONE;
-  $nyc_group->status = 1;
-  // Make the group 1 week old:
-  $nyc_group->created = time() - 604800;
-  node_save($nyc_group);
-
-
-  // Post: Best brunch places in Cambridge
-  $post = new stdClass();
-  $post->type = 'post';
-  node_object_prepare($post);
-
-  $post->title = 'Best brunch places in Cambridge';
-  $post->uid = $demo_users['Lisa Rex']->uid;
-  $post->language = LANGUAGE_NONE;
-  // 1:30 ago.
-  $post->created = time() - 5400;
-  $post->body[LANGUAGE_NONE][0]['value'] = "My aunt and I have been trying a lot of brunch places in Cambridge. Here's our favorites: <ul><li>North Street Grille for their breads
-<li>Mixtura for the souffles
-<li>The Neighborhood Restaurant for the vast quantities of food
-<li>City Girl Cafe for the ambiance <li>Bom Cafe for granola";
-  $post->body[LANGUAGE_NONE][0]['format'] = filter_default_format();
-
-  $post->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $boston_group->nid;
-  $post->field_radioactivity[LANGUAGE_NONE][0]['radioactivity_energy'] = 8;
-
-  $terms = array(
-    'brunch',
-    'Cambridge',
-    'dining out'
-  );
+  $operations = array();
 
-  foreach ($terms as $term) {
-    $post->field_topics[LANGUAGE_NONE][]['tid'] = commons_create_topic($term);
+  // Enable the selected modules.
+  foreach ($modules_sorted as $module => $weight) {
+    $operations[] = array('_commons_enable_module', array($module, $files[$module]->info['name']));
   }
 
-  node_save($post);
-
-  // Wiki: How to create a veggie burger
-  $wiki = new stdClass();
-  $wiki->type = 'wiki';
-  node_object_prepare($wiki);
-  $wiki->created = time() - 604800;
-  $wiki->title = 'How to create a veggie burger';
-  $wiki->uid = $demo_users['Dharmesh Mistry']->uid;
-  $wiki->language = LANGUAGE_NONE;
-  $wiki->body[LANGUAGE_NONE][0]['value'] = "Celtuce quandong gumbo coriander avocado yarrow broccoli rabe parsnip nori mung bean watercress taro pea sprouts cress. Bush tomato water spinach radish green bean okra spinach garlic cress. Cucumber squash tigernut swiss chard celery cabbage beet greens nori groundnut grape melon seakale. Earthnut pea kakadu plum chicory potato plantain fennel gumbo chickweed gourd cauliflower wakame green bean epazote taro quandong. Celery turnip kombu lotus root lettuce sierra leone bologi kale cauliflower gumbo parsnip taro welsh onion melon asparagus green bean beet greens black-eyed pea jícama. Kohlrabi lentil turnip greens plantain bush tomato leek arugula courgette amaranth yarrow.";
-  $wiki->body[LANGUAGE_NONE][0]['format'] = filter_default_format();
-
-  $wiki->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $boston_group->nid;
-  $wiki->field_radioactivity[LANGUAGE_NONE][0]['radioactivity_energy'] = 8;
-
-  $terms = array(
-    'vegetarian',
-    'casual',
-    'meal',
-    'recipe'
-  );
+  // Create the example content.
+  if (!empty($selected_extras['example_content'])) {
+    // Create the demo users.
+    $operations[] = array('_commons_create_demo_users', array(t('Created demo users.')));
 
-  foreach ($terms as $term) {
-    $wiki->field_topics[LANGUAGE_NONE][]['tid'] = commons_create_topic($term);
-  }
+    // Create the demo taxonomy terms.
+    $operations[] = array('_commons_create_demo_taxonomy_terms', array(t('Created taxonomy terms.')));
 
-  node_save($wiki);
-
-  // Event: Ribfest Boston 2012
-  $event = new stdClass();
-  $event->type = 'event';
-  node_object_prepare($event);
-
-  $event->title = 'Ribfest Boston 2012';
-  $event->uid = $demo_users['Katelyn Fogarty']->uid;
-  $event->language = LANGUAGE_NONE;
-  $event->body[LANGUAGE_NONE][0]['value'] = "<strong>What ignited in 1999 as a community block party has exploded into one of Boston's most anticipated street festivals.</strong> Averaging 50,000 pounds of ribs and BBQ from more than 30 restaurants, Ribfest Boston 2013 is expected to draw more than 50,000 people. As a nationally recognized music festival, we host a hot blend of Indie, pop, Indie Roots, rock and alt country for one of the most unique band lineups in the city. Families can spend the whole weekend in Kids Square to enjoy live entertainment, inflatables, games and more.";
-  $event->body[LANGUAGE_NONE][0]['format'] = filter_default_format();
-  $event->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $boston_group->nid;
-  $terms = array(
-    'bbq',
-    'music',
-    'festival'
-  );
+    // Create the demo groups.
+    $operations[] = array('_commons_create_demo_groups', array(t('Created demo groups.')));
 
-  foreach ($terms as $term) {
-    $event->field_topics[LANGUAGE_NONE][]['tid'] = commons_create_topic($term);
+    // Create the demo content.
+    $operations[] = array('_commons_create_demo_content', array(t('Created demo content.')));
   }
 
-  // The event starts 6 months from now.
-  $event->field_date[LANGUAGE_NONE][0]['value'] = format_date(REQUEST_TIME + 15552000, 'custom', 'Y-m-d 10:00:00');
-  // The event ends 6 months and one day from now.
-  $event->field_date[LANGUAGE_NONE][0]['value2'] = format_date(REQUEST_TIME + 15638400, 'custom', 'Y-m-d 10:00:00');
-
-  $event->field_address[LANGUAGE_NONE][0]['thoroughfare'] = '25 Corporate Drive';
-  $event->field_address[LANGUAGE_NONE][0]['premise'] = '4th floor';
-  $event->field_address[LANGUAGE_NONE][0]['postal_code'] = '01803';
-  $event->field_address[LANGUAGE_NONE][0]['country'] = 'US';
-  $event->field_address[LANGUAGE_NONE][0]['location'] = 'Waterfront';
-  $event->field_address[LANGUAGE_NONE][0]['administrative_area']  = 'MA';
-  $event->field_address[LANGUAGE_NONE][0]['locality'] = 'Boston';
-  $event->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $boston_group->nid;
-  node_save($event);
+  // Convert the administrator into a group.
+  $operations[] = array('_commons_convert_administrator_to_group', array(t('Converted administrator into a group.')));
 
-  // Don't display the 'registration settings have been saved' message.
-  drupal_get_messages('status', TRUE);
-  drupal_get_messages('completed', TRUE);
+  $batch = array(
+    'title' => !empty($selected_extras['example_content']) ? st('Installing example content') : st('Installing additional functionality'),
+    'operations' => $operations,
+    'file' => drupal_get_path('profile', 'commons') . '/commons.install_callbacks.inc',
+  );
 
-  // Delete the demo content variable
-  variable_del('commons_install_example_content');
+  return $batch;
+}
 
-  // Make sure the admin user is also a group.
-  // @todo: Move to a better place.
-  $wrapper = entity_metadata_wrapper('user', 1);
-  $wrapper->{OG_GROUP_FIELD}->set(TRUE);
-  $wrapper->save();
+/**
+ * array_filter() callback used to filter out already installed dependencies.
+ */
+function _commons_filter_dependencies($dependency) {
+  return !module_exists($dependency);
 }
 
 /**
@@ -587,6 +499,23 @@ function commons_add_user_avatar($account) {
 }
 
 /**
+ * This function rebuild node access.
+ */
+function commons_rebuild_node_access() {
+  // Copied from node_access_rebuild() which sets its own batch while we need to
+  // return a batch which will be automatically run by the installer.
+  $batch = array(
+    'title' => t('Rebuilding content access permissions'),
+    'operations' => array(
+      array('_node_access_rebuild_batch_operation', array()),
+    ),
+    'finished' => '_node_access_rebuild_batch_finished',
+  );
+
+  return $batch;
+}
+
+/**
  * Helper function to generate a machine name similar to the user's full name.
  */
 function commons_normalize_name($name) {
@@ -604,29 +533,6 @@ Bamboo shoot green bean wattle seed okra kakadu plum peanut ricebean celtuce. Az
 }
 
 /**
- * This function create a taxonomy topic, is used for create a demo content for
- * a new installations of Drupal Commons.
- *
- * @see commons_demo_content().
- */
-function commons_create_topic($topic_name = '') {
-  $term = new stdClass();
-  $term->name = $topic_name;
-  $term->vid = 1;
-  // Pathauto aliasing can cause a menu_rebuild(), causing the request to
-  // exceeed the max execution time. Specify a manual alias instead.
-  // http://drupal.org/node/1867172.
-  $term->path['pathauto'] = FALSE;
-  taxonomy_term_save($term);
-  $path = array(
-    'source' => 'taxonomy/term/' . $term->tid,
-    'alias' => 'topics/' . drupal_html_class($topic_name),
-  );
-  path_save($path);
-  return $term->tid;
-}
-
-/**
  * Implements hook_install().
  */
 function commons_install() {
diff --git a/profiles/commons/commons.install_callbacks.inc b/profiles/commons/commons.install_callbacks.inc
new file mode 100644
index 0000000..a3bdb25
--- /dev/null
+++ b/profiles/commons/commons.install_callbacks.inc
@@ -0,0 +1,234 @@
+<?php
+
+/**
+ * @file
+ * Contains Batch API callbacks used during installation.
+ */
+
+/**
+ * BatchAPI callback.
+ *
+ * @see commons_install_additional_modules()
+ */
+function _commons_enable_module($module, $module_name, &$context) {
+  module_enable(array($module), FALSE);
+  $context['message'] = st('Installed %module module.', array('%module' => $module_name));
+}
+
+/**
+ * BatchAPI callback.
+ *
+ * @see commons_demo_content()
+ */
+function _commons_create_demo_users($operation, &$context) {
+  $context['message'] = t('@operation', array('@operation' => $operation));
+
+  // Reset the Flag cache.
+  flag_get_flags(NULL, NULL, NULL, TRUE);
+
+  // Create an array of usernames.
+  $demo_usernames = array('Jeff Noyes', 'Drew Robertson', 'Lisa Rex', 'Katelyn Fogarty', 'Dharmesh Mistry', 'Erica Ligeski');
+
+  // Create a user for each username.
+  foreach ($demo_usernames as $username) {
+    list($first_name, $last_name)  = explode(" ", $username);
+    $normalized_username = commons_normalize_name($username);
+    $password = user_password(8);
+
+    $fields = array(
+      'name' => $username,
+      'mail' => "{$normalized_username}@example.com",
+      'pass' => $password,
+      'status' => 1,
+      'init' => "{$normalized_username}@example.com",
+      'roles' => array(
+        DRUPAL_AUTHENTICATED_RID => 'authenticated user',
+      ),
+    );
+
+    $fields['field_name_first'][LANGUAGE_NONE][0]['value'] = $first_name;
+    $fields['field_name_last'][LANGUAGE_NONE][0]['value'] = $last_name;
+
+    $user = user_save(NULL, $fields);
+
+    // Add an avatar to the user account.
+    commons_add_user_avatar($user);
+
+    $context['results']['users'][$username] = $user;
+  }
+}
+
+/**
+ * BatchAPI callback.
+ *
+ * @see commons_demo_content()
+ */
+function _commons_create_demo_taxonomy_terms($operation, &$context) {
+  $context['message'] = t('@operation', array('@operation' => $operation));
+
+  // Create an array of topic names.
+  $demo_topic_names = array('brunch', 'Cambridge', 'dining out', 'vegetarian', 'casual', 'meal', 'recipe', 'bbq', 'music', 'festival');
+
+  // Create a taxonomy term for each topic.
+  foreach ($demo_topic_names as $topic) {
+    $term = new stdClass();
+    $term->name = $topic;
+    $term->vid = 1;
+
+    taxonomy_term_save($term);
+
+    $context['results']['taxonomy_terms'][$topic] = $term;
+  }
+}
+
+/**
+ * BatchAPI callback.
+ *
+ * @see commons_demo_content()
+ */
+function _commons_create_demo_groups($operation, &$context) {
+  $context['message'] = t('@operation', array('@operation' => $operation));
+
+  $demo_users = $context['results']['users'];
+
+  // Group: Boston
+  $boston_group = new stdClass();
+  $boston_group->type = 'group';
+  node_object_prepare($boston_group);
+
+  $boston_group->title = 'Boston';
+  $boston_group->body[LANGUAGE_NONE][0]['value'] = commons_veggie_ipsum();
+  $boston_group->uid = $demo_users['Jeff Noyes']->uid;
+  $boston_group->language = LANGUAGE_NONE;
+  $boston_group->created = time() - 604800;
+  $boston_group->status = 1;
+  node_save($boston_group);
+
+  $context['results']['groups']['boston'] = $boston_group;
+
+  // Group: New York City
+  $nyc_group = new stdClass();
+  $nyc_group->type = 'group';
+  node_object_prepare($nyc_group);
+
+  $nyc_group->title = 'New York City';
+  $nyc_group->body[LANGUAGE_NONE][0]['value'] = commons_veggie_ipsum();
+  $nyc_group->uid = $demo_users['Drew Robertson']->uid;
+  $nyc_group->language = LANGUAGE_NONE;
+  $nyc_group->status = 1;
+  // Make the group 1 week old:
+  $nyc_group->created = time() - 604800;
+  node_save($nyc_group);
+
+  $context['results']['groups']['new_york_city'] = $nyc_group;
+}
+
+/**
+ * BatchAPI callback.
+ *
+ * @see commons_demo_content()
+ */
+function _commons_create_demo_content($operation, &$context) {
+  $context['message'] = t('@operation', array('@operation' => $operation));
+
+  $demo_users = $context['results']['users'];
+  $demo_taxonomy_terms = $context['results']['taxonomy_terms'];
+  $demo_groups = $context['results']['groups'];
+
+  // Post: Best brunch places in Cambridge
+  $post = new stdClass();
+  $post->type = 'post';
+  node_object_prepare($post);
+
+  $post->title = 'Best brunch places in Cambridge';
+  $post->uid = $demo_users['Lisa Rex']->uid;
+  $post->language = LANGUAGE_NONE;
+  // 1:30 ago.
+  $post->created = time() - 5400;
+  $post->body[LANGUAGE_NONE][0]['value'] = "My aunt and I have been trying a lot of brunch places in Cambridge. Here's our favorites: <ul><li>North Street Grille for their breads
+<li>Mixtura for the souffles
+<li>The Neighborhood Restaurant for the vast quantities of food
+<li>City Girl Cafe for the ambiance <li>Bom Cafe for granola";
+  $post->body[LANGUAGE_NONE][0]['format'] = filter_default_format();
+
+  $post->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $demo_groups['boston']->nid;
+  $post->field_radioactivity[LANGUAGE_NONE][0]['radioactivity_energy'] = 8;
+
+  $post->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['brunch']->tid;
+  $post->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['Cambridge']->tid;
+  $post->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['dining out']->tid;
+
+  node_save($post);
+
+  // Wiki: How to create a veggie burger
+  $wiki = new stdClass();
+  $wiki->type = 'wiki';
+  node_object_prepare($wiki);
+  $wiki->created = time() - 604800;
+  $wiki->title = 'How to create a veggie burger';
+  $wiki->uid = $demo_users['Dharmesh Mistry']->uid;
+  $wiki->language = LANGUAGE_NONE;
+  $wiki->body[LANGUAGE_NONE][0]['value'] = "Celtuce quandong gumbo coriander avocado yarrow broccoli rabe parsnip nori mung bean watercress taro pea sprouts cress. Bush tomato water spinach radish green bean okra spinach garlic cress. Cucumber squash tigernut swiss chard celery cabbage beet greens nori groundnut grape melon seakale. Earthnut pea kakadu plum chicory potato plantain fennel gumbo chickweed gourd cauliflower wakame green bean epazote taro quandong. Celery turnip kombu lotus root lettuce sierra leone bologi kale cauliflower gumbo parsnip taro welsh onion melon asparagus green bean beet greens black-eyed pea jícama. Kohlrabi lentil turnip greens plantain bush tomato leek arugula courgette amaranth yarrow.";
+  $wiki->body[LANGUAGE_NONE][0]['format'] = filter_default_format();
+
+  $wiki->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $demo_groups['boston']->nid;
+  $wiki->field_radioactivity[LANGUAGE_NONE][0]['radioactivity_energy'] = 8;
+
+  $wiki->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['vegetarian']->tid;
+  $wiki->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['casual']->tid;
+  $wiki->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['meal']->tid;
+  $wiki->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['recipe']->tid;
+
+  node_save($wiki);
+
+  // Event: Ribfest Boston 2012
+  $event = new stdClass();
+  $event->type = 'event';
+  node_object_prepare($event);
+
+  $event->title = 'Ribfest Boston 2012';
+  $event->uid = $demo_users['Katelyn Fogarty']->uid;
+  $event->language = LANGUAGE_NONE;
+  $event->body[LANGUAGE_NONE][0]['value'] = "<strong>What ignited in 1999 as a community block party has exploded into one of Boston's most anticipated street festivals.</strong> Averaging 50,000 pounds of ribs and BBQ from more than 30 restaurants, Ribfest Boston 2013 is expected to draw more than 50,000 people. As a nationally recognized music festival, we host a hot blend of Indie, pop, Indie Roots, rock and alt country for one of the most unique band lineups in the city. Families can spend the whole weekend in Kids Square to enjoy live entertainment, inflatables, games and more.";
+  $event->body[LANGUAGE_NONE][0]['format'] = filter_default_format();
+  $event->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $demo_groups['boston']->nid;
+
+  $event->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['bbq']->tid;
+  $event->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['music']->tid;
+  $event->field_topics[LANGUAGE_NONE][]['tid'] = $demo_taxonomy_terms['festival']->tid;
+
+  // The event starts 6 months from now.
+  $event->field_date[LANGUAGE_NONE][0]['value'] = format_date(REQUEST_TIME + 15552000, 'custom', 'Y-m-d 10:00:00');
+  // The event ends 6 months and one day from now.
+  $event->field_date[LANGUAGE_NONE][0]['value2'] = format_date(REQUEST_TIME + 15638400, 'custom', 'Y-m-d 10:00:00');
+
+  $event->field_address[LANGUAGE_NONE][0]['thoroughfare'] = '25 Corporate Drive';
+  $event->field_address[LANGUAGE_NONE][0]['premise'] = '4th floor';
+  $event->field_address[LANGUAGE_NONE][0]['postal_code'] = '01803';
+  $event->field_address[LANGUAGE_NONE][0]['country'] = 'US';
+  $event->field_address[LANGUAGE_NONE][0]['location'] = 'Waterfront';
+  $event->field_address[LANGUAGE_NONE][0]['administrative_area']  = 'MA';
+  $event->field_address[LANGUAGE_NONE][0]['locality'] = 'Boston';
+  $event->og_group_ref[LANGUAGE_NONE][0]['target_id'] = $demo_groups['boston']->nid;
+  node_save($event);
+}
+
+/**
+ * BatchAPI callback.
+ *
+ * @see commons_demo_content()
+ */
+function _commons_convert_administrator_to_group($operation, &$context) {
+  $context['message'] = t('@operation', array('@operation' => $operation));
+
+  $wrapper = entity_metadata_wrapper('user', 1);
+  $wrapper->{OG_GROUP_FIELD}->set(TRUE);
+  $wrapper->save();
+
+  // Don't display the 'registration settings have been saved' message.
+  drupal_get_messages('status', TRUE);
+  drupal_get_messages('completed', TRUE);
+
+  // Delete the demo content variable
+  variable_del('commons_selected_extras');
+}
diff --git a/profiles/commons/commons.profile b/profiles/commons/commons.profile
index cb67f82..72ed278 100644
--- a/profiles/commons/commons.profile
+++ b/profiles/commons/commons.profile
@@ -143,10 +143,23 @@ function commons_admin_save_fullname($form_id, &$form_state) {
  * Check if the Acquia Connector box was selected.
  */
 function commons_check_acquia_connector($form_id, &$form_state) {
-  $values = $form_state['values'];
-  if (isset($values['enable_acquia_connector']) && $values['enable_acquia_connector'] == 1) {
-    $options = array_filter($values['acquia_connector_modules']);
-    variable_set('commons_install_acquia_connector', TRUE);
-    variable_set('commons_install_acquia_modules', array_keys($options));
+  if (!empty($form_state['values']['enable_acquia_connector'])) {
+    $selected_extras = variable_get('commons_selected_extras', array());
+
+    $modules = $form_state['values']['acquia_connector_modules'];
+
+    if (!empty($modules['acquia_agent'])) {
+      $selected_extras['acquia_agent'] = TRUE;
+    }
+
+    if (!empty($modules['acquia_search'])) {
+      $selected_extras['acquia_search'] = TRUE;
+    }
+
+    if (!empty($modules['acquia_spi'])) {
+      $selected_extras['acquia_spi'] = TRUE;
+    }
+
+    variable_set('commons_selected_extras', $selected_extras);
   }
 }
diff --git a/profiles/commons/drupal-org-core.make b/profiles/commons/drupal-org-core.make
index 495ce83..480465e 100644
--- a/profiles/commons/drupal-org-core.make
+++ b/profiles/commons/drupal-org-core.make
@@ -19,7 +19,7 @@ projects[drupal][patch][] = http://drupal.org/files/1664602-1.patch
 
 ; Optimize node access queries.
 ; https://drupal.org/comment/8516319#comment-8516319
-projects[drupal][patch][] = https://drupal.org/files/issues/drupal-optimize_node_access_queries-106721-D7-71-do-not-test.patch
+projects[drupal][patch][] = https://drupal.org/files/issues/drupal-106721-optimize_node_access_queries-81.patch
 
 ; Statically cache node access grants
 ; https://drupal.org/comment/8495029#comment-8495029
diff --git a/profiles/commons/drupal-org.make b/profiles/commons/drupal-org.make
index 6ae04b4..12ad229 100644
--- a/profiles/commons/drupal-org.make
+++ b/profiles/commons/drupal-org.make
@@ -13,7 +13,7 @@ projects[addressfield][version] = "1.0-beta5"
 
 projects[addressfield_tokens][type] = "module"
 projects[addressfield_tokens][subdir] = "contrib"
-projects[addressfield_tokens][version] = "1.3"
+projects[addressfield_tokens][version] = "1.4"
 
 projects[admin_icons][type] = "module"
 projects[admin_icons][subdir] = "contrib"
@@ -87,7 +87,8 @@ projects[ctools][subdir] = "contrib"
 projects[ctools][download][type] = "git"
 projects[ctools][download][url] = "http://git.drupal.org/project/ctools.git"
 projects[ctools][download][branch] = "7.x-1.x"
-projects[ctools][download][revision] = "e720f61d"
+projects[ctools][download][revision] = "6e034cb9"
+projects[ctools][patch][] = "https://drupal.org/files/issues/missing-ctools-version-2269747-1.patch"
 
 projects[custom_search][type] = "module"
 projects[custom_search][subdir] = "contrib"
@@ -178,6 +179,10 @@ projects[flag][version] = "2.2"
 ; http://drupal.org/node/1965760
 projects[flag][patch][] = "https://drupal.org/files/issues/1965760.29.flag_.entity-tokens.patch"
 
+; Provide a hook to allow default flag definitions to be altered.
+; https://drupal.org/node/2027091#comment-8012263
+projects[flag][patch][] = "https://drupal.org/files/flag-default-flags-alter-hook-2027091-03.patch"
+
 projects[flag_abuse][type] = "module"
 projects[flag_abuse][subdir] = "contrib"
 projects[flag_abuse][version] = "2.0"
@@ -218,7 +223,7 @@ projects[libraries][version] = "2.2"
 
 projects[lingotek][type] = "module"
 projects[lingotek][subdir] = "contrib"
-projects[lingotek][version] = "5.06"
+projects[lingotek][version] = "5.07"
 
 projects[link][type] = "module"
 projects[link][subdir] = "contrib"
@@ -266,6 +271,7 @@ projects[message_notify][version] = "2.5"
 projects[message_subscribe][type] = "module"
 projects[message_subscribe][subdir] = "contrib"
 projects[message_subscribe][version] = "1.0-rc2"
+projects[message_subscribe][patch][] = "https://drupal.org/files/issues/group-context-1828184-53.patch"
 
 projects[metatag][type] = "module"
 projects[metatag][subdir] = "contrib"
@@ -305,6 +311,10 @@ projects[oembed][download][url] = "http://git.drupal.org/project/oembed.git"
 projects[oembed][download][branch] = "7.x-1.x"
 projects[oembed][download][revision] = "9aa5303"
 
+; Remove the media submodule as it conflicts with the Media: oEmbed module.
+; https://drupal.org/node/2269745#comment-8796261
+projects[oembed][patch][] = "https://drupal.org/files/issues/remove-media-submodule-2269745-2.patch"
+
 projects[og][type] = "module"
 projects[og][subdir] = "contrib"
 projects[og][version] = "2.7"
@@ -481,11 +491,11 @@ projects[variable][version] = "2.5"
 
 projects[views][type] = "module"
 projects[views][subdir] = "contrib"
-projects[views][version] = "3.7"
+projects[views][version] = "3.8"
 
 ; Update Views Content access filter per core performance improvements.
 ; https://drupal.org/comment/8516039#comment-8516039
-projects[views][patch][] = "https://drupal.org/files/issues/2204257-views-content-access-filter-core-depends-on-core-patch.patch"
+projects[views][patch][] = "https://drupal.org/files/issues/views-content_access_filter_per_core_performance-2204257-4_0.patch"
 
 projects[views_bulk_operations][type] = "module"
 projects[views_bulk_operations][subdir] = "contrib"
diff --git a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_page/commons_activity_page.info b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_page/commons_activity_page.info
index 3930cb7..7f842af 100644
--- a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_page/commons_activity_page.info
+++ b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_page/commons_activity_page.info
@@ -10,9 +10,9 @@ features[ctools][] = page_manager:pages_default:1
 features[features_api][] = api:2
 features[page_manager_pages][] = commons_activity_streams_activity
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.info b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.info
index 3b01652..d3d8985 100644
--- a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.info
+++ b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.info
@@ -38,9 +38,9 @@ features_exclude[field_base][field_target_nodes] = field_target_nodes
 features_exclude[field_base][field_target_comments] = field_target_comments
 features_exclude[views_view][commons_bw_all] = commons_bw_all
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.module b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.module
index 0f0641b..8765d63 100644
--- a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.module
+++ b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams.module
@@ -109,6 +109,19 @@ function commons_activity_streams_message_access_alter(&$access, $context) {
       }
     }
   }
+  // Verify view access to comments referenced in the message.
+  if (isset($message->field_target_comments)) {
+    foreach ($message->field_target_comments[LANGUAGE_NONE] as $key => $value) {
+      $comment = comment_load($value['target_id']);
+      if (!entity_access('view', 'comment', $comment, $context['account'])) {
+        // If the user cannot view any comments in the message,
+        // deny access to the entire message;
+        $access = FALSE;
+        return;
+      }
+    }
+  }
+
 }
 
 /**
@@ -263,3 +276,35 @@ function commons_activity_streams_tokens($type, $tokens, array $data = array(),
   }
   return $replacements;
 }
+
+/**
+ * Implements hook_views_post_execute().
+ *
+ * Emulate message_access because we don't want the row to appear at all if the
+ * user does not have access to the node or comment. Node access is included in
+ * the view query itself.
+ *
+ * Without this function, the user would see a missing rendered entity, but the
+ * timestamp would still show.
+ */
+function commons_activity_streams_views_post_execute(&$view) {
+  if ($view->name == 'commons_activity_streams_activity' && isset($view->result)) {
+    foreach ($view->result AS $key => $msg) {
+      if (isset($msg->mid)) {
+        // We preempt the message_access on render by doing it now. Doesn't make
+        // Two calls because we remove the result if access is false.
+        $message = message_load($msg->mid);
+        if (isset($message->field_target_comments)) {
+          foreach ($message->field_target_comments[LANGUAGE_NONE] as $key => $value) {
+            $comment = comment_load($value['target_id']);
+            if (!entity_access('view', 'comment', $comment)) {
+              // If the user cannot view any nodes or comments in the message,
+              // deny access to the entire message;
+              unset($view->result[$key]);
+            }
+          }
+        }
+      }
+    }
+  }
+}
\ No newline at end of file
diff --git a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams_groups/commons_activity_streams_groups.info b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams_groups/commons_activity_streams_groups.info
index eeb2ac9..713255a 100644
--- a/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams_groups/commons_activity_streams_groups.info
+++ b/profiles/commons/modules/commons/commons_activity_streams/commons_activity_streams_groups/commons_activity_streams_groups.info
@@ -10,9 +10,9 @@ features[ctools][] = views:views_default:3.0
 features[features_api][] = api:2
 features[views_view][] = activity_group
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_body/commons_body.info b/profiles/commons/modules/commons/commons_body/commons_body.info
index 90cae4e..8e6749d 100644
--- a/profiles/commons/modules/commons/commons_body/commons_body.info
+++ b/profiles/commons/modules/commons/commons_body/commons_body.info
@@ -8,9 +8,9 @@ dependencies[] = text
 features[features_api][] = api:2
 features[field_base][] = body
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_bw/commons_bw.info b/profiles/commons/modules/commons/commons_bw/commons_bw.info
index 1630c40..e548808 100644
--- a/profiles/commons/modules/commons/commons_bw/commons_bw.info
+++ b/profiles/commons/modules/commons/commons_bw/commons_bw.info
@@ -12,9 +12,9 @@ features[field_base][] = title_field
 files[] = includes/views/handlers/commons_bw_handler_node_partial_form.inc
 ; Views handlers
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/commons_pills.css b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/commons_pills.css
index 4281fca..dd982ee 100644
--- a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/commons_pills.css
+++ b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/commons_pills.css
@@ -12,10 +12,8 @@
 }
 .quicktabs-style-commons-pills ul.quicktabs-tabs li a {
   background-color: #f1f1f1;
-  -webkit-border-radius: 3px;
   -moz-border-radius: 3px;
-  -ms-border-radius: 3px;
-  -o-border-radius: 3px;
+  -webkit-border-radius: 3px;
   border-radius: 3px;
   padding: 3px 10px 3px 6px;
   display: block;
@@ -52,7 +50,7 @@
 
 #quicktabs-tab-commons_bw-commons_all:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 -99px no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -31px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -61,12 +59,12 @@
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_all:before {
-  background-position: 0 -163px;
+  background-position: 0 0;
 }
 
 #quicktabs-tab-commons_bw-commons_posts:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 -322px no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -285px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -75,12 +73,12 @@ ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_all
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_posts:before {
-  background-position: 0 -353px;
+  background-position: 0 -254px;
 }
 
 #quicktabs-tab-commons_bw-commons_documents:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 -384px no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -94px no-repeat;
   width: 9px;
   height: 12px;
   display: inline-block;
@@ -89,12 +87,12 @@ ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_pos
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_documents:before {
-  background-position: 0 -416px;
+  background-position: 0 -62px;
 }
 
 #quicktabs-tab-commons_bw-commons_q_a:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 -66px no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -349px no-repeat;
   width: 13px;
   height: 13px;
   display: inline-block;
@@ -103,12 +101,12 @@ ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_doc
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_q_a:before {
-  background-position: 0 -130px;
+  background-position: 0 -316px;
 }
 
 #quicktabs-tab-commons_bw-commons_ideas:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 -225px no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -159px no-repeat;
   width: 8px;
   height: 13px;
   display: inline-block;
@@ -117,12 +115,12 @@ ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_q_a
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_ideas:before {
-  background-position: 0 -289px;
+  background-position: 0 -126px;
 }
 
 #quicktabs-tab-commons_bw-commons_wikis:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 0 no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -415px no-repeat;
   width: 13px;
   height: 13px;
   display: inline-block;
@@ -131,12 +129,12 @@ ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_ide
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_wikis:before {
-  background-position: 0 -33px;
+  background-position: 0 -382px;
 }
 
 #quicktabs-tab-commons_bw-commons_polls:before {
   content: '';
-  background: url('images/icons-s2238b17da1.png') 0 -194px no-repeat;
+  background: url('images/icons-saf2440b105.png') 0 -223px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -145,5 +143,5 @@ ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_wik
   top: 1px;
 }
 ul.quicktabs-style-commons-pills li.active #quicktabs-tab-commons_bw-commons_polls:before {
-  background-position: 0 -258px;
+  background-position: 0 -192px;
 }
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons-saf2440b105.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons-saf2440b105.png
new file mode 100644
index 0000000..45c4a35
Binary files /dev/null and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons-saf2440b105.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all-active.png
index da83e57..08a0730 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all.png
index 6d7fcae..840249a 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/all.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs-active.png
index 2dd6e5e..2082cd1 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs.png
index a93f71e..1a99be4 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/docs.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas-active.png
index 354b62b..3288245 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas.png
index ab58f60..1f1bc10 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/ideas.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls-active.png
index ac5b016..cce7889 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls.png
index da6c9ab..30351d8 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/polls.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts-active.png
index a9f6303..b91d27b 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts.png
index 92d02ee..c124f00 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/posts.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa-active.png
index b13d328..22e9a0e 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa.png
index 33fc2b5..bb8a589 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/qa.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis-active.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis-active.png
index a671665..e0f28a8 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis-active.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis-active.png differ
diff --git a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis.png b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis.png
index 1443adc..ba3eb30 100644
Binary files a/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis.png and b/profiles/commons/modules/commons/commons_bw/plugins/quicktabs_styles/commons_pills/images/icons/wikis.png differ
diff --git a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.info b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.info
index e728a66..19d3735 100644
--- a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.info
+++ b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.info
@@ -18,9 +18,9 @@ features[views_view][] = commons_content_moderation_reported_comments
 features[views_view][] = commons_content_moderation_reported_nodes
 features_exclude[dependencies][features] = features
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.install b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.install
index ed3d510..ee45064 100644
--- a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.install
+++ b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.install
@@ -18,3 +18,33 @@ function commons_content_moderation_update_7002() {
   cache_clear_all('*', 'cache_views', TRUE);
 }
 
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_content_moderation_update_7003() {
+  $revert = array(
+    'commons_content_moderation' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
+
+/**
+ * Delete any copies of the Flag Abuse default flags stored in the database in
+ * order to allow alterations to take effect.
+ */
+function commons_content_moderation_update_7004() {
+  // The Flag module automatically copies module-provided default flags into the
+  // database for performance reasons.
+  // Delete the Flag Abuse default flags from the database in order to have the
+  // default flag alterations take effect.
+  foreach (array('abuse_user', 'abuse_comment', 'abuse_node', 'abuse_whitelist_comment', 'abuse_whitelist_node', 'abuse_whitelist_user') as $abuse_flag) {
+    $flag = flag_get_flag($abuse_flag);
+
+    if($flag) {
+      $flag->delete();
+    }
+  }
+
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.module b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.module
index 7078cb2..55421d7 100644
--- a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.module
+++ b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.module
@@ -95,6 +95,19 @@ function commons_content_moderation_delete_comment_block_user($comment, $context
 }
 
 /**
+ * Implements hook_flag_default_flags_alter().
+ */
+function commons_content_moderation_flag_default_flags_alter(&$flags) {
+  // Disable default node and comment abuse flags in favor of Commons-specific
+  // flags included with Commons Content Moderation.
+  foreach (array('abuse_user', 'abuse_comment', 'abuse_node', 'abuse_whitelist_comment', 'abuse_whitelist_node', 'abuse_whitelist_user') as $flag_name) {
+    if (!empty($flags[$flag_name])) {
+      $flags[$flag_name]['status'] = FALSE;
+    }
+  }
+}
+
+/**
  * Implements hook_views_default_views_alter().
  */
 function commons_content_moderation_views_default_views_alter(&$views) {
diff --git a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.views_default.inc b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.views_default.inc
index 50f6eee..b6edc0f 100644
--- a/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.views_default.inc
+++ b/profiles/commons/modules/commons/commons_content_moderation/commons_content_moderation.views_default.inc
@@ -228,11 +228,12 @@ function commons_content_moderation_views_default_views() {
   $handler->display->display_options['fields']['subject']['table'] = 'comment';
   $handler->display->display_options['fields']['subject']['field'] = 'subject';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['relationship'] = 'nid';
-  $handler->display->display_options['fields']['title']['label'] = 'Comment on';
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['relationship'] = 'nid';
+  $handler->display->display_options['fields']['title_field']['label'] = 'Comment on';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Comment: Author */
   $handler->display->display_options['fields']['name_2']['id'] = 'name_2';
   $handler->display->display_options['fields']['name_2']['table'] = 'comment';
@@ -553,9 +554,10 @@ function commons_content_moderation_views_default_views() {
   $handler->display->display_options['fields']['type']['field'] = 'type';
   $handler->display->display_options['fields']['type']['exclude'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Flags: Flag counter */
   $handler->display->display_options['fields']['count']['id'] = 'count';
   $handler->display->display_options['fields']['count']['table'] = 'flag_counts';
diff --git a/profiles/commons/modules/commons/commons_documents/commons_documents.info b/profiles/commons/modules/commons/commons_documents/commons_documents.info
index 5281dce..988d081 100644
--- a/profiles/commons/modules/commons/commons_documents/commons_documents.info
+++ b/profiles/commons/modules/commons/commons_documents/commons_documents.info
@@ -45,9 +45,9 @@ features[variable][] = node_preview_document
 features[variable][] = node_submitted_document
 features[views_view][] = commons_bw_documents
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_documents/commons_documents.install b/profiles/commons/modules/commons/commons_documents/commons_documents.install
index 63b7865..f2605e8 100644
--- a/profiles/commons/modules/commons/commons_documents/commons_documents.install
+++ b/profiles/commons/modules/commons/commons_documents/commons_documents.install
@@ -1,6 +1,19 @@
 <?php
 
 /**
+ * Set default document roles upon enable
+ */
+function commons_documents_enable() {
+  features_revert(array('commons_documents' => array('og_features_permission', 'field_instance', 'field_base', 'variable', 'views_view', 'node')));
+
+  $groups = og_get_all_group();
+
+  foreach ($groups as $gid) {
+    commons_groups_features_permission_rebuild('commons_documents', $gid);
+  }
+}
+
+/**
  * Disable summary on Document nodes.
  */
 function commons_documents_update_7000() {
@@ -87,3 +100,31 @@ function commons_documents_update_7007() {
   features_revert($revert);
   return array();
 }
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_documents_update_7008() {
+  $revert = array(
+    'commons_documents' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
+
+/**
+ * Reset document og permissions automatically, they were not set before now.
+ */
+function commons_documents_update_7009() {
+  $revert = array(
+    'commons_documents' => array('og_features_permission'),
+  );
+  features_revert($revert);
+
+  $groups = og_get_all_group();
+
+  foreach ($groups AS $gid) {
+    commons_groups_features_permission_rebuild('commons_documents', $gid);
+  }
+
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_documents/commons_documents.views_default.inc b/profiles/commons/modules/commons/commons_documents/commons_documents.views_default.inc
index 79abadc..3e6dce3 100644
--- a/profiles/commons/modules/commons/commons_documents/commons_documents.views_default.inc
+++ b/profiles/commons/modules/commons/commons_documents/commons_documents.views_default.inc
@@ -54,12 +54,11 @@ function commons_documents_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Sticky */
   $handler->display->display_options['sorts']['sticky']['id'] = 'sticky';
   $handler->display->display_options['sorts']['sticky']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_events/commons_events.info b/profiles/commons/modules/commons/commons_events/commons_events.info
index 22a45bf..743edfb 100644
--- a/profiles/commons/modules/commons/commons_events/commons_events.info
+++ b/profiles/commons/modules/commons/commons_events/commons_events.info
@@ -105,9 +105,9 @@ files[] = commons_events.strongarm.inc
 files[] = includes/commons_events.forms.inc
 files[] = includes/commons_events.theme.inc
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_events/commons_events.install b/profiles/commons/modules/commons/commons_events/commons_events.install
index 803e4fa..c6fba50 100644
--- a/profiles/commons/modules/commons/commons_events/commons_events.install
+++ b/profiles/commons/modules/commons/commons_events/commons_events.install
@@ -1,6 +1,22 @@
 <?php
 
 /**
+ * Set default events roles upon enable
+ */
+function commons_events_enable() {
+  $revert = array(
+    'commons_events' => array('og_features_permission'),
+  );
+  features_revert($revert);
+
+  $groups = og_get_all_group();
+
+  foreach ($groups AS $gid) {
+    commons_groups_features_permission_rebuild('commons_events', $gid);
+  }
+}
+
+/**
  * Implements hook_install().
  * Creates a default datetime format for events.
  */
@@ -233,4 +249,26 @@ function commons_events_update_7012() {
   );
   features_revert($revert);
   return array();
-}
\ No newline at end of file
+}
+
+/**
+ * Sort and filter the upcoming user events view by start date.
+ */
+function commons_events_update_7013() {
+  $revert = array(
+    'commons_events' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_events_update_7014() {
+  $revert = array(
+    'commons_events' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_events/commons_events.views_default.inc b/profiles/commons/modules/commons/commons_events/commons_events.views_default.inc
index 0fc6f36..85b752a 100644
--- a/profiles/commons/modules/commons/commons_events/commons_events.views_default.inc
+++ b/profiles/commons/modules/commons/commons_events/commons_events.views_default.inc
@@ -231,12 +231,11 @@ function commons_events_views_default_views() {
   $handler->display->display_options['style_plugin'] = 'default';
   $handler->display->display_options['row_plugin'] = 'fields';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Date */
   $handler->display->display_options['fields']['field_date']['id'] = 'field_date';
   $handler->display->display_options['fields']['field_date']['table'] = 'field_data_field_date';
@@ -348,12 +347,11 @@ function commons_events_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   $handler->display->display_options['defaults']['fields'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Date */
   $handler->display->display_options['fields']['field_date']['id'] = 'field_date';
   $handler->display->display_options['fields']['field_date']['table'] = 'field_data_field_date';
@@ -524,17 +522,18 @@ function commons_events_views_default_views() {
   $handler->display->display_options['relationships']['user_uid']['relationship'] = 'registration_rel';
   $handler->display->display_options['relationships']['user_uid']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
-  /* Sort criterion: Content: Post date */
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
+  /* Sort criterion: Content: Date - start date (field_date) */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
+  $handler->display->display_options['sorts']['field_date_value']['id'] = 'field_date_value';
   $handler->display->display_options['sorts']['created']['table'] = 'node';
+  $handler->display->display_options['sorts']['field_date_value']['table'] = 'field_data_field_date';
   $handler->display->display_options['sorts']['created']['field'] = 'created';
-  $handler->display->display_options['sorts']['created']['order'] = 'DESC';
+  $handler->display->display_options['sorts']['field_date_value']['field'] = 'field_date_value';
   /* Contextual filter: Registration: User */
   $handler->display->display_options['arguments']['user_uid']['id'] = 'user_uid';
   $handler->display->display_options['arguments']['user_uid']['table'] = 'registration';
@@ -559,6 +558,13 @@ function commons_events_views_default_views() {
   $handler->display->display_options['filters']['type']['value'] = array(
     'event' => 'event',
   );
+  /* Filter criterion: Content: Date - start date (field_date) */
+  $handler->display->display_options['filters']['field_date_value']['id'] = 'field_date_value';
+  $handler->display->display_options['filters']['field_date_value']['table'] = 'field_data_field_date';
+  $handler->display->display_options['filters']['field_date_value']['field'] = 'field_date_value';
+  $handler->display->display_options['filters']['field_date_value']['operator'] = '>=';
+  $handler->display->display_options['filters']['field_date_value']['form_type'] = 'date_text';
+  $handler->display->display_options['filters']['field_date_value']['default_date'] = 'now';
 
   /* Display: Block */
   $handler = $view->new_display('block', 'Block', 'block');
@@ -582,12 +588,11 @@ function commons_events_views_default_views() {
   $handler->display->display_options['defaults']['empty'] = FALSE;
   $handler->display->display_options['defaults']['fields'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Address */
   $handler->display->display_options['fields']['field_address']['id'] = 'field_address';
   $handler->display->display_options['fields']['field_address']['table'] = 'field_data_field_address';
@@ -650,12 +655,11 @@ function commons_events_views_default_views() {
   $handler->display->display_options['defaults']['relationships'] = FALSE;
   $handler->display->display_options['defaults']['fields'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Address */
   $handler->display->display_options['fields']['field_address']['id'] = 'field_address';
   $handler->display->display_options['fields']['field_address']['table'] = 'field_data_field_address';
@@ -722,12 +726,11 @@ function commons_events_views_default_views() {
   $handler->display->display_options['relationships']['flag_content_rel']['flag'] = 'commons_follow_node';
   $handler->display->display_options['defaults']['fields'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Address */
   $handler->display->display_options['fields']['field_address']['id'] = 'field_address';
   $handler->display->display_options['fields']['field_address']['table'] = 'field_data_field_address';
diff --git a/profiles/commons/modules/commons/commons_events/modules/commons_events_pages/commons_events_pages.info b/profiles/commons/modules/commons/commons_events/modules/commons_events_pages/commons_events_pages.info
index 101d3a8..0a8a2de 100644
--- a/profiles/commons/modules/commons/commons_events/modules/commons_events_pages/commons_events_pages.info
+++ b/profiles/commons/modules/commons/commons_events/modules/commons_events_pages/commons_events_pages.info
@@ -13,9 +13,9 @@ features[variable][] = panelizer_defaults_node_event
 files[] = commons_events_pages.features.inc
 files[] = commons_events_pages.strongarm.inc
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_events/modules/commons_events_solr/commons_events_solr.info b/profiles/commons/modules/commons/commons_events/modules/commons_events_solr/commons_events_solr.info
index c323eef..14a9cb6 100644
--- a/profiles/commons/modules/commons/commons_events/modules/commons_events_solr/commons_events_solr.info
+++ b/profiles/commons/modules/commons/commons_events/modules/commons_events_solr/commons_events_solr.info
@@ -20,9 +20,9 @@ features[page_manager_existing_pages][] = solr_events_search
 features[page_manager_handlers][] = pm_existing_pages_solr_events_search_panel_context
 features[variable][] = pm_existing_pages_disabled_solr_events_search
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_featured/commons_featured.info b/profiles/commons/modules/commons/commons_featured/commons_featured.info
index 70bf948..06e9f5c 100644
--- a/profiles/commons/modules/commons/commons_featured/commons_featured.info
+++ b/profiles/commons/modules/commons/commons_featured/commons_featured.info
@@ -8,9 +8,9 @@ features[ctools][] = views:views_default:3.0
 features[features_api][] = api:2
 features[views_view][] = commons_featured
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_featured/commons_featured.install b/profiles/commons/modules/commons/commons_featured/commons_featured.install
new file mode 100644
index 0000000..4bf9908
--- /dev/null
+++ b/profiles/commons/modules/commons/commons_featured/commons_featured.install
@@ -0,0 +1,12 @@
+<?php
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_featured_update_7300() {
+  $revert = array(
+    'commons_featured' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_featured/commons_featured.views_default.inc b/profiles/commons/modules/commons/commons_featured/commons_featured.views_default.inc
index cabd633..5825aac 100644
--- a/profiles/commons/modules/commons/commons_featured/commons_featured.views_default.inc
+++ b/profiles/commons/modules/commons/commons_featured/commons_featured.views_default.inc
@@ -42,14 +42,13 @@ function commons_featured_views_default_views() {
   $handler->display->display_options['fields']['type']['exclude'] = TRUE;
   $handler->display->display_options['fields']['type']['element_label_colon'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
-  $handler->display->display_options['fields']['title']['element_class'] = 'type-[type]';
-  $handler->display->display_options['fields']['title']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['element_class'] = 'type-[type]';
+  $handler->display->display_options['fields']['title_field']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Date */
   $handler->display->display_options['fields']['field_date']['id'] = 'field_date';
   $handler->display->display_options['fields']['field_date']['table'] = 'field_data_field_date';
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow.info b/profiles/commons/modules/commons/commons_follow/commons_follow.info
index c4fffac..4f46927 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow.info
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow.info
@@ -23,9 +23,9 @@ files[] = includes/views/handlers/commons_follow_plugin_argument_default_message
 files[] = includes/views/handlers/commons_follow_user_follow_filter.inc
 files[] = includes/views/handlers/commons_follow_user_follow_filter_message.inc
 files[] = includes/views/handlers/commons_follow_handler_field_ops.inc
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_group/commons_follow_group.info b/profiles/commons/modules/commons/commons_follow/commons_follow_group/commons_follow_group.info
index 751c568..dd2cc80 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_group/commons_follow_group.info
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_group/commons_follow_group.info
@@ -12,9 +12,9 @@ features[flag][] = commons_follow_group
 features[flag][] = email_group
 features[variable][] = message_subscribe_og
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.info b/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.info
index e4ebb9b..8daa264 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.info
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.info
@@ -12,9 +12,9 @@ features[flag][] = email_node
 features[views_view][] = commons_follow_node
 features_exclude[dependencies][views] = views
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.install b/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.install
index 6d08f0c..2482048 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.install
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.install
@@ -18,4 +18,15 @@ function commons_follow_node_update_3501() {
   );
   features_revert($revert);
   return array();
-}
\ No newline at end of file
+}
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_follow_node_update_3502() {
+  $revert = array(
+    'commons_follow_node' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.views_default.inc b/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.views_default.inc
index 8db8038..aa1c658 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.views_default.inc
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_node/commons_follow_node.views_default.inc
@@ -88,11 +88,10 @@ function commons_follow_node_views_default_views() {
   $handler->display->display_options['relationships']['uid']['field'] = 'uid';
   $handler->display->display_options['relationships']['uid']['relationship'] = 'flag_content_rel';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Flags: Flag link */
   $handler->display->display_options['fields']['ops_1']['id'] = 'ops_1';
   $handler->display->display_options['fields']['ops_1']['table'] = 'flag_content';
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_term/commons_follow_term.info b/profiles/commons/modules/commons/commons_follow/commons_follow_term/commons_follow_term.info
index dfb5e31..19cf9cd 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_term/commons_follow_term.info
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_term/commons_follow_term.info
@@ -12,9 +12,9 @@ features[flag][] = email_term
 features[views_view][] = commons_follow_taxonomy_term
 features_exclude[dependencies][ctools] = ctools
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_ui/commons_follow_ui.info b/profiles/commons/modules/commons/commons_follow/commons_follow_ui/commons_follow_ui.info
index 5d836c4..ddd661c 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_ui/commons_follow_ui.info
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_ui/commons_follow_ui.info
@@ -6,9 +6,9 @@ dependencies[] = commons_follow
 dependencies[] = message_subscribe_ui
 dependencies[] = quicktabs
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.info b/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.info
index a7c6fe7..6cc37c8 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.info
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.info
@@ -20,9 +20,9 @@ features[views_view][] = commons_follow_user
 features[views_view][] = commons_follow_user_followers
 features[views_view][] = commons_follow_user_following
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.install b/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.install
index e5e35a5..2a02786 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.install
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.install
@@ -26,4 +26,15 @@ function commons_follow_user_update_3501() {
   );
   features_revert($revert);
   return array();
+}
+
+/**
+ * Revert the following / followers view to use an unformatted style plugin.
+ */
+function commons_follow_user_update_3502() {
+  $revert = array(
+    'commons_follow_user' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
 }
\ No newline at end of file
diff --git a/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.views_default.inc b/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.views_default.inc
index fa18e54..e79fddf 100644
--- a/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.views_default.inc
+++ b/profiles/commons/modules/commons/commons_follow/commons_follow_user/commons_follow_user.views_default.inc
@@ -182,8 +182,14 @@ function commons_follow_user_views_default_views() {
   $handler->display->display_options['pager']['type'] = 'some';
   $handler->display->display_options['pager']['options']['items_per_page'] = '16';
   $handler->display->display_options['pager']['options']['offset'] = '0';
-  $handler->display->display_options['style_plugin'] = 'grid';
+  $handler->display->display_options['style_plugin'] = 'list';
+  $handler->display->display_options['style_options']['row_class'] = 'profile-badge';
+  $handler->display->display_options['style_options']['default_row_class'] = FALSE;
+  $handler->display->display_options['style_options']['row_class_special'] = FALSE;
+  $handler->display->display_options['style_options']['class'] = 'profile-badges';
+  $handler->display->display_options['style_options']['wrapper_class'] = 'view-profile-badges';
   $handler->display->display_options['row_plugin'] = 'fields';
+  $handler->display->display_options['row_options']['default_field_elements'] = FALSE;
   /* No results behavior: Global: Text area */
   $handler->display->display_options['empty']['area']['id'] = 'area';
   $handler->display->display_options['empty']['area']['table'] = 'views';
@@ -204,21 +210,27 @@ function commons_follow_user_views_default_views() {
   $handler->display->display_options['relationships']['uid']['field'] = 'uid';
   $handler->display->display_options['relationships']['uid']['relationship'] = 'flag_content_rel';
   $handler->display->display_options['relationships']['uid']['required'] = TRUE;
-  /* Field: User: Name */
-  $handler->display->display_options['fields']['name']['id'] = 'name';
-  $handler->display->display_options['fields']['name']['table'] = 'users';
-  $handler->display->display_options['fields']['name']['field'] = 'name';
-  $handler->display->display_options['fields']['name']['relationship'] = 'uid';
-  $handler->display->display_options['fields']['name']['label'] = '';
-  $handler->display->display_options['fields']['name']['element_label_colon'] = FALSE;
   /* Field: User: Picture */
   $handler->display->display_options['fields']['picture']['id'] = 'picture';
   $handler->display->display_options['fields']['picture']['table'] = 'users';
   $handler->display->display_options['fields']['picture']['field'] = 'picture';
   $handler->display->display_options['fields']['picture']['relationship'] = 'uid';
   $handler->display->display_options['fields']['picture']['label'] = '';
+  $handler->display->display_options['fields']['picture']['element_type'] = 'div';
+  $handler->display->display_options['fields']['picture']['element_class'] = 'profile-badge-picture';
   $handler->display->display_options['fields']['picture']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['picture']['element_default_classes'] = FALSE;
   $handler->display->display_options['fields']['picture']['image_style'] = '50x50_avatar';
+  /* Field: User: Name */
+  $handler->display->display_options['fields']['name']['id'] = 'name';
+  $handler->display->display_options['fields']['name']['table'] = 'users';
+  $handler->display->display_options['fields']['name']['field'] = 'name';
+  $handler->display->display_options['fields']['name']['relationship'] = 'uid';
+  $handler->display->display_options['fields']['name']['label'] = '';
+  $handler->display->display_options['fields']['name']['element_type'] = 'span';
+  $handler->display->display_options['fields']['name']['element_class'] = 'profile-badge-name';
+  $handler->display->display_options['fields']['name']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['name']['element_default_classes'] = FALSE;
   /* Sort criterion: Flags: Flagged time */
   $handler->display->display_options['sorts']['timestamp']['id'] = 'timestamp';
   $handler->display->display_options['sorts']['timestamp']['table'] = 'flag_content';
@@ -323,9 +335,15 @@ function commons_follow_user_views_default_views() {
   $handler->display->display_options['pager']['type'] = 'some';
   $handler->display->display_options['pager']['options']['items_per_page'] = '16';
   $handler->display->display_options['pager']['options']['offset'] = '0';
-  $handler->display->display_options['style_plugin'] = 'grid';
+  $handler->display->display_options['style_plugin'] = 'list';
+  $handler->display->display_options['style_options']['row_class'] = 'profile-badge';
+  $handler->display->display_options['style_options']['default_row_class'] = FALSE;
+  $handler->display->display_options['style_options']['row_class_special'] = FALSE;
+  $handler->display->display_options['style_options']['class'] = 'profile-badges';
+  $handler->display->display_options['style_options']['wrapper_class'] = 'view-profile-badges';
   $handler->display->display_options['row_plugin'] = 'fields';
-  /* No results behavior: Global: Text area */
+  $handler->display->display_options['row_options']['hide_empty'] = TRUE;
+  $handler->display->display_options['row_options']['default_field_elements'] = FALSE;  /* No results behavior: Global: Text area */
   $handler->display->display_options['empty']['area']['id'] = 'area';
   $handler->display->display_options['empty']['area']['table'] = 'views';
   $handler->display->display_options['empty']['area']['field'] = 'area';
@@ -341,20 +359,26 @@ function commons_follow_user_views_default_views() {
   $handler->display->display_options['relationships']['flag_content_rel']['label'] = 'Commons Follow (Users)';
   $handler->display->display_options['relationships']['flag_content_rel']['flag'] = 'commons_follow_user';
   $handler->display->display_options['relationships']['flag_content_rel']['user_scope'] = 'any';
-  /* Field: User: Name */
-  $handler->display->display_options['fields']['name']['id'] = 'name';
-  $handler->display->display_options['fields']['name']['table'] = 'users';
-  $handler->display->display_options['fields']['name']['field'] = 'name';
-  $handler->display->display_options['fields']['name']['label'] = '';
-  $handler->display->display_options['fields']['name']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['name']['alter']['ellipsis'] = FALSE;
   /* Field: User: Picture */
   $handler->display->display_options['fields']['picture']['id'] = 'picture';
   $handler->display->display_options['fields']['picture']['table'] = 'users';
   $handler->display->display_options['fields']['picture']['field'] = 'picture';
   $handler->display->display_options['fields']['picture']['label'] = '';
+  $handler->display->display_options['fields']['picture']['element_type'] = 'div';
+  $handler->display->display_options['fields']['picture']['element_class'] = 'profile-badge-picture';
   $handler->display->display_options['fields']['picture']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['picture']['element_default_classes'] = FALSE;
   $handler->display->display_options['fields']['picture']['image_style'] = '50x50_avatar';
+  /* Field: User: Name */
+  $handler->display->display_options['fields']['name']['id'] = 'name';
+  $handler->display->display_options['fields']['name']['table'] = 'users';
+  $handler->display->display_options['fields']['name']['field'] = 'name';
+  $handler->display->display_options['fields']['name']['label'] = '';
+  $handler->display->display_options['fields']['name']['alter']['word_boundary'] = FALSE;
+  $handler->display->display_options['fields']['name']['element_type'] = 'span';
+  $handler->display->display_options['fields']['name']['element_class'] = 'profile-badge-name';
+  $handler->display->display_options['fields']['name']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['name']['element_default_classes'] = FALSE;
   /* Sort criterion: Flags: Flagged time */
   $handler->display->display_options['sorts']['timestamp']['id'] = 'timestamp';
   $handler->display->display_options['sorts']['timestamp']['table'] = 'flag_content';
diff --git a/profiles/commons/modules/commons/commons_groups/commons_groups.info b/profiles/commons/modules/commons/commons_groups/commons_groups.info
index 94a685d..eaf552e 100644
--- a/profiles/commons/modules/commons/commons_groups/commons_groups.info
+++ b/profiles/commons/modules/commons/commons_groups/commons_groups.info
@@ -73,9 +73,9 @@ features[views_view][] = commons_groups_user_groups
 features_exclude[field][node-group-group_group] = node-group-group_group
 features_exclude[field][node-group-group_access] = node-group-group_access
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_groups/commons_groups.install b/profiles/commons/modules/commons/commons_groups/commons_groups.install
index bee25d7..36e08b2 100644
--- a/profiles/commons/modules/commons/commons_groups/commons_groups.install
+++ b/profiles/commons/modules/commons/commons_groups/commons_groups.install
@@ -210,3 +210,25 @@ function commons_groups_update_3116() {
   features_revert($revert);
   return array();
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_groups_update_3117() {
+  $revert = array(
+    'commons_groups' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
+
+/**
+ * Revert the contributors view to use new markup.
+ */
+function commons_groups_update_3118() {
+  $revert = array(
+    'commons_groups' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_groups/commons_groups.module b/profiles/commons/modules/commons/commons_groups/commons_groups.module
index 133307f..57cb4a4 100644
--- a/profiles/commons/modules/commons/commons_groups/commons_groups.module
+++ b/profiles/commons/modules/commons/commons_groups/commons_groups.module
@@ -984,9 +984,9 @@ function commons_groups_preprocess_node(&$variables) {
 }
 
 /**
- * Implements hook_preprocess_views_view_grid().
+ * Implements hook_preprocess_views_view_list().
  */
-function commons_groups_preprocess_views_view_grid(&$variables, $hook) {
+function commons_groups_preprocess_views_view_list(&$variables, $hook) {
   // Change the displayed role name in the group contributors block to
   // "Organizers".
   if ($variables['view']->name == 'commons_contributors_group' && !empty($variables['title']) && $variables['title'] == 'administrator member') {
@@ -1161,3 +1161,58 @@ function commons_groups_views_pre_render(&$view) {
     $view->display_handler->handlers['empty']['area']->options['content'] = t('Nobody has posted yet.');
   }
 }
+
+/**
+ * Special Commons implementation of hook_features_rebuild().
+ *
+ * By default, reverting og permissions only occurs on the default rid, which is
+ * 0. All groups already created will not see the new permissions.
+ *
+ * As an alternative, this function iterates through all of the groups and sets
+ * default permissions and update the permissions map.
+ *
+ * @param string $module
+ *   The modules whose default user permissions should be rebuild.
+ */
+function commons_groups_features_permission_rebuild($module, $gid) {
+  module_load_include('features.inc', 'og', '/includes/og_features_role');
+
+  if ($defaults = features_get_default('og_features_permission', $module)) {
+    $grant = array();
+    $revoke = array();
+
+    foreach ($defaults as $key => $details) {
+      list($group_type, $bundle, $perm) = explode(':', $key);
+
+      // Make sure the role exists for this entity.
+      foreach ($details['roles'] as $role) {
+        $bundle_role = _og_features_role_exists($role, $group_type, $bundle);
+        if (empty($bundle_role)) {
+          og_role_save(og_role_create($role, $group_type, $gid, $bundle));
+        }
+      }
+
+      $roles = og_roles($group_type, $bundle, $gid);
+      foreach ($roles as $rid => $rolename) {
+        if (in_array($rolename, $details['roles'])) {
+          $grant[$rid][] = $perm;
+        }
+        else {
+          $revoke[$rid][] = $perm;
+        }
+      }
+    }
+
+    if (!empty($grant)) {
+      foreach ($grant as $rid => $permissions) {
+        og_role_grant_permissions($rid, $permissions);
+      }
+    }
+
+    if (!empty($revoke)) {
+      foreach ($revoke as $rid => $permissions) {
+        og_role_revoke_permissions($rid, $permissions);
+      }
+    }
+  }
+}
diff --git a/profiles/commons/modules/commons/commons_groups/commons_groups.views_default.inc b/profiles/commons/modules/commons/commons_groups/commons_groups.views_default.inc
index 455073c..55cc4d1 100644
--- a/profiles/commons/modules/commons/commons_groups/commons_groups.views_default.inc
+++ b/profiles/commons/modules/commons/commons_groups/commons_groups.views_default.inc
@@ -53,13 +53,19 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['table'] = 'node';
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
+  /* Relationship: Flags: commons_follow_node */
+  $handler->display->display_options['relationships']['flag_content_rel']['id'] = 'flag_content_rel';
+  $handler->display->display_options['relationships']['flag_content_rel']['table'] = 'node';
+  $handler->display->display_options['relationships']['flag_content_rel']['field'] = 'flag_content_rel';
+  $handler->display->display_options['relationships']['flag_content_rel']['ui_name'] = 'Following';
+  $handler->display->display_options['relationships']['flag_content_rel']['label'] = 'following';
+  $handler->display->display_options['relationships']['flag_content_rel']['required'] = 0;
+  $handler->display->display_options['relationships']['flag_content_rel']['flag'] = 'commons_follow_node';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Sticky */
   $handler->display->display_options['sorts']['sticky']['id'] = 'sticky';
   $handler->display->display_options['sorts']['sticky']['table'] = 'node';
@@ -72,6 +78,13 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['sorts']['created']['order'] = 'DESC';
   $handler->display->display_options['sorts']['created']['exposed'] = TRUE;
   $handler->display->display_options['sorts']['created']['expose']['label'] = 'most recent';
+  /* Sort criterion: Content: Radioactivity (field_radioactivity:radioactivity_energy) */
+  $handler->display->display_options['sorts']['field_radioactivity_radioactivity_energy']['id'] = 'field_radioactivity_radioactivity_energy';
+  $handler->display->display_options['sorts']['field_radioactivity_radioactivity_energy']['table'] = 'field_data_field_radioactivity';
+  $handler->display->display_options['sorts']['field_radioactivity_radioactivity_energy']['field'] = 'field_radioactivity_radioactivity_energy';
+  $handler->display->display_options['sorts']['field_radioactivity_radioactivity_energy']['order'] = 'DESC';
+  $handler->display->display_options['sorts']['field_radioactivity_radioactivity_energy']['exposed'] = TRUE;
+  $handler->display->display_options['sorts']['field_radioactivity_radioactivity_energy']['expose']['label'] = 'most active';
   /* Contextual filter: OG membership: Group ID */
   $handler->display->display_options['arguments']['gid']['id'] = 'gid';
   $handler->display->display_options['arguments']['gid']['table'] = 'og_membership';
@@ -94,7 +107,12 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['filters']['type']['id'] = 'type';
   $handler->display->display_options['filters']['type']['table'] = 'node';
   $handler->display->display_options['filters']['type']['field'] = 'type';
-  $handler->display->display_options['filters']['type']['value'] = array();
+  $handler->display->display_options['filters']['type']['value'] = array(
+    'poll' => 'poll',
+    'post' => 'post',
+    'question' => 'question',
+    'wiki' => 'wiki',
+  );
   /* Filter criterion: OG membership: Group_type */
   $handler->display->display_options['filters']['group_type']['id'] = 'group_type';
   $handler->display->display_options['filters']['group_type']['table'] = 'og_membership';
@@ -103,6 +121,18 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['filters']['group_type']['value'] = array(
     'node' => 'node',
   );
+  /* Filter criterion: Following */
+  $handler->display->display_options['filters']['flagged']['id'] = 'flagged';
+  $handler->display->display_options['filters']['flagged']['table'] = 'flag_content';
+  $handler->display->display_options['filters']['flagged']['field'] = 'flagged';
+  $handler->display->display_options['filters']['flagged']['relationship'] = 'flag_content_rel';
+  $handler->display->display_options['filters']['flagged']['ui_name'] = 'Following';
+  $handler->display->display_options['filters']['flagged']['value'] = '1';
+  $handler->display->display_options['filters']['flagged']['exposed'] = TRUE;
+  $handler->display->display_options['filters']['flagged']['expose']['operator_id'] = '';
+  $handler->display->display_options['filters']['flagged']['expose']['label'] = 'Following';
+  $handler->display->display_options['filters']['flagged']['expose']['operator'] = 'flagged_op';
+  $handler->display->display_options['filters']['flagged']['expose']['identifier'] = 'following';
   $translatables['commons_bw_all'] = array(
     t('Master'),
     t('more'),
@@ -165,7 +195,19 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['fields']['picture']['table'] = 'users';
   $handler->display->display_options['fields']['picture']['field'] = 'picture';
   $handler->display->display_options['fields']['picture']['label'] = '';
+  $handler->display->display_options['fields']['picture']['element_type'] = 'div';
+  $handler->display->display_options['fields']['picture']['element_class'] = 'profile-badge-picture';
   $handler->display->display_options['fields']['picture']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['picture']['element_default_classes'] = FALSE;
+  /* Field: User: Name */
+  $handler->display->display_options['fields']['name']['id'] = 'name';
+  $handler->display->display_options['fields']['name']['table'] = 'users';
+  $handler->display->display_options['fields']['name']['field'] = 'name';
+  $handler->display->display_options['fields']['name']['label'] = '';
+  $handler->display->display_options['fields']['name']['element_type'] = 'span';
+  $handler->display->display_options['fields']['name']['element_class'] = 'profile-badge-name';
+  $handler->display->display_options['fields']['name']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['name']['element_default_classes'] = FALSE;
   /* Sort criterion: User: Created date */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
   $handler->display->display_options['sorts']['created']['table'] = 'users';
@@ -267,7 +309,7 @@ function commons_groups_views_default_views() {
   $handler = $view->new_display('panel_pane', 'group homepage', 'panel_pane_2');
   $handler->display->display_options['defaults']['hide_admin_links'] = FALSE;
   $handler->display->display_options['defaults']['style_plugin'] = FALSE;
-  $handler->display->display_options['style_plugin'] = 'grid';
+  $handler->display->display_options['style_plugin'] = 'list';
   $handler->display->display_options['style_options']['grouping'] = array(
     0 => array(
       'field' => 'og_roles',
@@ -275,9 +317,15 @@ function commons_groups_views_default_views() {
       'rendered_strip' => 0,
     ),
   );
+  $handler->display->display_options['style_options']['row_class'] = 'profile-badge';
+  $handler->display->display_options['style_options']['default_row_class'] = FALSE;
+  $handler->display->display_options['style_options']['row_class_special'] = FALSE;
+  $handler->display->display_options['style_options']['class'] = 'profile-badges clearfix';
+  $handler->display->display_options['style_options']['wrapper_class'] = 'view-profile-badges';
   $handler->display->display_options['defaults']['style_options'] = FALSE;
   $handler->display->display_options['defaults']['row_plugin'] = FALSE;
   $handler->display->display_options['row_plugin'] = 'fields';
+  $handler->display->display_options['row_options']['default_field_elements'] = FALSE;
   $handler->display->display_options['defaults']['row_options'] = FALSE;
   $handler->display->display_options['defaults']['fields'] = FALSE;
   /* Field: User: Picture */
@@ -285,7 +333,10 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['fields']['picture']['table'] = 'users';
   $handler->display->display_options['fields']['picture']['field'] = 'picture';
   $handler->display->display_options['fields']['picture']['label'] = '';
+  $handler->display->display_options['fields']['picture']['element_type'] = 'div';
+  $handler->display->display_options['fields']['picture']['element_class'] = 'profile-badge-picture';
   $handler->display->display_options['fields']['picture']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['picture']['element_default_classes'] = FALSE;
   $handler->display->display_options['fields']['picture']['image_style'] = '50x50';
   /* Field: OG membership: OG user roles in group */
   $handler->display->display_options['fields']['og_roles']['id'] = 'og_roles';
@@ -312,6 +363,18 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['defaults']['title'] = FALSE;
   $handler->display->display_options['title'] = 'Contributors to %1';
   $handler->display->display_options['defaults']['hide_admin_links'] = FALSE;
+  $handler->display->display_options['defaults']['style_plugin'] = FALSE;
+  $handler->display->display_options['style_plugin'] = 'list';
+  $handler->display->display_options['style_options']['row_class'] = 'profile-badge';
+  $handler->display->display_options['style_options']['default_row_class'] = FALSE;
+  $handler->display->display_options['style_options']['row_class_special'] = FALSE;
+  $handler->display->display_options['style_options']['class'] = 'profile-badges';
+  $handler->display->display_options['style_options']['wrapper_class'] = 'view-profile-badges';
+  $handler->display->display_options['defaults']['style_options'] = FALSE;
+  $handler->display->display_options['defaults']['row_plugin'] = FALSE;
+  $handler->display->display_options['row_plugin'] = 'fields';
+  $handler->display->display_options['row_options']['default_field_elements'] = FALSE;
+  $handler->display->display_options['defaults']['row_options'] = FALSE;
   $handler->display->display_options['path'] = 'node/%/contributors';
   $translatables['commons_contributors_group'] = array(
     t('Master'),
@@ -554,11 +617,11 @@ function commons_groups_views_default_views() {
     ),
   );
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: User: Name */
   $handler->display->display_options['fields']['name']['id'] = 'name';
   $handler->display->display_options['fields']['name']['table'] = 'users';
@@ -765,11 +828,11 @@ function commons_groups_views_default_views() {
     ),
   );
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: User: Name */
   $handler->display->display_options['fields']['name']['id'] = 'name';
   $handler->display->display_options['fields']['name']['table'] = 'users';
@@ -883,11 +946,11 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['empty']['area_text_custom']['content'] = 'All groups are updated. <a class="use-ajax" href="update/toggle">Remove group update message</a>';
   $handler->display->display_options['defaults']['fields'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: User: Name */
   $handler->display->display_options['fields']['name']['id'] = 'name';
   $handler->display->display_options['fields']['name']['table'] = 'users';
@@ -985,8 +1048,14 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['pager']['type'] = 'some';
   $handler->display->display_options['pager']['options']['items_per_page'] = '16';
   $handler->display->display_options['pager']['options']['offset'] = '0';
-  $handler->display->display_options['style_plugin'] = 'grid';
+  $handler->display->display_options['style_plugin'] = 'list';
+  $handler->display->display_options['style_options']['row_class'] = 'profile-badge';
+  $handler->display->display_options['style_options']['default_row_class'] = FALSE;
+  $handler->display->display_options['style_options']['row_class_special'] = FALSE;
+  $handler->display->display_options['style_options']['class'] = 'profile-badges';
+  $handler->display->display_options['style_options']['wrapper_class'] = 'view-profile-badges';
   $handler->display->display_options['row_plugin'] = 'fields';
+  $handler->display->display_options['row_options']['default_field_elements'] = FALSE;
   /* No results behavior: Global: Text area */
   $handler->display->display_options['empty']['area']['id'] = 'area';
   $handler->display->display_options['empty']['area']['table'] = 'views';
@@ -1004,7 +1073,10 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['fields']['picture']['table'] = 'users';
   $handler->display->display_options['fields']['picture']['field'] = 'picture';
   $handler->display->display_options['fields']['picture']['label'] = '';
+  $handler->display->display_options['fields']['picture']['element_type'] = 'div';
+  $handler->display->display_options['fields']['picture']['element_class'] = 'profile-badge-picture';
   $handler->display->display_options['fields']['picture']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['picture']['element_default_classes'] = FALSE;
   $handler->display->display_options['fields']['picture']['image_style'] = '50x50';
   /* Sort criterion: User: Created date */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
@@ -1091,12 +1163,11 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['empty']['area']['content'] = 'No groups have been created yet.';
   $handler->display->display_options['empty']['area']['format'] = 'filtered_html';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Post date */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
   $handler->display->display_options['sorts']['created']['table'] = 'node';
@@ -1207,14 +1278,13 @@ function commons_groups_views_default_views() {
   $handler->display->display_options['fields']['type']['exclude'] = TRUE;
   $handler->display->display_options['fields']['type']['element_label_colon'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
-  $handler->display->display_options['fields']['title']['element_class'] = 'type-[type]';
-  $handler->display->display_options['fields']['title']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['element_class'] = 'type-[type]';
+  $handler->display->display_options['fields']['title_field']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Post date */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
   $handler->display->display_options['sorts']['created']['table'] = 'node';
@@ -1314,12 +1384,13 @@ function commons_groups_views_default_views() {
     'image_link' => 'content',
   );
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['relationship'] = 'og_membership_related_node_group';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['relationship'] = 'og_membership_related_node_group';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Field: Group */
   $handler->display->display_options['fields']['group_group']['id'] = 'group_group';
   $handler->display->display_options['fields']['group_group']['table'] = 'field_data_group_group';
diff --git a/profiles/commons/modules/commons/commons_groups/modules/commons_groups_directory/commons_groups_directory.info b/profiles/commons/modules/commons/commons_groups/modules/commons_groups_directory/commons_groups_directory.info
index 88728f2..7158a39 100644
--- a/profiles/commons/modules/commons/commons_groups/modules/commons_groups_directory/commons_groups_directory.info
+++ b/profiles/commons/modules/commons/commons_groups/modules/commons_groups_directory/commons_groups_directory.info
@@ -12,9 +12,9 @@ features[ctools][] = views:views_default:3.0
 features[features_api][] = api:2
 features[page_manager_pages][] = groups_directory
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_groups/modules/commons_groups_pages/commons_groups_pages.info b/profiles/commons/modules/commons/commons_groups/modules/commons_groups_pages/commons_groups_pages.info
index 17654d3..4c6be6c 100644
--- a/profiles/commons/modules/commons/commons_groups/modules/commons_groups_pages/commons_groups_pages.info
+++ b/profiles/commons/modules/commons/commons_groups/modules/commons_groups_pages/commons_groups_pages.info
@@ -16,9 +16,9 @@ features[panelizer_defaults][] = node:group:default
 features[panelizer_defaults][] = node:group:default:teaser
 features[variable][] = panelizer_defaults_node_group
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_images/commons_images.info b/profiles/commons/modules/commons/commons_images/commons_images.info
index d9a4677..1f1a1e3 100644
--- a/profiles/commons/modules/commons/commons_images/commons_images.info
+++ b/profiles/commons/modules/commons/commons_images/commons_images.info
@@ -44,9 +44,9 @@ features[picture_mapping][] = commons_default
 features[picture_mapping][] = commons_full
 features[picture_mapping][] = commons_teaser
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_kissmetrics/commons_kissmetrics.info b/profiles/commons/modules/commons/commons_kissmetrics/commons_kissmetrics.info
index 4abc48e..587123d 100644
--- a/profiles/commons/modules/commons/commons_kissmetrics/commons_kissmetrics.info
+++ b/profiles/commons/modules/commons/commons_kissmetrics/commons_kissmetrics.info
@@ -30,9 +30,9 @@ features[rules_config][] = rules_commons_kissmetrics_user_registers
 features[rules_config][] = rules_commons_kissmetrics_user_replies_to_private_message_thread
 features[rules_config][] = rules_commons_kissmetrics_user_starts_new_private_message_thread
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_like/commons_like.info b/profiles/commons/modules/commons/commons_like/commons_like.info
index b6e0e1a..e5d5f29 100644
--- a/profiles/commons/modules/commons/commons_like/commons_like.info
+++ b/profiles/commons/modules/commons/commons_like/commons_like.info
@@ -13,9 +13,9 @@ features[features_api][] = api:2
 features[field_instance][] = message-commons_like_user_likes_node-field_target_nodes
 features[message_type][] = commons_like_user_likes_node
 features[variable][] = rate_widgets
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_location/commons_location.info b/profiles/commons/modules/commons/commons_location/commons_location.info
index 9ab8573..bd2d3c3 100644
--- a/profiles/commons/modules/commons/commons_location/commons_location.info
+++ b/profiles/commons/modules/commons/commons_location/commons_location.info
@@ -8,9 +8,9 @@ dependencies[] = field_sql_storage
 features[features_api][] = api:2
 features[field_base][] = field_address
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_media/commons_media.info b/profiles/commons/modules/commons/commons_media/commons_media.info
index b826e74..d4ba8ea 100644
--- a/profiles/commons/modules/commons/commons_media/commons_media.info
+++ b/profiles/commons/modules/commons/commons_media/commons_media.info
@@ -23,9 +23,9 @@ features[variable][] = file_entity_file_upload_wizard_skip_file_type
 features[variable][] = file_entity_file_upload_wizard_skip_scheme
 features[variable][] = media_dialog_theme
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_misc/commons_misc.info b/profiles/commons/modules/commons/commons_misc/commons_misc.info
index 6153bb5..9b45595 100644
--- a/profiles/commons/modules/commons/commons_misc/commons_misc.info
+++ b/profiles/commons/modules/commons/commons_misc/commons_misc.info
@@ -25,9 +25,9 @@ features[variable][] = theme_commons_origins_settings
 features[variable][] = user_register
 features_exclude[dependencies][page_manager] = page_manager
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_notices/commons_notices.info b/profiles/commons/modules/commons/commons_notices/commons_notices.info
index c19d6b6..b81ee88 100644
--- a/profiles/commons/modules/commons/commons_notices/commons_notices.info
+++ b/profiles/commons/modules/commons/commons_notices/commons_notices.info
@@ -28,9 +28,9 @@ features[variable][] = node_preview_notice
 features[variable][] = node_submitted_notice
 features[views_view][] = commons_notices_latest_notices
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_notices/commons_notices.views_default.inc b/profiles/commons/modules/commons/commons_notices/commons_notices.views_default.inc
index 9f90785..7c4053f 100644
--- a/profiles/commons/modules/commons/commons_notices/commons_notices.views_default.inc
+++ b/profiles/commons/modules/commons/commons_notices/commons_notices.views_default.inc
@@ -45,12 +45,11 @@ function commons_notices_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Post date */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
   $handler->display->display_options['sorts']['created']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_notify/commons_notify.info b/profiles/commons/modules/commons/commons_notify/commons_notify.info
index 7fa7041..067f44d 100644
--- a/profiles/commons/modules/commons/commons_notify/commons_notify.info
+++ b/profiles/commons/modules/commons/commons_notify/commons_notify.info
@@ -49,9 +49,9 @@ features_exclude[field_base][message_text] = message_text
 features_exclude[field_base][field_target_nodes] = field_target_nodes
 features_exclude[field_base][field_target_comments] = field_target_comments
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_pages/commons_pages.info b/profiles/commons/modules/commons/commons_pages/commons_pages.info
index ea5514a..809b8bf 100644
--- a/profiles/commons/modules/commons/commons_pages/commons_pages.info
+++ b/profiles/commons/modules/commons/commons_pages/commons_pages.info
@@ -26,9 +26,9 @@ features[variable][] = node_preview_page
 features[variable][] = node_submitted_page
 features[variable][] = pathauto_node_page_pattern
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_polls/commons_polls.info b/profiles/commons/modules/commons/commons_polls/commons_polls.info
index b2104e7..bf10a1e 100644
--- a/profiles/commons/modules/commons/commons_polls/commons_polls.info
+++ b/profiles/commons/modules/commons/commons_polls/commons_polls.info
@@ -45,9 +45,9 @@ features[variable][] = node_preview_poll
 features[variable][] = node_submitted_poll
 features[views_view][] = commons_bw_polls
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_polls/commons_polls.install b/profiles/commons/modules/commons/commons_polls/commons_polls.install
index 661fbef..e85a4f2 100644
--- a/profiles/commons/modules/commons/commons_polls/commons_polls.install
+++ b/profiles/commons/modules/commons/commons_polls/commons_polls.install
@@ -1,6 +1,22 @@
 <?php
 
 /**
+ * Set default polls roles upon enable
+ */
+function commons_polls_enable() {
+  $revert = array(
+    'commons_polls' => array('og_features_permission'),
+  );
+  features_revert($revert);
+
+  $groups = og_get_all_group();
+
+  foreach ($groups AS $gid) {
+    commons_groups_features_permission_rebuild('commons_polls', $gid);
+  }
+}
+
+/**
  * Disable summary on Poll nodes.
  */
 function commons_polls_update_7000() {
@@ -65,3 +81,14 @@ function commons_polls_update_7005() {
   features_revert($revert);
   return array();
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_polls_update_7006() {
+  $revert = array(
+    'commons_polls' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_polls/commons_polls.views_default.inc b/profiles/commons/modules/commons/commons_polls/commons_polls.views_default.inc
index fdc0e3f..40b1f9d 100644
--- a/profiles/commons/modules/commons/commons_polls/commons_polls.views_default.inc
+++ b/profiles/commons/modules/commons/commons_polls/commons_polls.views_default.inc
@@ -54,12 +54,11 @@ function commons_polls_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Sticky */
   $handler->display->display_options['sorts']['sticky']['id'] = 'sticky';
   $handler->display->display_options['sorts']['sticky']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_posts/commons_posts.info b/profiles/commons/modules/commons/commons_posts/commons_posts.info
index d21e68c..ec7a382 100644
--- a/profiles/commons/modules/commons/commons_posts/commons_posts.info
+++ b/profiles/commons/modules/commons/commons_posts/commons_posts.info
@@ -51,9 +51,9 @@ features[variable][] = node_preview_post
 features[variable][] = node_submitted_post
 features[views_view][] = commons_bw_posts
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_posts/commons_posts.install b/profiles/commons/modules/commons/commons_posts/commons_posts.install
index b39a48c..42f049b 100644
--- a/profiles/commons/modules/commons/commons_posts/commons_posts.install
+++ b/profiles/commons/modules/commons/commons_posts/commons_posts.install
@@ -1,6 +1,22 @@
 <?php
 
 /**
+ * Set default posts roles upon enable
+ */
+function commons_posts_enable() {
+  $revert = array(
+    'commons_posts' => array('og_features_permission'),
+  );
+  features_revert($revert);
+
+  $groups = og_get_all_group();
+
+  foreach ($groups AS $gid) {
+    commons_groups_features_permission_rebuild('commons_posts', $gid);
+  }
+}
+
+/**
  * Disable summary on Posts nodes.
  */
 function commons_posts_update_7000() {
@@ -76,3 +92,14 @@ function commons_posts_update_7006() {
   features_revert($revert);
   return array();
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_posts_update_7007() {
+  $revert = array(
+    'commons_posts' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_posts/commons_posts.views_default.inc b/profiles/commons/modules/commons/commons_posts/commons_posts.views_default.inc
index 89b786b..c70b3a0 100644
--- a/profiles/commons/modules/commons/commons_posts/commons_posts.views_default.inc
+++ b/profiles/commons/modules/commons/commons_posts/commons_posts.views_default.inc
@@ -54,12 +54,11 @@ function commons_posts_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Sticky */
   $handler->display->display_options['sorts']['sticky']['id'] = 'sticky';
   $handler->display->display_options['sorts']['sticky']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_profile_base/commons_profile_base.info b/profiles/commons/modules/commons/commons_profile_base/commons_profile_base.info
index 6dc83d3..e74f9cf 100644
--- a/profiles/commons/modules/commons/commons_profile_base/commons_profile_base.info
+++ b/profiles/commons/modules/commons/commons_profile_base/commons_profile_base.info
@@ -23,9 +23,9 @@ features[variable][] = user_picture_file_size
 features[variable][] = user_picture_style
 features[variable][] = user_pictures
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_profile_social/commons_profile_social.info b/profiles/commons/modules/commons/commons_profile_social/commons_profile_social.info
index 7687364..4e574ee 100644
--- a/profiles/commons/modules/commons/commons_profile_social/commons_profile_social.info
+++ b/profiles/commons/modules/commons/commons_profile_social/commons_profile_social.info
@@ -12,9 +12,9 @@ features[field_base][] = field_twitter_url
 features[field_instance][] = user-user-field_facebook_url
 features[field_instance][] = user-user-field_linkedin_url
 features[field_instance][] = user-user-field_twitter_url
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_q_a/commons_q_a.info b/profiles/commons/modules/commons/commons_q_a/commons_q_a.info
index 0fea478..5012a82 100644
--- a/profiles/commons/modules/commons/commons_q_a/commons_q_a.info
+++ b/profiles/commons/modules/commons/commons_q_a/commons_q_a.info
@@ -95,9 +95,9 @@ features_exclude[field_instance][og_group_ref] = og_group_ref
 features_exclude[field_instance][node-answer-og_group_ref] = node-answer-og_group_ref
 features_exclude[field_instance][node-question-og_group_ref] = node-question-og_group_ref
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_q_a/commons_q_a.install b/profiles/commons/modules/commons/commons_q_a/commons_q_a.install
index aa6ec72..a8abc6a 100644
--- a/profiles/commons/modules/commons/commons_q_a/commons_q_a.install
+++ b/profiles/commons/modules/commons/commons_q_a/commons_q_a.install
@@ -1,6 +1,22 @@
 <?php
 
 /**
+ * Set default Q/A roles upon enable
+ */
+function commons_q_a_enable() {
+  $revert = array(
+    'commons_q_a' => array('og_features_permission'),
+  );
+  features_revert($revert);
+
+  $groups = og_get_all_group();
+
+  foreach ($groups AS $gid) {
+    commons_groups_features_permission_rebuild('commons_q_a', $gid);
+  }
+}
+
+/**
  * Update the Rate module settings for changes to the Up/Down widget.
  */
 function commons_q_a_update_3100() {
@@ -147,3 +163,14 @@ function commons_q_a_update_3112() {
   features_revert($revert);
   return array();
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_q_a_update_3113() {
+  $revert = array(
+    'commons_q_a' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_q_a/commons_q_a.views_default.inc b/profiles/commons/modules/commons/commons_q_a/commons_q_a.views_default.inc
index 33d6be9..e29218d 100644
--- a/profiles/commons/modules/commons/commons_q_a/commons_q_a.views_default.inc
+++ b/profiles/commons/modules/commons/commons_q_a/commons_q_a.views_default.inc
@@ -54,12 +54,11 @@ function commons_q_a_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Sticky */
   $handler->display->display_options['sorts']['sticky']['id'] = 'sticky';
   $handler->display->display_options['sorts']['sticky']['table'] = 'node';
@@ -158,12 +157,11 @@ function commons_q_a_views_default_views() {
   $handler->display->display_options['empty']['area']['content'] = 'This Empty text is overridden in commons_q_a.module';
   $handler->display->display_options['empty']['area']['format'] = 'filtered_html';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Post date */
   $handler->display->display_options['sorts']['created']['id'] = 'created';
   $handler->display->display_options['sorts']['created']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_q_a/modules/commons_q_a_pages/commons_q_a_pages.info b/profiles/commons/modules/commons/commons_q_a/modules/commons_q_a_pages/commons_q_a_pages.info
index 0a63625..0d0edfd 100644
--- a/profiles/commons/modules/commons/commons_q_a/modules/commons_q_a_pages/commons_q_a_pages.info
+++ b/profiles/commons/modules/commons/commons_q_a/modules/commons_q_a_pages/commons_q_a_pages.info
@@ -12,9 +12,9 @@ features[panelizer_defaults][] = node:question:default
 features[variable][] = panelizer_defaults_node_answer
 features[variable][] = panelizer_defaults_node_question
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.info b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.info
index f242350..14af131 100644
--- a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.info
+++ b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.info
@@ -17,9 +17,9 @@ features[radioactivity_decay_profile][] = commons_ra_node
 features[variable][] = commons_radioactivity_entity_types
 features[views_view][] = commons_radioactivity_admin
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.install b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.install
new file mode 100644
index 0000000..1572996
--- /dev/null
+++ b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.install
@@ -0,0 +1,12 @@
+<?php
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_radioactivity_update_7300() {
+  $revert = array(
+    'commons_radioactivity' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.views_default.inc b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.views_default.inc
index 46325a7..71c9324 100644
--- a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.views_default.inc
+++ b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity.views_default.inc
@@ -91,11 +91,11 @@ function commons_radioactivity_views_default_views() {
   $handler->display->display_options['relationships']['uid']['field'] = 'uid';
   $handler->display->display_options['relationships']['uid']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Type */
   $handler->display->display_options['fields']['type']['id'] = 'type';
   $handler->display->display_options['fields']['type']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.info b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.info
index d7c978b..f4ca0d9 100644
--- a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.info
+++ b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.info
@@ -11,9 +11,9 @@ features[features_api][] = api:2
 features[views_view][] = commons_radioactivity_groups_active_in_group
 features[views_view][] = commons_radioactivity_groups_most_active
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.install b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.install
index cb52424..c4c68d3 100644
--- a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.install
+++ b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.install
@@ -10,3 +10,14 @@ function commons_radioactivity_groups_update_7300() {
   features_revert($revert);
   return array();
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_radioactivity_groups_update_7301() {
+  $revert = array(
+    'commons_radioactivity_groups' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.views_default.inc b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.views_default.inc
index 5b412f5..7899f92 100644
--- a/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.views_default.inc
+++ b/profiles/commons/modules/commons/commons_radioactivity/commons_radioactivity_groups/commons_radioactivity_groups.views_default.inc
@@ -52,14 +52,13 @@ function commons_radioactivity_groups_views_default_views() {
   $handler->display->display_options['fields']['nid']['exclude'] = TRUE;
   $handler->display->display_options['fields']['nid']['element_label_colon'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
-  $handler->display->display_options['fields']['title']['element_class'] = 'type-[type]';
-  $handler->display->display_options['fields']['title']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['element_class'] = 'type-[type]';
+  $handler->display->display_options['fields']['title_field']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Global: View */
   $handler->display->display_options['fields']['view']['id'] = 'view';
   $handler->display->display_options['fields']['view']['table'] = 'views';
@@ -175,12 +174,11 @@ function commons_radioactivity_groups_views_default_views() {
   $handler->display->display_options['fields']['nid']['exclude'] = TRUE;
   $handler->display->display_options['fields']['nid']['element_label_colon'] = FALSE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Global: View */
   $handler->display->display_options['fields']['view']['id'] = 'view';
   $handler->display->display_options['fields']['view']['table'] = 'views';
diff --git a/profiles/commons/modules/commons/commons_search/commons_search.info b/profiles/commons/modules/commons/commons_search/commons_search.info
index 6a1dd30..9f3573d 100644
--- a/profiles/commons/modules/commons/commons_search/commons_search.info
+++ b/profiles/commons/modules/commons/commons_search/commons_search.info
@@ -61,9 +61,9 @@ features[variable][] = custom_search_type_selector_all
 features[variable][] = custom_search_type_selector_label
 features[variable][] = custom_search_type_selector_label_visibility
 features[views_view][] = group_search
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_search/commons_search.install b/profiles/commons/modules/commons/commons_search/commons_search.install
index 5b26689..d03ec34 100644
--- a/profiles/commons/modules/commons/commons_search/commons_search.install
+++ b/profiles/commons/modules/commons/commons_search/commons_search.install
@@ -6,3 +6,14 @@
 function commons_search_update_7001() {
   module_disable(array('rich_snippets'));
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_search_update_7002() {
+  $revert = array(
+    'commons_search' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_search/commons_search.views_default.inc b/profiles/commons/modules/commons/commons_search/commons_search.views_default.inc
index 010c402..a55d41b 100644
--- a/profiles/commons/modules/commons/commons_search/commons_search.views_default.inc
+++ b/profiles/commons/modules/commons/commons_search/commons_search.views_default.inc
@@ -50,12 +50,11 @@ function commons_search_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Search: Score */
   $handler->display->display_options['sorts']['score']['id'] = 'score';
   $handler->display->display_options['sorts']['score']['table'] = 'search_index';
diff --git a/profiles/commons/modules/commons/commons_search/modules/commons_search_core/commons_search_core.info b/profiles/commons/modules/commons/commons_search/modules/commons_search_core/commons_search_core.info
index 1c32e53..cfc5dfb 100644
--- a/profiles/commons/modules/commons/commons_search/modules/commons_search_core/commons_search_core.info
+++ b/profiles/commons/modules/commons/commons_search/modules/commons_search_core/commons_search_core.info
@@ -30,9 +30,9 @@ features[variable][] = search_active_modules
 features[variable][] = search_default_module
 features_exclude[dependencies][ctools] = ctools
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_search/modules/commons_search_solr/commons_search_solr.info b/profiles/commons/modules/commons/commons_search/modules/commons_search_solr/commons_search_solr.info
index d910652..f800599 100644
--- a/profiles/commons/modules/commons/commons_search/modules/commons_search_solr/commons_search_solr.info
+++ b/profiles/commons/modules/commons/commons_search/modules/commons_search_solr/commons_search_solr.info
@@ -28,9 +28,9 @@ features[variable][] = pm_existing_pages_disabled_solr_search
 features[variable][] = search_active_modules
 features[variable][] = search_default_module
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_search/modules/commons_search_solr_user/commons_search_solr_user.info b/profiles/commons/modules/commons/commons_search/modules/commons_search_solr_user/commons_search_solr_user.info
index 8a2a952..7af3307 100644
--- a/profiles/commons/modules/commons/commons_search/modules/commons_search_solr_user/commons_search_solr_user.info
+++ b/profiles/commons/modules/commons/commons_search/modules/commons_search_solr_user/commons_search_solr_user.info
@@ -12,9 +12,9 @@ features[apachesolr_search_page][] = user_search
 features[ctools][] = apachesolr_search:apachesolr_search_defaults:3
 features[features_api][] = api:1
 features[menu_links][] = main-menu:people
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.info b/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.info
index 26fb889..88d52b5 100644
--- a/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.info
+++ b/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.info
@@ -20,9 +20,9 @@ features[variable][] = site_frontpage
 features[views_view][] = commons_homepage_content
 features_exclude[dependencies][views_content] = views_content
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.install b/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.install
index 23564ab..ed25adb 100644
--- a/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.install
+++ b/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.install
@@ -12,4 +12,15 @@ function commons_site_homepage_update_7301() {
   );
   features_revert($revert);
   return array();
-}
\ No newline at end of file
+}
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_site_homepage_update_7302() {
+  $revert = array(
+    'commons_site_homepage' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.views_default.inc b/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.views_default.inc
index 9984858..e5f601d 100644
--- a/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.views_default.inc
+++ b/profiles/commons/modules/commons/commons_site_homepage/commons_site_homepage.views_default.inc
@@ -45,12 +45,11 @@ function commons_site_homepage_views_default_views() {
   $handler->display->display_options['empty']['area']['content'] = 'No content matched the filters you selected.';
   $handler->display->display_options['empty']['area']['format'] = 'filtered_html';
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Sort criterion: Content: Updated date */
   $handler->display->display_options['sorts']['changed']['id'] = 'changed';
   $handler->display->display_options['sorts']['changed']['table'] = 'node';
diff --git a/profiles/commons/modules/commons/commons_social_sharing/commons_social_sharing.info b/profiles/commons/modules/commons/commons_social_sharing/commons_social_sharing.info
index 230dfdc..600e7da 100644
--- a/profiles/commons/modules/commons/commons_social_sharing/commons_social_sharing.info
+++ b/profiles/commons/modules/commons/commons_social_sharing/commons_social_sharing.info
@@ -17,9 +17,9 @@ features[variable][] = sharethis_teaser_option
 features[variable][] = sharethis_weight
 features[variable][] = sharethis_widget_option
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_topics/commons_topics.info b/profiles/commons/modules/commons/commons_topics/commons_topics.info
index 4c9ff0a..3854793 100644
--- a/profiles/commons/modules/commons/commons_topics/commons_topics.info
+++ b/profiles/commons/modules/commons/commons_topics/commons_topics.info
@@ -7,9 +7,9 @@ features[features_api][] = api:2
 features[field_base][] = field_topics
 features[taxonomy][] = topics
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.info b/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.info
index 832d0dc..8383b89 100644
--- a/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.info
+++ b/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.info
@@ -53,9 +53,9 @@ features_exclude[field][message-trusted_contact_request_approved-field_approving
 features_exclude[field][message-trusted_contact_request_pending-field_requesting_user] = message-trusted_contact_request_pending-field_requesting_user
 files[] = views/handlers/commons_groups_handler_send_message.inc
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.module b/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.module
index f860433..47d1d97 100644
--- a/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.module
+++ b/profiles/commons/modules/commons/commons_trusted_contacts/commons_trusted_contacts.module
@@ -794,8 +794,8 @@ function commons_trusted_contacts_check_limit($requestor, $requestee, $ajax = FA
   // Validate that neither the requesting user nor the target user has exceeded
   // her trusted contacts limit.
   if ($contacts_limit = variable_get('commons_trusted_contacts_limit', 1000)) {
-    $requestor_groups = og_get_entity_groups('user', $requestor, array(OG_STATE_ACTIVE), 'user_trusted_contacts');
-    $requestee_groups = og_get_entity_groups('user', $requestee, array(OG_STATE_ACTIVE), 'user_trusted_contacts');
+    $requestor_groups = og_get_entity_groups('user', $requestor, array(OG_STATE_ACTIVE, OG_STATE_PENDING), 'user_trusted_contacts');
+    $requestee_groups = og_get_entity_groups('user', $requestee, array(OG_STATE_ACTIVE, OG_STATE_PENDING), 'user_trusted_contacts');
 
     // This should always be set, because the user is a member of their own group.
     // But we know funky things can happen, so lets add a check just in case.
diff --git a/profiles/commons/modules/commons/commons_user_profile_pages/commons_user_profile_pages.info b/profiles/commons/modules/commons/commons_user_profile_pages/commons_user_profile_pages.info
index efe831f..b4da66e 100644
--- a/profiles/commons/modules/commons/commons_user_profile_pages/commons_user_profile_pages.info
+++ b/profiles/commons/modules/commons/commons_user_profile_pages/commons_user_profile_pages.info
@@ -12,9 +12,9 @@ features[ctools][] = page_manager:pages_default:1
 features[features_api][] = api:2
 features[page_manager_handlers][] = user_view_panel_context
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_utility_links/commons_utility_links.info b/profiles/commons/modules/commons/commons_utility_links/commons_utility_links.info
index d7e05da..71e94f7 100644
--- a/profiles/commons/modules/commons/commons_utility_links/commons_utility_links.info
+++ b/profiles/commons/modules/commons/commons_utility_links/commons_utility_links.info
@@ -1,9 +1,9 @@
 core = 7.x
 name = Commons Utility links block
 package = "Commons - Building blocks"
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_wikis/commons_wikis.info b/profiles/commons/modules/commons/commons_wikis/commons_wikis.info
index cfe5f84..ba174cb 100644
--- a/profiles/commons/modules/commons/commons_wikis/commons_wikis.info
+++ b/profiles/commons/modules/commons/commons_wikis/commons_wikis.info
@@ -62,9 +62,9 @@ features[views_view][] = commons_bw_wikis
 features[views_view][] = commons_wikis_contributor_list
 features_exclude[dependencies][commons_trusted_contacts] = commons_trusted_contacts
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_wikis/commons_wikis.install b/profiles/commons/modules/commons/commons_wikis/commons_wikis.install
index b35cade..5d854af 100644
--- a/profiles/commons/modules/commons/commons_wikis/commons_wikis.install
+++ b/profiles/commons/modules/commons/commons_wikis/commons_wikis.install
@@ -1,6 +1,22 @@
 <?php
 
 /**
+ * Set default wikis roles upon enable
+ */
+function commons_wikis_enable() {
+  $revert = array(
+    'commons_wikis' => array('og_features_permission'),
+  );
+  features_revert($revert);
+
+  $groups = og_get_all_group();
+
+  foreach ($groups AS $gid) {
+    commons_groups_features_permission_rebuild('commons_wikis', $gid);
+  }
+}
+
+/**
  * Disable summary on Wiki nodes.
  */
 function commons_wikis_update_7000() {
@@ -94,3 +110,14 @@ function commons_wikis_update_7008() {
   features_revert($revert);
   return array();
 }
+
+/**
+ * Replace the title attribute with the title field in view displays.
+ */
+function commons_wikis_update_7009() {
+  $revert = array(
+    'commons_wikis' => array('views_view'),
+  );
+  features_revert($revert);
+  return array();
+}
diff --git a/profiles/commons/modules/commons/commons_wikis/commons_wikis.views_default.inc b/profiles/commons/modules/commons/commons_wikis/commons_wikis.views_default.inc
index 3807929..b5a9b39 100644
--- a/profiles/commons/modules/commons/commons_wikis/commons_wikis.views_default.inc
+++ b/profiles/commons/modules/commons/commons_wikis/commons_wikis.views_default.inc
@@ -54,12 +54,12 @@ function commons_wikis_views_default_views() {
   $handler->display->display_options['relationships']['og_membership_rel']['field'] = 'og_membership_rel';
   $handler->display->display_options['relationships']['og_membership_rel']['required'] = TRUE;
   /* Field: Content: Title */
-  $handler->display->display_options['fields']['title']['id'] = 'title';
-  $handler->display->display_options['fields']['title']['table'] = 'node';
-  $handler->display->display_options['fields']['title']['field'] = 'title';
-  $handler->display->display_options['fields']['title']['label'] = '';
-  $handler->display->display_options['fields']['title']['alter']['word_boundary'] = FALSE;
-  $handler->display->display_options['fields']['title']['alter']['ellipsis'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['id'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['table'] = 'field_data_title_field';
+  $handler->display->display_options['fields']['title_field']['field'] = 'title_field';
+  $handler->display->display_options['fields']['title_field']['label'] = '';
+  $handler->display->display_options['fields']['title_field']['element_label_colon'] = FALSE;
+  $handler->display->display_options['fields']['title_field']['link_to_entity'] = 1;
   /* Field: Content: Body */
   $handler->display->display_options['fields']['body']['id'] = 'body';
   $handler->display->display_options['fields']['body']['table'] = 'field_data_body';
diff --git a/profiles/commons/modules/commons/commons_wikis/modules/commons_wikis_pages/commons_wikis_pages.info b/profiles/commons/modules/commons/commons_wikis/modules/commons_wikis_pages/commons_wikis_pages.info
index 48426b0..1f2a012 100644
--- a/profiles/commons/modules/commons/commons_wikis/modules/commons_wikis_pages/commons_wikis_pages.info
+++ b/profiles/commons/modules/commons/commons_wikis/modules/commons_wikis_pages/commons_wikis_pages.info
@@ -12,9 +12,9 @@ features[features_api][] = api:2
 features[panelizer_defaults][] = node:wiki:default
 features[variable][] = panelizer_defaults_node_wiki
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/commons/commons_wysiwyg/commons_wysiwyg.info b/profiles/commons/modules/commons/commons_wysiwyg/commons_wysiwyg.info
index 2812ffb..c2ed396 100644
--- a/profiles/commons/modules/commons/commons_wysiwyg/commons_wysiwyg.info
+++ b/profiles/commons/modules/commons/commons_wysiwyg/commons_wysiwyg.info
@@ -12,9 +12,9 @@ features[filter][] = filtered_html
 features[filter][] = full_html
 features[user_permission][] = use text format filtered_html
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/modules/contrib/addressfield_tokens/LICENSE.txt b/profiles/commons/modules/contrib/addressfield_tokens/LICENSE.txt
old mode 100644
new mode 100755
diff --git a/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.info b/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.info
index 398fc54..392c321 100644
--- a/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.info
+++ b/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.info
@@ -16,9 +16,9 @@ dependencies[] = addressfield
 dependencies[] = entity_token
 dependencies[] = token
 
-; Information added by drupal.org packaging script on 2012-10-16
-version = "7.x-1.3"
+; Information added by Drupal.org packaging script on 2014-05-14
+version = "7.x-1.4"
 core = "7.x"
 project = "addressfield_tokens"
-datestamp = "1350397271"
+datestamp = "1400081330"
 
diff --git a/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.theme.inc b/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.theme.inc
index 45a6614..948dd75 100644
--- a/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.theme.inc
+++ b/profiles/commons/modules/contrib/addressfield_tokens/addressfield_tokens.theme.inc
@@ -102,5 +102,5 @@ function theme_addressfield_formatter__components($vars) {
     }
   }
   
-  return implode($separator, $out);
+  return filter_xss(implode($separator, $out));
 }
\ No newline at end of file
diff --git a/profiles/commons/modules/contrib/admin_icons/admin_icons.info b/profiles/commons/modules/contrib/admin_icons/admin_icons.info
index 3f68413..5da94bc 100644
--- a/profiles/commons/modules/contrib/admin_icons/admin_icons.info
+++ b/profiles/commons/modules/contrib/admin_icons/admin_icons.info
@@ -4,8 +4,8 @@ core = 7.x
 
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = ""
 project = "admin_icons"
-datestamp = "1399579148"
+datestamp = "1400787245"
 
diff --git a/profiles/commons/modules/contrib/apachesolr_og/apachesolr_og.info b/profiles/commons/modules/contrib/apachesolr_og/apachesolr_og.info
index d050ce9..6aa690c 100644
--- a/profiles/commons/modules/contrib/apachesolr_og/apachesolr_og.info
+++ b/profiles/commons/modules/contrib/apachesolr_og/apachesolr_og.info
@@ -7,9 +7,9 @@ dependencies[] = apachesolr
 dependencies[] = og
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0+2-dev"
 core = "7.x"
 project = "apachesolr_og"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/apachesolr_user/apachesolr_user.info b/profiles/commons/modules/contrib/apachesolr_user/apachesolr_user.info
index 496cce4..b09219e 100644
--- a/profiles/commons/modules/contrib/apachesolr_user/apachesolr_user.info
+++ b/profiles/commons/modules/contrib/apachesolr_user/apachesolr_user.info
@@ -6,8 +6,8 @@ package = Search Toolkit
 core = 7.x
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = ""
 project = "apachesolr_user"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/breakpoints/breakpoints.info b/profiles/commons/modules/contrib/breakpoints/breakpoints.info
index 296354f..3e1b331 100644
--- a/profiles/commons/modules/contrib/breakpoints/breakpoints.info
+++ b/profiles/commons/modules/contrib/breakpoints/breakpoints.info
@@ -6,9 +6,9 @@ files[] = breakpoints.module
 files[] = breakpoints.test
 configure = admin/config/media/breakpoints
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.1+1-dev"
 core = "7.x"
 project = "breakpoints"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/breakpoints/tests/breakpoints_theme_test.info b/profiles/commons/modules/contrib/breakpoints/tests/breakpoints_theme_test.info
index 63dfd09..aed1e61 100644
--- a/profiles/commons/modules/contrib/breakpoints/tests/breakpoints_theme_test.info
+++ b/profiles/commons/modules/contrib/breakpoints/tests/breakpoints_theme_test.info
@@ -5,9 +5,9 @@ core = 7.x
 hidden = TRUE
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.1+1-dev"
 core = "7.x"
 project = "breakpoints"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/breakpoints/tests/themes/breakpoints_test_theme/breakpoints_test_theme.info b/profiles/commons/modules/contrib/breakpoints/tests/themes/breakpoints_test_theme/breakpoints_test_theme.info
index 3ee1588..f6c62df 100644
--- a/profiles/commons/modules/contrib/breakpoints/tests/themes/breakpoints_test_theme/breakpoints_test_theme.info
+++ b/profiles/commons/modules/contrib/breakpoints/tests/themes/breakpoints_test_theme/breakpoints_test_theme.info
@@ -10,9 +10,9 @@ breakpoints[wide] = (min-width: 851px)
 breakpoints[tv] = only screen and (min-width: 3456px)
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.1+1-dev"
 core = "7.x"
 project = "breakpoints"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ckeditor/ckeditor.info b/profiles/commons/modules/contrib/ckeditor/ckeditor.info
index b1b917c..c96a445 100644
--- a/profiles/commons/modules/contrib/ckeditor/ckeditor.info
+++ b/profiles/commons/modules/contrib/ckeditor/ckeditor.info
@@ -5,9 +5,9 @@ package     = User interface
 configure   = admin/config/content/ckeditor
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.13+11-dev"
 core = "7.x"
 project = "ckeditor"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/PATCHES.txt b/profiles/commons/modules/contrib/ctools/PATCHES.txt
new file mode 100644
index 0000000..6268efe
--- /dev/null
+++ b/profiles/commons/modules/contrib/ctools/PATCHES.txt
@@ -0,0 +1,4 @@
+The following patches have been applied to this project:
+- https://drupal.org/files/issues/missing-ctools-version-2269747-1.patch
+
+This file was automatically generated by Drush Make (http://drupal.org/project/drush).
\ No newline at end of file
diff --git a/profiles/commons/modules/contrib/ctools/bulk_export/bulk_export.info b/profiles/commons/modules/contrib/ctools/bulk_export/bulk_export.info
index 4bee683..0316a28 100644
--- a/profiles/commons/modules/contrib/ctools/bulk_export/bulk_export.info
+++ b/profiles/commons/modules/contrib/ctools/bulk_export/bulk_export.info
@@ -5,9 +5,9 @@ dependencies[] = ctools
 package = Chaos tool suite
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/ctools.info b/profiles/commons/modules/contrib/ctools/ctools.info
index 9ec6699..fe9fa2f 100644
--- a/profiles/commons/modules/contrib/ctools/ctools.info
+++ b/profiles/commons/modules/contrib/ctools/ctools.info
@@ -1,15 +1,16 @@
 name = Chaos tools
 description = A library of helpful tools by Merlin of Chaos.
 core = 7.x
+version = 1.4
 package = Chaos tool suite
 files[] = includes/context.inc
 files[] = includes/math-expr.inc
 files[] = includes/stylizer.inc
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/ctools_access_ruleset/ctools_access_ruleset.info b/profiles/commons/modules/contrib/ctools/ctools_access_ruleset/ctools_access_ruleset.info
index 8a6188b..bd2e51f 100644
--- a/profiles/commons/modules/contrib/ctools/ctools_access_ruleset/ctools_access_ruleset.info
+++ b/profiles/commons/modules/contrib/ctools/ctools_access_ruleset/ctools_access_ruleset.info
@@ -5,9 +5,9 @@ package = Chaos tool suite
 dependencies[] = ctools
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/ctools_ajax_sample/ctools_ajax_sample.info b/profiles/commons/modules/contrib/ctools/ctools_ajax_sample/ctools_ajax_sample.info
index e2c1c6e..f566b4a 100644
--- a/profiles/commons/modules/contrib/ctools/ctools_ajax_sample/ctools_ajax_sample.info
+++ b/profiles/commons/modules/contrib/ctools/ctools_ajax_sample/ctools_ajax_sample.info
@@ -5,9 +5,9 @@ dependencies[] = ctools
 core = 7.x
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/ctools_custom_content/ctools_custom_content.info b/profiles/commons/modules/contrib/ctools/ctools_custom_content/ctools_custom_content.info
index d3ef419..76d05a4 100644
--- a/profiles/commons/modules/contrib/ctools/ctools_custom_content/ctools_custom_content.info
+++ b/profiles/commons/modules/contrib/ctools/ctools_custom_content/ctools_custom_content.info
@@ -5,9 +5,9 @@ package = Chaos tool suite
 dependencies[] = ctools
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/ctools_plugin_example/ctools_plugin_example.info b/profiles/commons/modules/contrib/ctools/ctools_plugin_example/ctools_plugin_example.info
index f48aad3..4ff008a 100644
--- a/profiles/commons/modules/contrib/ctools/ctools_plugin_example/ctools_plugin_example.info
+++ b/profiles/commons/modules/contrib/ctools/ctools_plugin_example/ctools_plugin_example.info
@@ -8,9 +8,9 @@ dependencies[] = advanced_help
 core = 7.x
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/page_manager/page_manager.info b/profiles/commons/modules/contrib/ctools/page_manager/page_manager.info
index c13753c..a023907 100644
--- a/profiles/commons/modules/contrib/ctools/page_manager/page_manager.info
+++ b/profiles/commons/modules/contrib/ctools/page_manager/page_manager.info
@@ -5,9 +5,9 @@ dependencies[] = ctools
 package = Chaos tool suite
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/page_manager/plugins/tasks/page.admin.inc b/profiles/commons/modules/contrib/ctools/page_manager/plugins/tasks/page.admin.inc
index eb2dcaa..88d46c5 100644
--- a/profiles/commons/modules/contrib/ctools/page_manager/plugins/tasks/page.admin.inc
+++ b/profiles/commons/modules/contrib/ctools/page_manager/plugins/tasks/page.admin.inc
@@ -443,7 +443,7 @@ function page_manager_page_form_basic($form, &$form_state) {
       '#type' => 'checkbox',
       '#default_value' => !empty($page->make_frontpage),
       '#title' => t('Make this your site home page.'),
-      '#description' => t('To set this panel as your home page you must create a unique path name with no % placeholders in the path. The site home page is currently set to %homepage on the !siteinfo configuration form.', array('!siteinfo' => l(t('Site Information'), 'admin/settings/site-information'), '%homepage' => '/' . $frontpage)),
+      '#description' => t('To set this panel as your home page you must create a unique path name with no % placeholders in the path. The site home page is currently set to %homepage on the !siteinfo configuration form.', array('!siteinfo' => l(t('Site Information'), 'admin/config/system/site-information'), '%homepage' => '/' . $frontpage)),
     );
     $form['admin_paths'] = array(
       '#type' => 'checkbox',
diff --git a/profiles/commons/modules/contrib/ctools/plugins/contexts/string.inc b/profiles/commons/modules/contrib/ctools/plugins/contexts/string.inc
index 0ea5e52..9a715b8 100644
--- a/profiles/commons/modules/contrib/ctools/plugins/contexts/string.inc
+++ b/profiles/commons/modules/contrib/ctools/plugins/contexts/string.inc
@@ -14,6 +14,8 @@ $plugin = array(
   'title' => t('String'),
   'description' => t('A context that is just a string.'),
   'context' => 'ctools_context_create_string',
+  'edit form' => 'ctools_context_string_settings_form',
+  'defaults' => '',
   'keyword' => 'string',
   'no ui' => FALSE,
   'context name' => 'string',
@@ -44,7 +46,8 @@ function ctools_context_create_string($empty, $data = NULL, $conf = FALSE) {
   }
 
   if ($data !== FALSE ) {
-    $context->data = $data;
+    // Support the array storage from the settings form but also handle direct input from arguments.
+    $context->data = is_array($data) ? $data['string'] : $data;
     $context->title = ($conf) ? check_plain($data['identifier']) : check_plain($data);
     return $context;
   }
@@ -62,3 +65,23 @@ function ctools_context_string_convert($context, $type) {
   }
 }
 
+/**
+ * String settings form.
+ */
+function ctools_context_string_settings_form($form, &$form_state) {
+  $conf = &$form_state['conf'];
+
+  $form['string'] = array(
+    '#title' => t('Enter the string'),
+    '#type' => 'textfield',
+    '#maxlength' => 512,
+    '#weight' => -10,
+    '#default_value' => $conf['string'],
+  );
+
+  return $form;
+}
+
+function ctools_context_string_settings_form_submit($form, &$form_state) {
+  $form_state['conf']['string'] = $form_state['values']['string'];
+}
diff --git a/profiles/commons/modules/contrib/ctools/stylizer/stylizer.info b/profiles/commons/modules/contrib/ctools/stylizer/stylizer.info
index d4ab665..da28a1d 100644
--- a/profiles/commons/modules/contrib/ctools/stylizer/stylizer.info
+++ b/profiles/commons/modules/contrib/ctools/stylizer/stylizer.info
@@ -6,9 +6,9 @@ dependencies[] = ctools
 dependencies[] = color
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/term_depth/term_depth.info b/profiles/commons/modules/contrib/ctools/term_depth/term_depth.info
index d03b991..d756f63 100644
--- a/profiles/commons/modules/contrib/ctools/term_depth/term_depth.info
+++ b/profiles/commons/modules/contrib/ctools/term_depth/term_depth.info
@@ -4,9 +4,9 @@ core = 7.x
 dependencies[] = ctools
 package = Chaos tool suite
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/tests/ctools_export_test/ctools_export_test.info b/profiles/commons/modules/contrib/ctools/tests/ctools_export_test/ctools_export_test.info
index 6cdfe34..e4a7517 100644
--- a/profiles/commons/modules/contrib/ctools/tests/ctools_export_test/ctools_export_test.info
+++ b/profiles/commons/modules/contrib/ctools/tests/ctools_export_test/ctools_export_test.info
@@ -8,9 +8,9 @@ hidden = TRUE
 files[] = ctools_export.test
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/tests/ctools_plugin_test.info b/profiles/commons/modules/contrib/ctools/tests/ctools_plugin_test.info
index b42c287..0f5a2e9 100644
--- a/profiles/commons/modules/contrib/ctools/tests/ctools_plugin_test.info
+++ b/profiles/commons/modules/contrib/ctools/tests/ctools_plugin_test.info
@@ -12,9 +12,9 @@ files[] = math_expression_stack.test
 hidden = TRUE
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/ctools/views_content/views_content.info b/profiles/commons/modules/contrib/ctools/views_content/views_content.info
index dd2bb2c..9adba4a 100644
--- a/profiles/commons/modules/contrib/ctools/views_content/views_content.info
+++ b/profiles/commons/modules/contrib/ctools/views_content/views_content.info
@@ -10,9 +10,9 @@ files[] = plugins/views/views_content_plugin_display_panel_pane.inc
 files[] = plugins/views/views_content_plugin_style_ctools_context.inc
 
 
-; Information added by drush on 2014-05-08
-version = "7.x-1.4+4-dev"
+; Information added by drush on 2014-05-22
+version = "7.x-1.4+6-dev"
 core = "7.x"
 project = "ctools"
-datestamp = "1399579147"
+datestamp = "1400787244"
 
diff --git a/profiles/commons/modules/contrib/email_registration/email_registration.info b/profiles/commons/modules/contrib/email_registration/email_registration.info
index b38265a..a36fae2 100644
--- a/profiles/commons/modules/contrib/email_registration/email_registration.info
+++ b/profiles/commons/modules/contrib/email_registration/email_registration.info
@@ -4,9 +4,9 @@ files[] = email_registration.test
 core = 7.x
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.2+1-dev"
 core = "7.x"
 project = "email_registration"
-datestamp = "1399579145"
+datestamp = "1400787242"
 
diff --git a/profiles/commons/modules/contrib/flag/PATCHES.txt b/profiles/commons/modules/contrib/flag/PATCHES.txt
index 4fa8d8d..246cfbb 100644
--- a/profiles/commons/modules/contrib/flag/PATCHES.txt
+++ b/profiles/commons/modules/contrib/flag/PATCHES.txt
@@ -1,4 +1,5 @@
 The following patches have been applied to this project:
 - https://drupal.org/files/issues/1965760.29.flag_.entity-tokens.patch
+- https://drupal.org/files/flag-default-flags-alter-hook-2027091-03.patch
 
 This file was automatically generated by Drush Make (http://drupal.org/project/drush).
\ No newline at end of file
diff --git a/profiles/commons/modules/contrib/flag/flag.api.php b/profiles/commons/modules/contrib/flag/flag.api.php
index de4486b..9652b0b 100644
--- a/profiles/commons/modules/contrib/flag/flag.api.php
+++ b/profiles/commons/modules/contrib/flag/flag.api.php
@@ -54,6 +54,18 @@ function hook_flag_default_flags() {
 }
 
 /**
+ * Alter the definition of default flags.
+ *
+ * @param array &$flags
+ *   An array keyed by flag machine name containing flag definitions.
+ */
+function hook_flag_default_flags_alter(&$flags) {
+  if (!empty($flags['bookmark'])) {
+    $flags['bookmark']['title'] = 'Bananana Bookmark';
+  }
+}
+
+/**
  * Allow modules to alter a flag when it is initially loaded.
  *
  * @see flag_get_flags().
diff --git a/profiles/commons/modules/contrib/flag/flag.module b/profiles/commons/modules/contrib/flag/flag.module
index 34877c5..57d902e 100644
--- a/profiles/commons/modules/contrib/flag/flag.module
+++ b/profiles/commons/modules/contrib/flag/flag.module
@@ -1770,32 +1770,39 @@ function flag_get_default_flags($include_disabled = FALSE) {
   $default_flags = array();
   $flag_status = variable_get('flag_default_flag_status', array());
 
+  $default_flags_info = array();
   foreach (module_implements('flag_default_flags') as $module) {
     $function = $module . '_flag_default_flags';
     foreach ($function() as $flag_name => $flag_info) {
       // Backward compatibility: old exported default flags have their names
-      // in $flag_info instead, so we use the += operator to not overwrite it.
-      $flag_info += array(
+      // in $flag_info instead, so we use the + operator to not overwrite it.
+      $default_flags_info[$flag_name] = $flag_info + array(
         'name' => $flag_name,
         'module' => $module,
       );
-      $flag = flag_flag::factory_by_array($flag_info);
+    }
+  }
 
-      // Disable flags that are not at the current API version.
-      if (!$flag->is_compatible()) {
-        $flag->status = FALSE;
-      }
+  // Allow modules to alter definitions using hook_flag_default_flags_alter().
+  drupal_alter('flag_default_flags', $default_flags_info);
 
-      // Add flags that have been enabled.
-      if ((!isset($flag_status[$flag->name]) && (!isset($flag->status) || $flag->status)) || !empty($flag_status[$flag->name])) {
-        $flag->status = TRUE;
-        $default_flags[$flag->name] = $flag;
-      }
-      // Add flags that have been disabled.
-      elseif ($include_disabled) {
-        $flag->status = FALSE;
-        $default_flags[$flag->name] = $flag;
-      }
+  foreach ($default_flags_info as $flag_info) {
+    $flag = flag_flag::factory_by_array($flag_info);
+
+    // Disable flags that are not at the current API version.
+    if (!$flag->is_compatible()) {
+      $flag->status = FALSE;
+    }
+
+    // Add flags that have been enabled.
+    if ((!isset($flag_status[$flag->name]) && (!isset($flag->status) || $flag->status)) || !empty($flag_status[$flag->name])) {
+      $flag->status = TRUE;
+      $default_flags[$flag->name] = $flag;
+    }
+    // Add flags that have been disabled.
+    elseif ($include_disabled) {
+      $flag->status = FALSE;
+      $default_flags[$flag->name] = $flag;
     }
   }
 
diff --git a/profiles/commons/modules/contrib/gravatar/gravatar.info b/profiles/commons/modules/contrib/gravatar/gravatar.info
index ffde689..e561fab 100644
--- a/profiles/commons/modules/contrib/gravatar/gravatar.info
+++ b/profiles/commons/modules/contrib/gravatar/gravatar.info
@@ -7,9 +7,9 @@ files[] = gravatar.admin.inc
 configure = admin/config/people/gravatar
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.1+5-dev"
 core = "7.x"
 project = "gravatar"
-datestamp = "1399579144"
+datestamp = "1400787241"
 
diff --git a/profiles/commons/modules/contrib/i18nviews/i18nviews.info b/profiles/commons/modules/contrib/i18nviews/i18nviews.info
index a6524d7..fb5700f 100644
--- a/profiles/commons/modules/contrib/i18nviews/i18nviews.info
+++ b/profiles/commons/modules/contrib/i18nviews/i18nviews.info
@@ -27,8 +27,8 @@ files[] = includes/i18nviews_handler_filter_term_node_tid_depth.inc
 files[] = includes/i18nviews_plugin_argument_validate_i18n_taxonomy_term.inc
 files[] = includes/i18nviews_plugin_localization_i18nstrings.inc
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = ""
 project = "i18nviews"
-datestamp = "1399579144"
+datestamp = "1400787241"
 
diff --git a/profiles/commons/modules/contrib/lingotek/images/close.png b/profiles/commons/modules/contrib/lingotek/images/close.png
new file mode 100644
index 0000000..9e2ebd3
Binary files /dev/null and b/profiles/commons/modules/contrib/lingotek/images/close.png differ
diff --git a/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekConfigChunk.php b/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekConfigChunk.php
index 1df7b2a..6bf1bd3 100644
--- a/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekConfigChunk.php
+++ b/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekConfigChunk.php
@@ -826,7 +826,7 @@ class LingotekConfigChunk implements LingotekTranslatableEntity {
       $lid = self::getLidFromTag($drupal_field_name);
       if (!in_array($lid, $non_lingotek_locales_targets)) {
         $content = (string) $xml_obj->element;
-        $content = lingotek_unfilter_placeholders($content);
+        $content = lingotek_unfilter_placeholders(decode_entities($content));
         $plural_lid = array_key_exists($lid, $plural_mapping);
         $rows += array(
           ":l_$icount" => $lid,
diff --git a/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekSync.php b/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekSync.php
index 7280a58..ba8acb0 100644
--- a/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekSync.php
+++ b/profiles/commons/modules/contrib/lingotek/lib/Drupal/lingotek/LingotekSync.php
@@ -674,6 +674,14 @@ class LingotekSync {
     $query->addField('base', $id_key);
     $query->leftJoin('{lingotek_entity_metadata}', 'upload', 'upload.entity_id = base.' . $id_key . ' and upload.entity_type =\'' . $entity_type . '\' and upload.entity_key = \'node_sync_status\'');
 
+    if ($entity_type == 'node') {
+      // Exclude any target nodes created using node-based translation.
+      $tnid_query = db_or();
+      $tnid_query->condition('base.tnid', 0);
+      $tnid_query->where('base.tnid = base.nid');
+      $query->condition($tnid_query);
+    }
+
     $or = db_or();
     $or->condition('upload.value', LingotekSync::STATUS_EDITED);
     $or->isNull('upload.value');
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.admin.inc b/profiles/commons/modules/contrib/lingotek/lingotek.admin.inc
index 6e9f4f8..2349ce6 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.admin.inc
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.admin.inc
@@ -244,7 +244,7 @@ function lingotek_admin_entity_bundle_profiles_form($form, &$form_state, $entity
   );
 
   if ($setup_complete) {
-    $form['translation_' . $entity_type]['types']['#suffix'] = t('Note: changing the profile will update all settings for existing @entity_types except for the project, workflow, vault, and storage method (e.g. node/field)', array('@entity_type' => $entity_type));
+    $form['translation_' . $entity_type]['types']['#suffix'] = t('Note: changing the profile will update all settings for existing @entity_types except for the project, workflow, vault, and storage method (e.g. node/field)', array('@entity_type' => strtolower($entity_type_info['label'])));
   }
 
   lingotek_admin_add_entity_specific_changes($form, $form_state, $entity_type);
@@ -311,9 +311,11 @@ function lingotek_admin_add_entity_specific_changes(&$form, &$form_state, $entit
         '#description' => t('Set all <i>language neutral</i> comments (and underlying fields) for enabled comment types to be @language.', array('@language' => language_default('name'))),
         '#default_value' => 1, // default to enable (for use in setup) --- js will disable on settings by default
       );
+      //$form['translation_' . $entity_type]['types']['#suffix'] = t('Note: changing the profile will update all settings for existing comments except for the project, workflow, vault, and storage method (e.g. node/field).');
+      break;
     case 'field_collection_item':
       // add note about field collections being coupled with their parent entities
-      $form['translation_' . $entity_type]['types']['#suffix'] = t('Note: changing the profile will update all settings for existing nodes except for the project, workflow, vault, and storage method (e.g. node/field).');
+      $form['translation_' . $entity_type]['types']['#suffix'] = t('Note: Field collections will be uploaded and downloaded at the same time as their parent.');
       break;
   }
 }
@@ -553,7 +555,7 @@ function lingotek_admin_additional_translation_settings_form($form, &$form_state
     'lingotek_translate_config_menus' => array(t('Menus'), t('Include translation for all menus set to \'Translate and Localize\'.') . drupal_render($prep_menus_chbx)),
     'lingotek_translate_config_views' => array(t('Views'), t('Include translation of all translatable strings within views.  This will not generally include translation of all results generated by each view, which is usually configurable by selecting localizable fields within the view itself.  Note: You must have the <a href="https://drupal.org/project/i18nviews" target="_blank">i18nviews</a> module enabled in order to use this.')),
     'lingotek_translate_config_fields' => array(t('Field Labels'), t('Include translation of all translatable field labels.  Note: You must have the <a href="https://drupal.org/project/i18n" target="_blank">i18n_field</a> sub-module enabled in order to use this.')),
-    'lingotek_translate_config_builtins' => array(t('Built-in Interface'), t('When enabled, all built-in strings will be automatically translated.  (Note: this will search all enabled modules for translatable strings, which can take several minutes to process.)') . drupal_render($fr)),
+    'lingotek_translate_config_builtins' => array(t('Built-in Interface'), t('When enabled, all built-in strings will be automatically translated.  (Note: this may take a while.)') . drupal_render($fr)),
     'lingotek_translate_config_misc' => array(t('Miscellaneous Strings'), t('Include translation of any other miscellaneous strings found by the Internationalization (i18n) module.')),
   );
 
@@ -1341,9 +1343,17 @@ function lingotek_admin_profiles_form($form, &$form_state, $show_fieldset = FALS
       $edit_link = '<i class="fa fa-gear fa-lg ltk-disabled-icon"></i>';
     }
     else {
-      $edit_link = '<a href="' . url(LINGOTEK_MENU_MAIN_BASE_URL . '/settings/profile/' . $key) . '" class="ctools-use-modal" title="' . t('Edit') . '"><i class="fa fa-gear fa-lg"></i></a>';
+      $edit_link = '<a href="' . url(LINGOTEK_MENU_MAIN_BASE_URL . '/settings/profile/' . $key) . '" class="ctools-use-modal ctools-modal-lingotek-style" title="' . t('Edit') . '"><i class="fa fa-gear fa-lg"></i></a>';
     }
 
+    // styling for modals
+    drupal_add_js(array(
+      'lingotek-style' => array(
+        'closeImage' => theme('image', array('path' => drupal_get_path('module', 'lingotek') . '/images/close.png', 'alt' => t('Close window'), 'title' => t('Close window'))),
+        'animation' => 'fadeIn',
+      ),
+    ), 'setting');
+
     $count_by_entity_type = lingotek_admin_profile_usage($key);
     $count_types = lingotek_admin_profile_usage_by_types($key);
     $total_count_with_profiles += array_sum($count_by_entity_type);
@@ -1731,13 +1741,30 @@ function lingotek_admin_utilities_form($form, &$form_state, $show_fieldset = FAL
       //'#group' => 'administrative_settings',
   );
 
-  $btn_disassociate_translations = array(
-    '#type' => 'submit',
-    '#value' => t('Disassociate'),
-    '#submit' => array('lingotek_batch_disassociate_content'),
-    '#attributes' => array(
-      'onclick' => 'return confirm("' . t('Are you sure?\n\nAll of your content will have to be retranslated.') . '");'
+  drupal_add_js(array(
+    'lingotek-disassociate-style' => array(
+      'modalSize' => array(
+        'type' => 'fixed',
+        'width' => 450,
+        'height' => 250,
+      ),
+      'closeImage' => theme('image', array('path' => drupal_get_path('module', 'lingotek') . '/images/close.png', 'alt' => t('Close window'), 'title' => t('Close window'))),
+      'animation' => 'fadeIn',
     ),
+  ), 'setting');
+
+  $form['url'] = array(
+    '#type' => 'hidden',
+    // The name of the class is the #id of $btn_disassociate_translations with "-url" suffix. 
+    '#attributes' => array('class' => array('ctools-lingotek-disassociate-button-url')), 
+    '#value' => url(LINGOTEK_MENU_MAIN_BASE_URL . '/disassociate/'),
+  );
+
+  $btn_disassociate_translations = array(
+    '#type' => 'button', 
+    '#value' => t('Disassociate'), 
+    '#attributes' => array('class' => array('ctools-use-modal', 'ctools-modal-lingotek-disassociate-style')), 
+    '#id' => 'ctools-lingotek-disassociate-button',
   );
 
   $btn_callback_url_update = array(
@@ -1755,7 +1782,7 @@ function lingotek_admin_utilities_form($form, &$form_state, $show_fieldset = FAL
   // Start: Not sure why, but without these below, the table buttons do not work properly
   $form['utilities'][] = array_merge($btn_callback_refresh_api_cache, array('#attributes' => array('style' => 'display: none;')));
   $form['utilities'][] = array_merge($btn_callback_url_update, array('#attributes' => array('style' => 'display: none;')));
-  $form['utilities'][] = array_merge($btn_disassociate_translations, array('#attributes' => array('style' => 'display: none;')));
+  //$form['utilities'][] = array_merge($btn_disassociate_translations, array('#attributes' => array('style' => 'display: none;')));
   // End: Not sure why
 
   $rows = array(
@@ -1784,7 +1811,7 @@ function lingotek_admin_utilities_form($form, &$form_state, $show_fieldset = FAL
       array('data' => array(
           '#type' => 'markup',
           '#prefix' => t('Disassociate All Translations') . ' <i>' . t('(use with caution)') . '</i>' . '<div class="description">',
-          '#markup' => t("Should only be used to change the Lingotek project or TM vault associated with the node’s translation. Disassociates node translations on Lingotek’s servers from the copies downloaded to Drupal. Additional translation using Lingotek will require re-uploading the node’s content to restart the translation process."),
+          '#markup' => t("Should only be used to change the Lingotek project or TM vault associated with the node’s translation. Option to disassociate node translations on Lingotek’s servers from the copies downloaded to Drupal. Additional translation using Lingotek will require re-uploading the node’s content to restart the translation process."),
           '#suffix' => '</div>'
         )),
       array('data' => $btn_disassociate_translations)
@@ -1798,6 +1825,82 @@ function lingotek_admin_utilities_form($form, &$form_state, $show_fieldset = FAL
   return $form;
 }
 
+function lingotek_disassociate_all_translations($form_id, $entity_type = 'node', $entity_ids = array(), $extra = "") {
+  ctools_include('node.pages', 'node', '');
+  ctools_include('modal');
+  ctools_include('ajax');
+
+  $entity_ids = !is_array($entity_ids) ? explode(',', $entity_ids) : $entity_ids;
+
+  $form_state = array(
+    'ajax' => TRUE,
+    'entity_ids' => $entity_ids,
+    'entity_type' => $entity_type,
+  );
+
+  $output = ctools_modal_form_wrapper('lingotek_disassociate_all_form', $form_state);
+
+  if (!empty($form_state['executed'])) {
+    $commands = array();
+    $commands[] = ctools_modal_command_dismiss();
+    $commands[] = ctools_ajax_command_reload();
+    print ajax_render($commands);
+    drupal_exit();
+  }
+
+  print ajax_render($output);
+}
+
+function lingotek_disassociate_all_form($form, $form_state, $entity_ids = array(), $collapse_fieldset = TRUE) {
+
+  if (isset($form_state['entity_ids']) && empty($entity_ids)) {
+    $entity_ids = $form_state['entity_ids'];
+    $collapse_fieldset = FALSE;
+  }
+
+  $form = array();
+  if (!is_array($entity_ids)) {
+    $entity_ids = array($entity_ids);
+  }
+
+  $form['disassociate_all_translations'] = array(
+    '#type' => 'fieldset',
+    '#title' => t('Disassociate All Translations'),
+    '#collapsible' => $collapse_fieldset,
+    '#collapsed' => $collapse_fieldset,
+  );
+
+  $form['disassociate_all_translations']['confirm'] = array(
+    '#type' => 'checkbox',
+    '#title' => t('Also remove all documents from Lingotek TMS'),
+    '#default_value' => FALSE,
+    );
+  $form['disassociate_all_translations']['submit'] = array(
+    '#type' => 'submit',
+    '#value' => t('Disassociate All Translations'),
+    );
+
+  return $form;
+}
+
+function lingotek_disassociate_all_form_submit($form_state, $form) {
+  $doc_ids = LingotekSync::getAllLocalDocIds();
+  $api = LingotekApi::instance();
+  $operations = array();
+
+  $remove_from_tms = $form_state['disassociate_all_translations']['confirm']['#value'];
+
+  if ($remove_from_tms) { //disassociate on TMS
+    lingotek_batch_disassociate_content_worker($api, $doc_ids);
+  }
+
+  //disassociate on CMS
+  LingotekSync::disassociateAllEntities();
+  LingotekSync::disassociateAllChunks();
+  drupal_set_message(t('All local translations have been disassociated from Lingotek.'));
+}
+
+
 /**
  * Troubleshooting and Logging Form
  */
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.api.inc b/profiles/commons/modules/contrib/lingotek/lingotek.api.inc
index 1604efd..b4cb2af 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.api.inc
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.api.inc
@@ -33,6 +33,11 @@ function lingotek_get_translated_node($node, $drupal_language_code) {
     $localized_node = new stdClass();
     $localized_node->type = $node->type;
     node_object_prepare($localized_node);
+
+    // Grandfather the lingotek settings (ie. profile, etc.) on the new node.
+    if (!empty($node->lingotek)) {
+      $localized_node->lingotek = $node->lingotek;
+    }
     $localized_node->title = $node->title . ' (' . $drupal_language_code . ')';
     $localized_node->tnid = $node->tnid;
     $localized_node->language = $drupal_language_code;
@@ -62,6 +67,11 @@ function lingotek_get_translated_node($node, $drupal_language_code) {
         
     node_save($localized_node);
     lingotek_keystore('node', $localized_node->nid, 'node_sync_status', 'TARGET');
+    // Child node should keep its parent node's profile, for rules integration.
+    $parent_profile = lingotek_keystore('node', $node->nid, 'profile');
+    if ($parent_profile !== FALSE) {
+      lingotek_keystore('node', $localized_node->nid, 'profile', $parent_profile);
+    }
   }
 
   return $localized_node;
@@ -123,8 +133,8 @@ function lingotek_process_entity_xml($xml, $entity, $entity_type, $drupal_langua
         $index = 0;
         if (module_exists('link') && $field['type'] == 'link_field') {
           $target_key = array(
-            'url',
             'title',
+            'url',
           );
         }
         if (!is_array($target_key)) {
@@ -175,9 +185,18 @@ function lingotek_process_entity_xml($xml, $entity, $entity_type, $drupal_langua
               $field['translatable'] = 1;
               field_update_field($field);
             }
-            $array_key = $target_key[$index];
+
+            $is_link = in_array('url', $target_key);
+            $without_title = (count($content) == 1);
+
+            if ($is_link && $without_title) {
+              $array_key = $target_key[1];
+            }
+            else {
+              $array_key = $target_key[$index];
+            }
             $db_field_name = $field['field_name'] . '_' . $array_key;
-            $insert_array[$db_field_name] = lingotek_unfilter_placeholders($text);
+            $insert_array[$db_field_name] = lingotek_unfilter_placeholders(decode_entities($text));
             if (array_key_exists($entity->language, $node_field)) {
               if (array_key_exists('format', $node_field[$entity->language][0])) {
                 $format_db_field_name = $field['field_name'] . '_format';
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.batch.inc b/profiles/commons/modules/contrib/lingotek/lingotek.batch.inc
index ea1c8be..6214af7 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.batch.inc
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.batch.inc
@@ -253,7 +253,7 @@ function lingotek_get_sync_download_batch_elements($download_targets = NULL, $sy
 /**
  * Batch Create: Lingotek Disassociate Translations
  */
-function lingotek_batch_disassociate_content() {
+function lingotek_batch_disassociate_content($remove_from_TMS) {
   $doc_ids = LingotekSync::getAllLocalDocIds();
   $api = LingotekApi::instance();
   $operations = array();
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.bulk_grid.inc b/profiles/commons/modules/contrib/lingotek/lingotek.bulk_grid.inc
index 20b151b..981d520 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.bulk_grid.inc
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.bulk_grid.inc
@@ -151,6 +151,7 @@ function lingotek_bulk_grid_form($form, $form_state) {
     '#markup' => l(t('Edit Settings'), LINGOTEK_MENU_MAIN_BASE_URL . '/manage/edit/' . $entity_type, array('attributes' => array('id' => 'edit-settings-link', 'class' => array('ctools-use-modal', 'ctools-modal-set-filters')))),
 
   );
+
   $form['disassociate_translations'] = array(
     '#markup' => l(t('Disassociate translations'), LINGOTEK_MENU_MAIN_BASE_URL . '/manage/reset/' . $entity_type, array('attributes' => array('id' => 'reset-link', 'class' => array('ctools-use-modal', 'ctools-modal-set-filters', 'ltk-hidden-modal-trigger')))),
   );
@@ -238,19 +239,14 @@ function lingotek_bulk_grid_form($form, $form_state) {
   ctools_modal_add_js();
 
   drupal_add_js(array(
-    'customize-table' => array(
-      'modalSize' => array(
-        //'type' => 'fixed',
-        //'width' => 200,
-        //'height' => 200,
-      ),
-    ),
     'set-filters' => array(
       'modalSize' => array(
         'type' => 'fixed',
         'width' => 500,
-        'height' => 500,
+        'height' => 768,
       ),
+      'closeImage' => theme('image', array('path' => drupal_get_path('module', 'lingotek') . '/images/close.png', 'alt' => t('Close window'), 'title' => t('Close window'))),
+      'animation' => 'fadeIn',
     ),
   ), 'setting');
   
@@ -288,22 +284,20 @@ function lingotek_bulk_grid_form($form, $form_state) {
     );
   }
 
-  if (count($table_data) >= $limit || $page > 1) {
-    $form['limit_select'] = array(
-      '#type' => 'select',
-      '#prefix' => '<div id="page-limit">',
-      '#suffix' =>  ' ' . t('results per page') . '</div>',
-      '#options' => array(
-        10 => '10',
-        25 => '25',
-        50 => '50',
-        100 => '100',
-        250 => '250',
-        500 => '500',
-      ),
-      '#default_value' => $limit,
-    );
-  }
+  $form['limit_select'] = array(
+    '#type' => 'select',
+    '#prefix' => '<div id="page-limit">',
+    '#suffix' =>  ' ' . t('results per page') . '</div>',
+    '#options' => array(
+      10 => '10',
+      25 => '25',
+      50 => '50',
+      100 => '100',
+      250 => '250',
+      500 => '500',
+    ),
+    '#default_value' => $limit,
+  );
 
   return $form;
 }
@@ -1699,6 +1693,12 @@ function lingotek_entity_disassociate_form($form, $form_state, $entity_ids = arr
     '#collapsed' => $collapse_fieldset,
   );
 
+  $form['disassociate_translations']['confirm'] = array(
+    '#type' => 'checkbox',
+    '#title' => t('Also remove all document(s) from Lingotek TMS'),
+    '#default_value' => FALSE,
+    );
+
   $form['disassociate_translations']['submit'] = array(
     '#type' => 'submit',
     '#value' => t('Disassociate Translations'),
@@ -1731,7 +1731,14 @@ function lingotek_entity_disassociate_form_submit($form, $form_state) {
   $doc_ids = LingotekSync::getDocIdsFromEntityIds($entity_type, $entity_ids);
 
   $api = LingotekApi::instance();
-  $api->removeDocument($doc_ids);
+  $remove_from_tms = $form_state['values']['confirm'];
+  if ($remove_from_tms) { //disassociate on TMS
+    $result = lingotek_batch_disassociate_content_worker($api, $doc_ids);
+    if (!$result) {
+      drupal_set_message(t('Failed to remove documents from Lingotek TMS.'), 'status', FALSE);
+      return;
+    }
+  }
   lingotek_keystore_delete_multiple($entity_type, $entity_ids, 'document_id');
   lingotek_keystore_delete_multiple($entity_type, $entity_ids, 'node_sync_status');
   foreach ($entity_ids as $entity_id) {
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.info b/profiles/commons/modules/contrib/lingotek/lingotek.info
index 0862d2c..cc9dd26 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.info
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.info
@@ -44,9 +44,9 @@ files[] = lingotek_views_handler_workbench_link.inc
 
 stylesheets[all][] = style/base.css
 
-; Information added by Drupal.org packaging script on 2014-05-05
-version = "7.x-5.06"
+; Information added by Drupal.org packaging script on 2014-05-14
+version = "7.x-5.07"
 core = "7.x"
 project = "lingotek"
-datestamp = "1399330130"
+datestamp = "1400110135"
 
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.module b/profiles/commons/modules/contrib/lingotek/lingotek.module
index 537f6f6..c88a461 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.module
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.module
@@ -464,6 +464,16 @@ function lingotek_menu() {
     'access arguments' => array('administer lingotek')
   );
 
+  $items[LINGOTEK_MENU_MAIN_BASE_URL . '/disassociate'] = array(
+    //'title' => 'Lingotek Disassociate All Content',
+    'description' => 'This will disassociate all content from their translation',
+    'file' => 'lingotek.admin.inc',
+    'page callback' => 'lingotek_disassociate_all_translations',
+    'page arguments' => array(),
+    'type' => MENU_CALLBACK,
+    'access arguments' => array('administer lingotek')
+  );
+
   return $items;
 }
 
@@ -618,32 +628,36 @@ function lingotek_permission() {
  *   The ID of the form being altered.
  */
 function lingotek_form_node_form_alter(&$form, $form_state, $form_id) {
-  // On node create, set the language select box to our source language, if this is a node content type that we translate for, if the form is in Add mode.
-  if (!isset($form['nid']['#value'])) { // add mode (no node id set)
-    if (lingotek_supported_type($form['type']['#value']) && !lingotek_is_node_translation()) { // lingotek translated content type
-      $form['language']['#default_value'] = lingotek_get_source_language();
-    }
-  }
 
   if (!user_access('manage projects')) {
     return;
   }
   $show_advanced = LingotekAccount::instance()->showAdvanced();
 
-  if (isset($form['nid']['#value'])) {
-    $nid = $form['nid']['#value'];
-    $node = lingotek_node_load_default($nid);
-  }
-  else {
+  // On node create, set the language select box to our source language, if the following are true:
+  // 1. the form is in Add mode
+  // 2. this is a node content type that we translate
+  // 3. the language is one enabled for lingotek translation
+
+  if (!isset($form['nid']['#value'])) { // add mode (no node id set)
     $node = $form['#node'];
+    $is_node_translation = lingotek_is_node_translation($node);
     lingotek_entity_load(array($node), 'node');
+    if (lingotek_supported_type($form['type']['#value']) && (!$is_node_translation || lingotek_enabled_langcode($node->language))) { // lingotek translated content type
+      $form['language']['#default_value'] = lingotek_get_source_language();
+    }
+  }
+  else {
+    // Node exists, updating.
+    $nid = $form['nid']['#value'];
+    $node = lingotek_node_load_default($nid);
+    $is_node_translation = lingotek_is_node_translation($node);
   }
 
   global $language;
-
   $drupal_language_code = $language->language;
 
-  if ($drupal_language_code != $node->language && lingotek_node_pushed($node)) {
+  if ($drupal_language_code != $node->language && lingotek_node_pushed($node) && !$is_node_translation) {
     $lingotek_locale = Lingotek::convertDrupal2Lingotek($drupal_language_code);
     LingotekSync::setTargetStatus('node', $node->nid, $lingotek_locale, LingotekSync::STATUS_PENDING); //set to pending so any changes will be downloaded on next sync
     $language_text = lingotek_language_field_lookup('native', $lingotek_locale) . " (" . $drupal_language_code . ")";
@@ -660,7 +674,12 @@ function lingotek_form_node_form_alter(&$form, $form_state, $form_id) {
   }
 
   $form = array_merge($form, lingotek_get_node_settings_form($form, $form_state, $node));
- 
+
+  // Don't modify form if it is node-based translation of a disabled language.
+  if ($is_node_translation && !lingotek_enabled_langcode($node->language)) {
+    return;
+  }
+
   $api = LingotekApi::instance();
 
   // show workflow-change option only if there are more than one workflow and if it's an existing node
@@ -675,7 +694,7 @@ function lingotek_form_node_form_alter(&$form, $form_state, $form_id) {
       '#options' => $workflows,
       '#empty_option' => '(select one)',
     );
-    if (!$nid) { // don't show prefill stuff on new nodes 
+    if (!$nid) { // don't show prefill stuff on new nodes
       $form['lingotek']['workflow_id']['#suffix'] = '</div>';
     }
     else {
@@ -701,9 +720,9 @@ function lingotek_form_node_form_alter(&$form, $form_state, $form_id) {
         '#description' => t('Please select the highest phase which should be prefilled for the new workflow'),
         '#type' => 'select',
         '#states' => array(
-            'visible' => array(':input[name="lingotek[workflow_id]"]' => array('!value' => $node->lingotek['workflow_id']),
-                           array(':input[name="lingotek[prefill_phases_checkbox]"]' => array('checked' => TRUE))),
-          ),
+          'visible' => array(':input[name="lingotek[workflow_id]"]' => array('!value' => $node->lingotek['workflow_id']),
+            array(':input[name="lingotek[prefill_phases_checkbox]"]' => array('checked' => TRUE))),
+        ),
         '#suffix' => '</div>',
       );
       if (isset($form_state['values']['lingotek']['workflow_id']) && $form_state['values']['lingotek']['workflow_id'] != NULL) {
@@ -714,8 +733,8 @@ function lingotek_form_node_form_alter(&$form, $form_state, $form_id) {
         $form['lingotek']['prefill_phase_select']['#disabled'] = TRUE;
       }
     }
-  }    
-  
+  }
+
   if ($show_advanced) {
     // Only show these options if the Lingotek document hasn't yet been created.
     if (!$node->lingotek['document_id'] && class_exists('LingotekApi')) {
@@ -793,7 +812,6 @@ function lingotek_form_node_form_alter(&$form, $form_state, $form_id) {
       '#suffix' => '</div>',
     );
   }
-
 }
 
 /**
@@ -844,13 +862,20 @@ function lingotek_get_node_settings_form($form, &$form_state, $node = NULL) {
   drupal_add_css(drupal_get_path('module', 'lingotek') . '/style/form.css');
 
   $show_advanced = LingotekAccount::instance()->showAdvanced();
+  $enabled_languages = lingotek_get_target_locales(TRUE);
+  $node_language = Lingotek::convertDrupal2Lingotek($node->language);
 
   // Vertical Tab.
   // (When the Lingotek module is enabled, then show the translation tab unless
-  // the node is *not* managed by Lingotek *and* it is a node-based translation
-  // of a different (source) node.
-  if (lingotek_is_node_translation($node) && isset($node->translation_source->lingotek['profile']) && $node->translation_source->lingotek['profile'] === LingotekSync::PROFILE_DISABLED) {
-    return $form;
+  // the node is *not* managed by Lingotek or the language is *not* managed by
+  // Lingotek, *and* it is a node-based translation of a different (source) node.
+  if (lingotek_is_node_translation($node)) {
+    if (isset($node->translation_source->lingotek['profile']) && $node->translation_source->lingotek['profile'] === LingotekSync::PROFILE_DISABLED) {
+      return $form;
+    }
+    if (!in_array($node_language, $enabled_languages)) {
+      return $form;
+    }
   }
   $title = t('Translation Management');
 
@@ -868,7 +893,7 @@ function lingotek_get_node_settings_form($form, &$form_state, $node = NULL) {
     '#tree' => TRUE,
   );
 
-  if (lingotek_is_node_translation($node)) {
+  if (lingotek_is_node_translation($node) && in_array($node_language, $enabled_languages)) {
     $form['lingotek']['note'] = array(
       '#markup' => t('This is a target node for the language code: @lang. To change
         the Lingotek settings please edit the source node.', array('@lang' => $node->language)),
@@ -2093,6 +2118,13 @@ function lingotek_entity_delete($entity, $type) {
 function lingotek_form_alter(&$form, &$form_state, $form_id) {
   if (substr($form_id, -9) == 'node_form') {
 
+    global $language;
+    $enabled_languages = lingotek_get_target_locales(TRUE);
+    $lingotek_locale = Lingotek::convertDrupal2Lingotek($form_state['node']->language);
+    if (!in_array($lingotek_locale, $enabled_languages)) {
+      return;
+    }
+
     //disable the language field if the node is synced with lingotek
     if (isset($form['#entity']->nid)) {
       $document_id = lingotek_keystore('node', $form['#entity']->nid, 'document_id');
@@ -2101,19 +2133,24 @@ function lingotek_form_alter(&$form, &$form_state, $form_id) {
       }
     }
 
-    if (isset($form['#entity']->tnid) && $form['#entity']->tnid != 0 && $form['#entity']->nid != $form['#entity']->tnid) {
+    // Protect node-based translations from being edited directly in Drupal.
+    $source_nid = lingotek_is_node_translation($form_state['node']);
+    if (($source_nid) && lingotek_enabled_langcode($form_state['node']->language)) {
       $content_type = $form['type']['#value'];
       $lingotek_fields = variable_get('lingotek_enabled_fields');
-      foreach ($lingotek_fields['node'][$content_type] as $field) {
+      $enabled_fields = !empty($lingotek_fields['node'][$content_type]) ? $lingotek_fields['node'][$content_type] : NULL;
+      if (!$enabled_fields && lingotek_oneoff_translate($form_state['node'])) {
+        $enabled_fields = lingotek_get_translatable_fields_by_content_type('node', $content_type);
+      }
+      foreach ($enabled_fields as $field) {
         $form[$field]['#disabled'] = TRUE;
       }
+      $form['actions']['submit']['#disabled'] = TRUE;
 
-      $lingotek_locale = Lingotek::convertDrupal2Lingotek($form['#entity']->language);
-      $node = lingotek_node_load_default($form['#entity']->tnid);
-      $workbench = 'node/' . $node->nid . '/lingotekworkbench/' . $lingotek_locale;
+      $workbench = 'node/' . $source_nid . '/lingotekworkbench/' . $lingotek_locale;
 
       $message = t('Some fields are not editable because the translations are managed by lingotek.
-        To edit this content in the source language go to the ') . l(t('source node'), 'node/' . $form['#entity']->tnid . '/edit') . '.';
+        To edit this content in the source language go to the ') . l(t('source node'), 'node/' . $source_nid . '/edit') . '.';
 
       $link = l(t('Lingotek workbench'), $workbench, array('attributes' => array('target' => '_blank')));
 
diff --git a/profiles/commons/modules/contrib/lingotek/lingotek.util.inc b/profiles/commons/modules/contrib/lingotek/lingotek.util.inc
index 70f2cc6..d17ccd9 100644
--- a/profiles/commons/modules/contrib/lingotek/lingotek.util.inc
+++ b/profiles/commons/modules/contrib/lingotek/lingotek.util.inc
@@ -258,7 +258,7 @@ function lingotek_get_translatable_fields_by_content_type($entity_type, $type) {
   $translatable_field_types = lingotek_get_translatable_field_types();
   $desired_fields = array();
   foreach ($all_fields as $field_name => $field_info) {
-    if (in_array($field_info['body']['widget']['type'], $translatable_field_types)) {
+    if (in_array($field_info['widget']['type'], $translatable_field_types)) {
       $desired_fields[$field_name] = $field_name;
     }
   }
@@ -1877,14 +1877,25 @@ function lingotek_previously_managed_translations($entity_type, $entity_ids = NU
   return TRUE;
 }
 
+/**
+ * Return the translation source node ID, if it exists, FALSE otherwise
+ *
+ * @param object $node
+ * @return mixed translation source node ID or FALSE if not node translation
+ */
 function lingotek_is_node_translation($node = NULL) {
   // The case of creating a new node-based translation.
-  if (isset($_GET['translation']) && isset($_GET['target']) && ($source_item = menu_link_load($_GET['translation']))) {
-    return TRUE;
+  if (isset($_GET['translation']) && isset($_GET['target']) && (entity_load_single('node', (int) $_GET['translation']))) {
+    return $_GET['translation'];
+  }
+  // locate a translation source node ID, if available
+  $tnid = !empty($node->tnid) && $node->tnid !== $node->nid && $node->tnid !== 0 ? $node->tnid : NULL;
+  if (!$tnid) {
+    $tnid = !empty($node->translation_source->nid) && (empty($node->nid) || ($node->nid !== $node->translation_source->nid && $node->nid !== 0)) ? $node->translation_source->nid : NULL;
   }
   // The case of updating an existing node-based translation.
-  if ($node && isset($node->tnid) && $node->tnid !== '0' && $node->tnid !== $node->nid) {
-    return TRUE;
+  if ($tnid) {
+    return $tnid;
   }
   // Not a node-based translation.
   return FALSE;
@@ -1904,11 +1915,13 @@ function lingotek_managed_entity($entity_type, $entity) {
       ->condition('lem.entity_id', $id)
       ->condition('lem.entity_key', 'profile');
   $result = $query->execute()->fetchField();
-  if ($result === LingotekSync::PROFILE_DISABLED) {
-    return FALSE;
-  }
-  else {
-    return TRUE;
+  if ($result !== FALSE) {
+    if ($result === LingotekSync::PROFILE_DISABLED) {
+      return FALSE;
+    }
+    else {
+      return TRUE;
+    }
   }
   // Check the entity's bundle.
   return lingotek_enabled_bundle($entity_type, $bundle);
@@ -1929,3 +1942,11 @@ function lingotek_entity_extract_ids($entity_type, $entity) {
   return array($entity_id, $vid, $bundle_name);
 }
 
+function lingotek_enabled_langcode($langcode) {
+  $enabled_languages = lingotek_get_target_locales(TRUE);
+  $requested_language = Lingotek::convertDrupal2Lingotek($langcode);
+  if (in_array($requested_language, $enabled_languages)) {
+    return TRUE;
+  }
+  return FALSE;
+}
diff --git a/profiles/commons/modules/contrib/media/media.info b/profiles/commons/modules/contrib/media/media.info
index 68fc5b3..1934dea 100644
--- a/profiles/commons/modules/contrib/media/media.info
+++ b/profiles/commons/modules/contrib/media/media.info
@@ -25,9 +25,9 @@ configure = admin/config/media/browser
 version = 7.x-2.x-dev
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/modules/media_bulk_upload/media_bulk_upload.info b/profiles/commons/modules/contrib/media/modules/media_bulk_upload/media_bulk_upload.info
index 2e5b3a0..901f174 100644
--- a/profiles/commons/modules/contrib/media/modules/media_bulk_upload/media_bulk_upload.info
+++ b/profiles/commons/modules/contrib/media/modules/media_bulk_upload/media_bulk_upload.info
@@ -10,9 +10,9 @@ dependencies[] = plupload
 files[] = includes/MediaBrowserBulkUpload.inc
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/modules/media_internet/media_internet.info b/profiles/commons/modules/contrib/media/modules/media_internet/media_internet.info
index 6f28b39..588bd5d 100644
--- a/profiles/commons/modules/contrib/media/modules/media_internet/media_internet.info
+++ b/profiles/commons/modules/contrib/media/modules/media_internet/media_internet.info
@@ -12,9 +12,9 @@ files[] = includes/MediaInternetNoHandlerException.inc
 files[] = includes/MediaInternetValidationException.inc
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/modules/media_migrate_file_types/media_migrate_file_types.info b/profiles/commons/modules/contrib/media/modules/media_migrate_file_types/media_migrate_file_types.info
index 0b5045a..2dcb0fb 100644
--- a/profiles/commons/modules/contrib/media/modules/media_migrate_file_types/media_migrate_file_types.info
+++ b/profiles/commons/modules/contrib/media/modules/media_migrate_file_types/media_migrate_file_types.info
@@ -9,9 +9,9 @@ dependencies[] = media
 configure = admin/structure/file-types/upgrade
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/modules/media_wysiwyg/media_wysiwyg.info b/profiles/commons/modules/contrib/media/modules/media_wysiwyg/media_wysiwyg.info
index 49b53e6..8b84c7e 100644
--- a/profiles/commons/modules/contrib/media/modules/media_wysiwyg/media_wysiwyg.info
+++ b/profiles/commons/modules/contrib/media/modules/media_wysiwyg/media_wysiwyg.info
@@ -16,9 +16,9 @@ files[] = tests/media_wysiwyg.macro.test
 configure = admin/config/media/browser
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/modules/media_wysiwyg_view_mode/media_wysiwyg_view_mode.info b/profiles/commons/modules/contrib/media/modules/media_wysiwyg_view_mode/media_wysiwyg_view_mode.info
index 5cd7c64..e50b5b9 100644
--- a/profiles/commons/modules/contrib/media/modules/media_wysiwyg_view_mode/media_wysiwyg_view_mode.info
+++ b/profiles/commons/modules/contrib/media/modules/media_wysiwyg_view_mode/media_wysiwyg_view_mode.info
@@ -10,9 +10,9 @@ configure = admin/config/media/wysiwyg-view-mode
 files[] = media_wysiwyg_view_mode.test
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/modules/mediafield/mediafield.info b/profiles/commons/modules/contrib/media/modules/mediafield/mediafield.info
index f3570d7..701a123 100644
--- a/profiles/commons/modules/contrib/media/modules/mediafield/mediafield.info
+++ b/profiles/commons/modules/contrib/media/modules/mediafield/mediafield.info
@@ -5,9 +5,9 @@ core = 7.x
 dependencies[] = media
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/media/tests/media_module_test.info b/profiles/commons/modules/contrib/media/tests/media_module_test.info
index c1ebd43..eecfe6a 100644
--- a/profiles/commons/modules/contrib/media/tests/media_module_test.info
+++ b/profiles/commons/modules/contrib/media/tests/media_module_test.info
@@ -5,9 +5,9 @@ core = 7.x
 hidden = TRUE
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha3+79-dev"
 core = "7.x"
 project = "media"
-datestamp = "1399579144"
+datestamp = "1400787240"
 
diff --git a/profiles/commons/modules/contrib/message_subscribe/PATCHES.txt b/profiles/commons/modules/contrib/message_subscribe/PATCHES.txt
new file mode 100644
index 0000000..be4de40
--- /dev/null
+++ b/profiles/commons/modules/contrib/message_subscribe/PATCHES.txt
@@ -0,0 +1,4 @@
+The following patches have been applied to this project:
+- https://drupal.org/files/issues/group-context-1828184-53.patch
+
+This file was automatically generated by Drush Make (http://drupal.org/project/drush).
\ No newline at end of file
diff --git a/profiles/commons/modules/contrib/message_subscribe/message_subscribe_email/message_subscribe_email.module b/profiles/commons/modules/contrib/message_subscribe/message_subscribe_email/message_subscribe_email.module
index bfc85ec..9c3b30c 100644
--- a/profiles/commons/modules/contrib/message_subscribe/message_subscribe_email/message_subscribe_email.module
+++ b/profiles/commons/modules/contrib/message_subscribe/message_subscribe_email/message_subscribe_email.module
@@ -117,28 +117,36 @@ function message_subscribe_email_message_subscribe_get_subscribers_alter(&$uids,
     return;
   }
 
-  $flag_ids = array();
-  foreach ($flags as $flag) {
-    $flag_ids[] = $flag->fid;
-  }
+  foreach($values['context'] as $entity_type => $entity_ids) {
+    if (!$entity_ids) {
+      continue;
+    }
 
-  if (FLAG_API_VERSION == 2) {
-    $query = db_select('flag_content', 'f');
-  }
-  else {
-    $query = db_select('flagging', 'f');
-  }
+    $fids = array();
+    foreach ($flags as $flag) {
+      $fids[$flag->fid] = $flag->name;
+    }
 
-  $result = $query->fields('f', array('uid'))
-    ->condition('fid', $flag_ids, 'IN')
-    ->condition('uid', array_keys($uids), 'IN')
-    ->groupBy('uid')
-    ->execute()
-    ->fetchAll();
+    if (FLAG_API_VERSION == 2) {
+      $query = db_select('flag_content', 'f');
+    }
+    else {
+      $query = db_select('flagging', 'f');
+    }
 
-  foreach ($result as $row) {
-    // Add 'email' to the list of notifiers.
-    $uids[$row->uid]['notifiers']['email'] = 'email';
+    $result = $query->fields('f', array('uid'))
+      ->condition('content_type', $entity_type)
+      ->condition('content_id', $entity_ids, 'IN')
+      ->condition('fid', array_keys($fids), 'IN')
+      ->condition('uid', array_keys($uids), 'IN')
+      ->groupBy('uid')
+      ->execute()
+      ->fetchAll();
+
+    foreach ($result as $row) {
+      // Add 'email' to the list of notifiers.
+      $uids[$row->uid]['notifiers']['email'] = 'email';
+    }
   }
 }
 
diff --git a/profiles/commons/modules/contrib/oauthconnector/modules/oauth2/oauth2_common.info b/profiles/commons/modules/contrib/oauthconnector/modules/oauth2/oauth2_common.info
index 2c65061..949496c 100644
--- a/profiles/commons/modules/contrib/oauthconnector/modules/oauth2/oauth2_common.info
+++ b/profiles/commons/modules/contrib/oauthconnector/modules/oauth2/oauth2_common.info
@@ -7,9 +7,9 @@ files[] = lib/DrupalOAuth2Client.inc
 
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-beta2+0-dev"
 core = "7.x"
 project = "oauthconnector"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oauthconnector/oauthconnector.info b/profiles/commons/modules/contrib/oauthconnector/oauthconnector.info
index c68edc1..cbb0877 100644
--- a/profiles/commons/modules/contrib/oauthconnector/oauthconnector.info
+++ b/profiles/commons/modules/contrib/oauthconnector/oauthconnector.info
@@ -10,9 +10,9 @@ dependencies[] = http_client_oauth
 dependencies[] = ctools
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-beta2+0-dev"
 core = "7.x"
 project = "oauthconnector"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oembed/PATCHES.txt b/profiles/commons/modules/contrib/oembed/PATCHES.txt
new file mode 100644
index 0000000..21a9782
--- /dev/null
+++ b/profiles/commons/modules/contrib/oembed/PATCHES.txt
@@ -0,0 +1,4 @@
+The following patches have been applied to this project:
+- https://drupal.org/files/issues/remove-media-submodule-2269745-2.patch
+
+This file was automatically generated by Drush Make (http://drupal.org/project/drush).
\ No newline at end of file
diff --git a/profiles/commons/modules/contrib/oembed/deprecated/oembedcore/oembedcore.info b/profiles/commons/modules/contrib/oembed/deprecated/oembedcore/oembedcore.info
index 8633770..c4723a8 100644
--- a/profiles/commons/modules/contrib/oembed/deprecated/oembedcore/oembedcore.info
+++ b/profiles/commons/modules/contrib/oembed/deprecated/oembedcore/oembedcore.info
@@ -12,9 +12,9 @@ files[] = MediaInternetOEmbedHandler.inc
 hidden = TRUE
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-rc2+15-dev"
 core = "7.x"
 project = "oembed"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oembed/deprecated/oembedfield/oembedfield.info b/profiles/commons/modules/contrib/oembed/deprecated/oembedfield/oembedfield.info
index 67b3960..6b21e94 100644
--- a/profiles/commons/modules/contrib/oembed/deprecated/oembedfield/oembedfield.info
+++ b/profiles/commons/modules/contrib/oembed/deprecated/oembedfield/oembedfield.info
@@ -6,9 +6,9 @@ hidden = TRUE
 dependencies[] = oembedcore
 dependencies[] = link
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-rc2+15-dev"
 core = "7.x"
 project = "oembed"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oembed/oembed.info b/profiles/commons/modules/contrib/oembed/oembed.info
index f6abb7b..a5c556e 100644
--- a/profiles/commons/modules/contrib/oembed/oembed.info
+++ b/profiles/commons/modules/contrib/oembed/oembed.info
@@ -11,9 +11,9 @@ files[] = OEmbedStreamWrapper.inc
 files[] = MediaInternetOEmbedHandler.inc
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-rc2+15-dev"
 core = "7.x"
 project = "oembed"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oembed/oembedembedly/oembedembedly.info b/profiles/commons/modules/contrib/oembed/oembedembedly/oembedembedly.info
index ecc99dd..9409b82 100644
--- a/profiles/commons/modules/contrib/oembed/oembedembedly/oembedembedly.info
+++ b/profiles/commons/modules/contrib/oembed/oembedembedly/oembedembedly.info
@@ -5,9 +5,9 @@ core = 7.x
 dependencies[] = oembed
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-rc2+15-dev"
 core = "7.x"
 project = "oembed"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oembed/oembedprovider/oembedprovider.info b/profiles/commons/modules/contrib/oembed/oembedprovider/oembedprovider.info
index 92bc3bc..d1b70c9 100644
--- a/profiles/commons/modules/contrib/oembed/oembedprovider/oembedprovider.info
+++ b/profiles/commons/modules/contrib/oembed/oembedprovider/oembedprovider.info
@@ -8,9 +8,9 @@ files[] = oembedprovider.module
 files[] = oembedprovider.test
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-rc2+15-dev"
 core = "7.x"
 project = "oembed"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/oembed/oembedprovider_embed/oembedprovider_embed.info b/profiles/commons/modules/contrib/oembed/oembedprovider_embed/oembedprovider_embed.info
index ba5cb2b..fb3a86d 100644
--- a/profiles/commons/modules/contrib/oembed/oembedprovider_embed/oembedprovider_embed.info
+++ b/profiles/commons/modules/contrib/oembed/oembedprovider_embed/oembedprovider_embed.info
@@ -8,9 +8,9 @@ dependencies[] = oembed
 hidden = TRUE
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.0-rc2+15-dev"
 core = "7.x"
 project = "oembed"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/panels/i18n_panels/i18n_panels.info b/profiles/commons/modules/contrib/panels/i18n_panels/i18n_panels.info
index bb8b89f..2f0a4ac 100644
--- a/profiles/commons/modules/contrib/panels/i18n_panels/i18n_panels.info
+++ b/profiles/commons/modules/contrib/panels/i18n_panels/i18n_panels.info
@@ -8,9 +8,9 @@ package = Multilingual - Internationalization
 core = 7.x
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.4+2-dev"
 core = "7.x"
 project = "panels"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/panels/panels.info b/profiles/commons/modules/contrib/panels/panels.info
index e5bee5f..a78bf8a 100644
--- a/profiles/commons/modules/contrib/panels/panels.info
+++ b/profiles/commons/modules/contrib/panels/panels.info
@@ -11,9 +11,9 @@ files[] = includes/plugins.inc
 files[] = plugins/views/panels_views_plugin_row_fields.inc
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.4+2-dev"
 core = "7.x"
 project = "panels"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/panels/panels_ipe/panels_ipe.info b/profiles/commons/modules/contrib/panels/panels_ipe/panels_ipe.info
index 8a7eabc..2bf7e4d 100644
--- a/profiles/commons/modules/contrib/panels/panels_ipe/panels_ipe.info
+++ b/profiles/commons/modules/contrib/panels/panels_ipe/panels_ipe.info
@@ -7,9 +7,9 @@ configure = admin/structure/panels
 files[] = panels_ipe.module
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.4+2-dev"
 core = "7.x"
 project = "panels"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/panels/panels_mini/panels_mini.info b/profiles/commons/modules/contrib/panels/panels_mini/panels_mini.info
index ab97971..2e8d3b6 100644
--- a/profiles/commons/modules/contrib/panels/panels_mini/panels_mini.info
+++ b/profiles/commons/modules/contrib/panels/panels_mini/panels_mini.info
@@ -5,9 +5,9 @@ dependencies[] = panels
 core = 7.x
 files[] = plugins/export_ui/panels_mini_ui.class.php
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.4+2-dev"
 core = "7.x"
 project = "panels"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/panels/panels_node/panels_node.info b/profiles/commons/modules/contrib/panels/panels_node/panels_node.info
index 9575e6b..07f555b 100644
--- a/profiles/commons/modules/contrib/panels/panels_node/panels_node.info
+++ b/profiles/commons/modules/contrib/panels/panels_node/panels_node.info
@@ -7,9 +7,9 @@ core = 7.x
 files[] = panels_node.module
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.4+2-dev"
 core = "7.x"
 project = "panels"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/picture/flexslider_picture/flexslider_picture.info b/profiles/commons/modules/contrib/picture/flexslider_picture/flexslider_picture.info
index 5d95740..fa73ef3 100644
--- a/profiles/commons/modules/contrib/picture/flexslider_picture/flexslider_picture.info
+++ b/profiles/commons/modules/contrib/picture/flexslider_picture/flexslider_picture.info
@@ -8,9 +8,9 @@ dependencies[] = flexslider (2.x)
 dependencies[] = flexslider_fields (2.x)
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.2+6-dev"
 core = "7.x"
 project = "picture"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/picture/picture.info b/profiles/commons/modules/contrib/picture/picture.info
index 437841d..97f9dfc 100644
--- a/profiles/commons/modules/contrib/picture/picture.info
+++ b/profiles/commons/modules/contrib/picture/picture.info
@@ -9,9 +9,9 @@ package = Picture
 stylesheets[all][] = picture_wysiwyg.css
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-1.2+6-dev"
 core = "7.x"
 project = "picture"
-datestamp = "1399579141"
+datestamp = "1400787238"
 
diff --git a/profiles/commons/modules/contrib/strongarm/strongarm.info b/profiles/commons/modules/contrib/strongarm/strongarm.info
index 43c87ea..49273e5 100644
--- a/profiles/commons/modules/contrib/strongarm/strongarm.info
+++ b/profiles/commons/modules/contrib/strongarm/strongarm.info
@@ -8,9 +8,9 @@ files[] = strongarm.install
 files[] = strongarm.module
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0+2-dev"
 core = "7.x"
 project = "strongarm"
-datestamp = "1399579138"
+datestamp = "1400787235"
 
diff --git a/profiles/commons/modules/contrib/views/LICENSE.txt b/profiles/commons/modules/contrib/views/LICENSE.txt
old mode 100644
new mode 100755
diff --git a/profiles/commons/modules/contrib/views/PATCHES.txt b/profiles/commons/modules/contrib/views/PATCHES.txt
index 0f47a0e..8dd4043 100644
--- a/profiles/commons/modules/contrib/views/PATCHES.txt
+++ b/profiles/commons/modules/contrib/views/PATCHES.txt
@@ -1,4 +1,4 @@
 The following patches have been applied to this project:
-- https://drupal.org/files/issues/2204257-views-content-access-filter-core-depends-on-core-patch.patch
+- https://drupal.org/files/issues/views-content_access_filter_per_core_performance-2204257-4_0.patch
 
 This file was automatically generated by Drush Make (http://drupal.org/project/drush).
\ No newline at end of file
diff --git a/profiles/commons/modules/contrib/views/handlers/views_handler_area_messages.inc b/profiles/commons/modules/contrib/views/handlers/views_handler_area_messages.inc
new file mode 100644
index 0000000..eb1e22a
--- /dev/null
+++ b/profiles/commons/modules/contrib/views/handlers/views_handler_area_messages.inc
@@ -0,0 +1,34 @@
+<?php
+
+/**
+ * @file
+ * Contains views_handler_area_messages.
+ */
+
+/**
+ * Provides an area for messages.
+ */
+class views_handler_area_messages extends views_handler_area {
+
+  /**
+   * {@inheritdoc}
+   */
+  public function option_definition() {
+    $options = parent::option_definition();
+    // Set the default to TRUE so it shows on empty pages by default.
+    $options['empty']['default'] = TRUE;
+    return $options;
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  public function render($empty = FALSE) {
+    $return = '';
+    if (!$empty || !empty($this->options['empty'])) {
+      $return = theme('status_messages');
+    }
+    return $return;
+  }
+
+}
diff --git a/profiles/commons/modules/contrib/views/handlers/views_handler_field_date.inc b/profiles/commons/modules/contrib/views/handlers/views_handler_field_date.inc
index 8517f0b..f2c6371 100644
--- a/profiles/commons/modules/contrib/views/handlers/views_handler_field_date.inc
+++ b/profiles/commons/modules/contrib/views/handlers/views_handler_field_date.inc
@@ -16,6 +16,8 @@ class views_handler_field_date extends views_handler_field {
 
     $options['date_format'] = array('default' => 'small');
     $options['custom_date_format'] = array('default' => '');
+    $options['second_date_format_custom'] = array('default' => '');
+    $options['second_date_format'] = array('default' => 'small');
     $options['timezone'] = array('default' => '');
 
     return $options;
@@ -36,6 +38,7 @@ class views_handler_field_date extends views_handler_field {
         'custom' => t('Custom'),
         'raw time ago' => t('Time ago'),
         'time ago' => t('Time ago (with "ago" appended)'),
+        'today time ago' => t('Time ago (with "ago" appended) for today\'s date, but not for other dates'),
         'raw time hence' => t('Time hence'),
         'time hence' => t('Time hence (with "hence" appended)'),
         'raw time span' => t('Time span (future dates have "-" prepended)'),
@@ -49,8 +52,39 @@ class views_handler_field_date extends views_handler_field {
       '#title' => t('Custom date format'),
       '#description' => t('If "Custom", see the <a href="@url" target="_blank">PHP manual</a> for date formats. Otherwise, enter the number of different time units to display, which defaults to 2.', array('@url' => 'http://php.net/manual/function.date.php')),
       '#default_value' => isset($this->options['custom_date_format']) ? $this->options['custom_date_format'] : '',
-      '#dependency' => array('edit-options-date-format' => array('custom', 'raw time ago', 'time ago', 'raw time hence', 'time hence', 'raw time span', 'time span', 'raw time span', 'inverse time span', 'time span')),
+      '#dependency' => array('edit-options-date-format' => array('custom', 'raw time ago', 'time ago', 'today time ago', 'raw time hence', 'time hence', 'raw time span', 'time span', 'raw time span', 'inverse time span', 'time span')),
     );
+    $form['second_date_format'] = array(
+     '#type' => 'select',
+     '#title' => t('Second date format'),
+     '#options' => $date_formats + array(
+       'custom' => t('Custom'),
+     ),
+     '#description' => t('The date format which will be used for rendering dates other than today.'),
+     '#default_value' => isset($this->options['second_date_format']) ? $this->options['second_date_format'] : 'small',
+     '#dependency' => array('edit-options-date-format' => array('today time ago')),
+   );
+   $form['second_date_format_custom'] = array(
+     '#type' => 'textfield',
+     '#title' => t('Custom date format of second date'),
+     '#description' => t('If "Custom" is selected in "Second date format", see the <a href="@url" target="_blank">PHP manual</a> for date formats. Otherwise, enter the number of different time units to display, which defaults to 2.', array('@url' => 'http://php.net/manual/function.date.php')),
+     '#default_value' => isset($this->options['second_date_format_custom']) ? $this->options['second_date_format_custom'] : '',
+     // We have to use states instead of ctools dependency because dependency
+     // doesn't handle multiple conditions.
+     '#states' => array(
+       'visible' => array(
+         '#edit-options-date-format' => array('value' => 'today time ago'),
+         '#edit-options-second-date-format' => array('value' => 'custom'),
+       ),
+     ),
+     // We have to use ctools dependency too because states doesn't add the
+     // correct left margin to the element's wrapper.
+     '#dependency' => array(
+       // This condition is handled by form API's states.
+//        'edit-options-date-format' => array('today time ago'),
+       'edit-options-second-date-format' => array('custom'),
+     ),
+   );
     $form['timezone'] = array(
       '#type' => 'select',
       '#title' => t('Timezone'),
@@ -66,7 +100,7 @@ class views_handler_field_date extends views_handler_field {
   function render($values) {
     $value = $this->get_value($values);
     $format = $this->options['date_format'];
-    if (in_array($format, array('custom', 'raw time ago', 'time ago', 'raw time hence', 'time hence', 'raw time span', 'time span', 'raw time span', 'inverse time span', 'time span'))) {
+    if (in_array($format, array('custom', 'raw time ago', 'time ago', 'today time ago', 'raw time hence', 'time hence', 'raw time span', 'time span', 'raw time span', 'inverse time span', 'time span'))) {
       $custom_format = $this->options['custom_date_format'];
     }
 
@@ -78,6 +112,21 @@ class views_handler_field_date extends views_handler_field {
           return format_interval($time_diff, is_numeric($custom_format) ? $custom_format : 2);
         case 'time ago':
           return t('%time ago', array('%time' => format_interval($time_diff, is_numeric($custom_format) ? $custom_format : 2)));
+        case 'today time ago':
+          $second_format = $this->options['second_date_format'];
+          $second_custom_format = $this->options['second_date_format_custom'];
+          if (format_date(REQUEST_TIME, 'custom', 'Y-m-d', $timezone) == format_date($value, 'custom', 'Y-m-d', $timezone)) {
+            return t('%time ago', array('%time' => format_interval($time_diff, is_numeric($custom_format) ? $custom_format : 2)));
+          }
+          elseif ($second_format == 'custom') {
+            if ($second_custom_format == 'r') {
+              return format_date($value, $second_format, $second_custom_format, $timezone, 'en');
+            }
+            return format_date($value, $second_format, $second_custom_format, $timezone);
+          }
+          else {
+            return format_date($value, $this->options['second_date_format'], '', $timezone);
+          }
         case 'raw time hence':
           return format_interval(-$time_diff, is_numeric($custom_format) ? $custom_format : 2);
         case 'time hence':
diff --git a/profiles/commons/modules/contrib/views/handlers/views_handler_filter.inc b/profiles/commons/modules/contrib/views/handlers/views_handler_filter.inc
index f5db70f..8583605 100644
--- a/profiles/commons/modules/contrib/views/handlers/views_handler_filter.inc
+++ b/profiles/commons/modules/contrib/views/handlers/views_handler_filter.inc
@@ -91,7 +91,11 @@ class views_handler_filter extends views_handler {
     }
 
     if ($this->multiple_exposed_input()) {
-      $this->group_info = array_filter($options['group_info']['default_group_multiple']);
+      $this->group_info = NULL;
+      if (!empty($options['group_info']['default_group_multiple'])) {
+        $this->group_info = array_filter($options['group_info']['default_group_multiple']);
+      }
+
       $this->options['expose']['multiple'] = TRUE;
     }
 
@@ -116,6 +120,7 @@ class views_handler_filter extends views_handler {
         'label' => array('default' => '', 'translatable' => TRUE),
         'description' => array('default' => '', 'translatable' => TRUE),
         'use_operator' => array('default' => FALSE, 'bool' => TRUE),
+        'operator_label' => array('default' => '', 'translatable' => TRUE),
         'operator' => array('default' => ''),
         'identifier' => array('default' => ''),
         'required' => array('default' => FALSE, 'bool' => TRUE),
@@ -510,6 +515,16 @@ class views_handler_filter extends views_handler {
         '#description' => t('Allow the user to choose the operator.'),
         '#default_value' => !empty($this->options['expose']['use_operator']),
       );
+      $form['expose']['operator_label'] = array(
+        '#type' => 'textfield',
+        '#default_value' => $this->options['expose']['operator_label'],
+        '#title' => t('Operator label'),
+        '#size' => 40,
+        '#description' => t('This will appear before your operator select field.'),
+        '#dependency' => array(
+          'edit-options-expose-use-operator' => array(1)
+        ),
+      );
       $form['expose']['operator_id'] = array(
         '#type' => 'textfield',
         '#default_value' => $this->options['expose']['operator_id'],
@@ -754,10 +769,8 @@ class views_handler_filter extends views_handler {
       $operator = $this->options['expose']['operator_id'];
       $this->operator_form($form, $form_state);
       $form[$operator] = $form['operator'];
-
-      if (isset($form[$operator]['#title'])) {
-        unset($form[$operator]['#title']);
-      }
+      $form[$operator]['#title'] =  $this->options['expose']['operator_label'];
+      $form[$operator]['#title_display'] = 'invisible';
 
       $this->exposed_translate($form[$operator], 'operator');
 
diff --git a/profiles/commons/modules/contrib/views/handlers/views_handler_filter_boolean_operator_string.inc b/profiles/commons/modules/contrib/views/handlers/views_handler_filter_boolean_operator_string.inc
index b49dde9..080ac50 100644
--- a/profiles/commons/modules/contrib/views/handlers/views_handler_filter_boolean_operator_string.inc
+++ b/profiles/commons/modules/contrib/views/handlers/views_handler_filter_boolean_operator_string.inc
@@ -30,6 +30,6 @@ class views_handler_filter_boolean_operator_string extends views_handler_filter_
     else {
       $where .= "<> ''";
     }
-    $this->query->add_where($this->options['group'], $where);
+    $this->query->add_where_expression($this->options['group'], $where);
   }
 }
diff --git a/profiles/commons/modules/contrib/views/handlers/views_handler_filter_fields_compare.inc b/profiles/commons/modules/contrib/views/handlers/views_handler_filter_fields_compare.inc
new file mode 100644
index 0000000..fe94ce7
--- /dev/null
+++ b/profiles/commons/modules/contrib/views/handlers/views_handler_filter_fields_compare.inc
@@ -0,0 +1,142 @@
+<?php
+
+/**
+ * @file
+ * Definition of views_handler_filter_fields_compare.
+ */
+
+/**
+ * A handler to filter a view using fields comparison.
+ *
+ * @ingroup views_filter_handlers
+ */
+
+class views_handler_filter_fields_compare extends views_handler_filter {
+
+  function can_expose() {
+    return FALSE;
+  }
+
+  /**
+   * Overrides views_handler_filter#option_definition().
+   */
+  function option_definition() {
+    $options = parent::option_definition();
+
+    $options['left_field'] = $options['right_field'] = array('default' => '');
+
+    return $options;
+  }
+
+  /**
+   * Provide a list of all operators.
+   */
+  function fields_operator_options() {
+    return array(
+      '<' => t('Is less than'),
+      '<=' => t('Is less than or equal to'),
+      '=' => t('Is equal to'),
+      '<>' =>  t('Is not equal to'),
+      '>=' => t('Is greater than or equal to'),
+      '>' => t('Is greater than')
+    );
+  }
+
+  /**
+   * Provide a list of available fields.
+   */
+  function field_options() {
+    $options = array();
+
+    $field_handlers = $this->view->display_handler->get_handlers('field');
+    foreach ($field_handlers as $field => $handler) {
+      if ($handler->table != 'views') {
+        $options[$field] = $handler->ui_name();
+      }
+    }
+
+    return $options;
+  }
+
+  /**
+   * Overrides views_handler_filter#options_form().
+   */
+  function options_form(&$form, &$form_state) {
+    parent::options_form($form, $form_state);
+
+    $field_options = $this->field_options();
+
+    $form['left_field'] = array(
+      '#type' => 'select',
+      '#title' => t('Left field'),
+      '#default_value' => $this->options['left_field'],
+      '#options' => $field_options,
+      '#weight' => -3,
+    );
+
+    $form['operator'] = array(
+      '#type' => 'select',
+      '#title' => t('Operator'),
+      '#default_value' => $this->options['operator'],
+      '#options' => $this->fields_operator_options(),
+      '#weight' => -2,
+    );
+
+    $form['right_field'] = array(
+      '#type' => 'select',
+      '#title' => t('Right field'),
+      '#default_value' => $this->options['right_field'],
+      '#options' => $field_options,
+      '#weight' => -1,
+    );
+
+  }
+
+  /**
+   * Overrides views_handler_filter#query().
+   *
+   * Build extra condition from existing fields (from existing joins).
+   */
+  function query() {
+    $left = $this->options['left_field'];
+    $right = $this->options['right_field'];
+
+    // Get all existing field handlers.
+    $field_handlers = $this->view->display_handler->get_handlers('field');
+
+    // Make sure the selected fields still exist.
+    if (!isset($field_handlers[$left], $field_handlers[$right])) {
+      return;
+    }
+
+    // Get the left table and field.
+    $left_handler = $field_handlers[$left];
+    $left_handler->set_relationship();
+    $left_table_alias = $this->query->ensure_table($left_handler->table, $left_handler->relationship);
+
+    // Get the left table and field.
+    $right_handler = $field_handlers[$right];
+    $right_handler->set_relationship();
+    $right_table_alias = $this->query->ensure_table($right_handler->table, $right_handler->relationship);
+
+    // Build piece of SQL.
+    $snippet =
+      $left_table_alias . '.' . $left_handler->real_field .
+      ' ' . $this->options['operator'] . ' ' .
+      $right_table_alias . '.' . $right_handler->real_field;
+
+    $this->query->add_where_expression($this->options['group'], $snippet);
+  }
+
+  /**
+   * Overrides views_handler_filter#admin_summary().
+   */
+  function admin_summary() {
+    return check_plain(
+      $this->options['left_field'] . ' ' .
+      $this->options['operator'] . ' ' .
+      $this->options['right_field']
+    );
+  }
+
+}
diff --git a/profiles/commons/modules/contrib/views/includes/admin.inc b/profiles/commons/modules/contrib/views/includes/admin.inc
index 160a61a..1f247bd 100644
--- a/profiles/commons/modules/contrib/views/includes/admin.inc
+++ b/profiles/commons/modules/contrib/views/includes/admin.inc
@@ -408,7 +408,7 @@ function views_ui_add_form($form, &$form_state) {
  */
 function views_element_validate_integer($element, &$form_state) {
   $value = $element['#value'];
-  if ($value !== '' && (!is_numeric($value) || intval($value) != $value)) {
+  if ($value !== '' && (!is_numeric($value) || intval($value) != $value || abs($value) != $value)) {
     form_error($element, t('%name must be a positive integer.', array('%name' => $element['#title'])));
   }
 }
diff --git a/profiles/commons/modules/contrib/views/includes/cache.inc b/profiles/commons/modules/contrib/views/includes/cache.inc
index 59c1733..b74752f 100644
--- a/profiles/commons/modules/contrib/views/includes/cache.inc
+++ b/profiles/commons/modules/contrib/views/includes/cache.inc
@@ -23,16 +23,31 @@ function _views_fetch_data($table = NULL, $move = TRUE, $reset = FALSE) {
   if ($table) {
     if (!isset($cache[$table])) {
       $cid = 'views_data:' . $table;
-      $data = views_cache_get($cid, TRUE);
-      if (!empty($data->data)) {
+      if ($data = views_cache_get($cid, TRUE)) {
         $cache[$table] = $data->data;
       }
       else {
         if (!$fully_loaded) {
-          // No cache entry, rebuild.
-          $cache = _views_fetch_data_build();
+          // Try to load the full views cache.
+          if ($data = views_cache_get('views_data', TRUE)) {
+            $cache = $data->data;
+          }
+          else {
+            // No cache entry, rebuild.
+            $cache = _views_fetch_data_build();
+          }
           $fully_loaded = TRUE;
         }
+
+        // Write back a cache for this table.
+        if (isset($cache[$table])) {
+          views_cache_set($cid, $cache[$table], TRUE);
+        }
+        else {
+          // If there is still no information about that table, it is missing.
+          // Write an empty array to avoid repeated rebuilds.
+          views_cache_set($cid, array(), TRUE);
+        }
       }
     }
     if (isset($cache[$table])) {
@@ -82,11 +97,6 @@ function _views_fetch_data_build() {
 
   // Keep a record with all data.
   views_cache_set('views_data', $cache, TRUE);
-  // Save data in seperate cache entries.
-  foreach ($cache as $key => $data) {
-    $cid = 'views_data:' . $key;
-    views_cache_set($cid, $data, TRUE);
-  }
   return $cache;
 }
 
diff --git a/profiles/commons/modules/contrib/views/includes/handlers.inc b/profiles/commons/modules/contrib/views/includes/handlers.inc
index 2a33d5d..4346133 100644
--- a/profiles/commons/modules/contrib/views/includes/handlers.inc
+++ b/profiles/commons/modules/contrib/views/includes/handlers.inc
@@ -1581,7 +1581,7 @@ class views_join {
             // With an array of values, we need multiple placeholders and the
             // 'IN' operator is implicit.
             foreach ($info['value'] as $value) {
-              $placeholder_i = ':views_join_condition_' . $select_query->nextPlaceholder();
+              $placeholder_i = $view_query->placeholder('views_join_condition_');
               $arguments[$placeholder_i] = $value;
             }
 
@@ -1591,10 +1591,9 @@ class views_join {
           else {
             // With a single value, the '=' operator is implicit.
             $operator = !empty($info['operator']) ? $info['operator'] : '=';
-            $placeholder = ':views_join_condition_' . $select_query->nextPlaceholder();
+            $placeholder = $view_query->placeholder('views_join_condition_');
             $arguments[$placeholder] = $info['value'];
           }
-
           $extras[] = "$join_table$info[field] $operator $placeholder";
         }
 
diff --git a/profiles/commons/modules/contrib/views/includes/view.inc b/profiles/commons/modules/contrib/views/includes/view.inc
index d8c0c1f..d082a0b 100644
--- a/profiles/commons/modules/contrib/views/includes/view.inc
+++ b/profiles/commons/modules/contrib/views/includes/view.inc
@@ -756,7 +756,7 @@ class view extends views_db_object {
    */
   function _init_handler($key, $info) {
     // Load the requested items from the display onto the object.
-    $this->$key = $this->display_handler->get_handlers($key);
+    $this->$key = &$this->display_handler->get_handlers($key);
 
     // This reference deals with difficult PHP indirection.
     $handlers = &$this->$key;
diff --git a/profiles/commons/modules/contrib/views/js/ajax_view.js b/profiles/commons/modules/contrib/views/js/ajax_view.js
index e3bc821..780691c 100644
--- a/profiles/commons/modules/contrib/views/js/ajax_view.js
+++ b/profiles/commons/modules/contrib/views/js/ajax_view.js
@@ -66,6 +66,11 @@ Drupal.views.ajaxView = function(settings) {
     // to a given element.
     .filter(jQuery.proxy(this.filterNestedViews, this))
     .once(jQuery.proxy(this.attachPagerAjax, this));
+
+  // Add a trigger to update this view specifically.
+  var self_settings = this.element_settings;
+  self_settings.event = 'RefreshView';
+  this.refreshViewAjax = new Drupal.ajax(this.selector, this.$view, self_settings);
 };
 
 Drupal.views.ajaxView.prototype.attachExposedFormAjax = function() {
diff --git a/profiles/commons/modules/contrib/views/modules/field/views_handler_field_field.inc b/profiles/commons/modules/contrib/views/modules/field/views_handler_field_field.inc
index b50a0ae..a91e13a 100644
--- a/profiles/commons/modules/contrib/views/modules/field/views_handler_field_field.inc
+++ b/profiles/commons/modules/contrib/views/modules/field/views_handler_field_field.inc
@@ -820,7 +820,10 @@ class views_handler_field_field extends views_handler_field {
    * Return an array of items for the field.
    */
   function set_items($values, $row_id) {
-    if (empty($values->_field_data[$this->field_alias]) || empty($values->_field_data[$this->field_alias]['entity'])) {
+    // In some cases the instance on the entity might be easy, see
+    // https://drupal.org/node/1161708 and https://drupal.org/node/1461536 for
+    // more information.
+    if (empty($values->_field_data[$this->field_alias]) || empty($values->_field_data[$this->field_alias]['entity']) || !isset($values->_field_data[$this->field_alias]['entity']->{$this->definition['field_name']})) {
       return array();
     }
 
diff --git a/profiles/commons/modules/contrib/views/modules/node/views_handler_filter_node_access.inc b/profiles/commons/modules/contrib/views/modules/node/views_handler_filter_node_access.inc
index 742e345..f27582c 100644
--- a/profiles/commons/modules/contrib/views/modules/node/views_handler_filter_node_access.inc
+++ b/profiles/commons/modules/contrib/views/modules/node/views_handler_filter_node_access.inc
@@ -23,7 +23,7 @@ class views_handler_filter_node_access extends views_handler_filter {
   function query() {
     if (!user_access('administer nodes') && module_implements('node_grants')) {
       $table = $this->ensure_my_table();
-      $grants = static::buildGrantsQueryCondition(node_access_grants('view'));
+      $grants = node_add_node_grants_to_query(node_access_grants('view'));
 
       $this->query->add_where('AND', $grants);
       $this->query->add_where('AND', $table . '.grant_view', 1, '>=');
diff --git a/profiles/commons/modules/contrib/views/modules/profile/views_handler_field_profile_date.inc b/profiles/commons/modules/contrib/views/modules/profile/views_handler_field_profile_date.inc
index 2d9fe96..c2cf691 100644
--- a/profiles/commons/modules/contrib/views/modules/profile/views_handler_field_profile_date.inc
+++ b/profiles/commons/modules/contrib/views/modules/profile/views_handler_field_profile_date.inc
@@ -51,20 +51,21 @@ class views_handler_field_profile_date extends views_handler_field_date {
 
     // But we *can* deal with non-year stuff:
     $date = gmmktime(0, 0, 0, $value['month'], $value['day'], $value['year']);
+
     $replace = array(
       // day
       'd' => sprintf('%02d', $value['day']),
       'D' => NULL,
       'l' => NULL,
       'N' => NULL,
-      'S' => date('S', $date),
+      'S' => gmdate('S', $date),
       'w' => NULL,
       'j' => $value['day'],
       // month
-      'F' => date('F', $date),
+      'F' => gmdate('F', $date),
       'm' => sprintf('%02d', $value['month']),
-      'M' => date('M', $date),
-      'n' => date('n', $date),
+      'M' => gmdate('M', $date),
+      'n' => gmdate('n', $date),
 
       'Y' => $value['year'],
       'y' => substr($value['year'], 2, 2),
diff --git a/profiles/commons/modules/contrib/views/modules/system/views_handler_field_file_extension.inc b/profiles/commons/modules/contrib/views/modules/system/views_handler_field_file_extension.inc
index 6f9a03f..b543d8a 100644
--- a/profiles/commons/modules/contrib/views/modules/system/views_handler_field_file_extension.inc
+++ b/profiles/commons/modules/contrib/views/modules/system/views_handler_field_file_extension.inc
@@ -10,10 +10,40 @@
  * @ingroup views_field_handlers
  */
 class views_handler_field_file_extension extends views_handler_field {
+  public function option_definition() {
+    $options = parent::option_definition();
+    $options['extension_detect_tar'] = array('default' => FALSE, 'bool' => TRUE);
+    return $options;
+  }
+
+  public function options_form(&$form, &$form_state) {
+    parent::options_form($form, $form_state);
+    $form['extension_detect_tar'] = array(
+      '#type' => 'checkbox',
+      '#title' => t('Detect if tar is part of the extension'),
+      '#description' => t("See if the previous extension is '.tar' and if so, add that, so we see 'tar.gz' or 'tar.bz2' instead of just 'gz'."),
+      '#default_value' => $this->options['extension_detect_tar'],
+    );
+  }
+
   function render($values) {
     $value = $this->get_value($values);
-    if (preg_match('/\.([^\.]+)$/', $value, $match)) {
-      return $this->sanitize_value($match[1]);
+    if (!$this->options['extension_detect_tar']) {
+      if (preg_match('/\.([^\.]+)$/', $value, $match)) {
+        return $this->sanitize_value($match[1]);
+      }
+    }
+    else {
+      $file_parts = explode('.', basename($value));
+      // If there is an extension.
+      if (count($file_parts) > 1) {
+        $extension = array_pop($file_parts);
+        $last_part_in_name = array_pop($file_parts);
+        if ($last_part_in_name === 'tar') {
+          $extension = 'tar.' . $extension;
+        }
+        return $this->sanitize_value($extension);
+      }
     }
   }
 }
diff --git a/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_filter_term_node_tid.inc b/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_filter_term_node_tid.inc
index 7eb868f..8938ca9 100644
--- a/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_filter_term_node_tid.inc
+++ b/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_filter_term_node_tid.inc
@@ -98,15 +98,12 @@ class views_handler_filter_term_node_tid extends views_handler_filter_many_to_on
     if ($this->options['type'] == 'textfield') {
       $default = '';
       if ($this->value) {
-        $result = db_select('taxonomy_term_data', 'td')
-          ->fields('td')
-          ->condition('td.tid', $this->value)
-          ->execute();
-        foreach ($result as $term) {
+        $result = taxonomy_term_load_multiple($this->value);
+        foreach ($result as $entity_term) {
           if ($default) {
             $default .= ', ';
           }
-          $default .= $term->name;
+          $default .= entity_label('taxonomy_term', $entity_term);
         }
       }
 
@@ -122,13 +119,14 @@ class views_handler_filter_term_node_tid extends views_handler_filter_many_to_on
     }
     else {
       if (!empty($this->options['hierarchy']) && $this->options['limit']) {
-        $tree = taxonomy_get_tree($vocabulary->vid);
+        $tree = taxonomy_get_tree($vocabulary->vid, 0, NULL, TRUE);
         $options = array();
 
         if ($tree) {
+          // Translation system needs full entity objects, so we have access to label.
           foreach ($tree as $term) {
             $choice = new stdClass();
-            $choice->option = array($term->tid => str_repeat('-', $term->depth) . $term->name);
+            $choice->option = array($term->tid => str_repeat('-', $term->depth) . entity_label('taxonomy_term', $term));
             $options[] = $choice;
           }
         }
@@ -147,8 +145,14 @@ class views_handler_filter_term_node_tid extends views_handler_filter_many_to_on
           $query->condition('tv.machine_name', $vocabulary->machine_name);
         }
         $result = $query->execute();
+
+        $tids = array();
         foreach ($result as $term) {
-          $options[$term->tid] = $term->name;
+          $tids[] = $term->tid;
+        }
+        $entities = taxonomy_term_load_multiple($tids);
+        foreach ($entities as $entity_term) {
+          $options[$entity_term->tid] = entity_label('taxonomy_term', $entity_term);
         }
       }
 
@@ -238,7 +242,7 @@ class views_handler_filter_term_node_tid extends views_handler_filter_many_to_on
     $rc = parent::accept_exposed_input($input);
     if ($rc) {
       // If we have previously validated input, override.
-      if (isset($this->validated_exposed_input)) {
+      if (!$this->is_a_group() && isset($this->validated_exposed_input)) {
         $this->value = $this->validated_exposed_input;
       }
     }
@@ -347,12 +351,9 @@ class views_handler_filter_term_node_tid extends views_handler_filter_many_to_on
 
     if ($this->value) {
       $this->value = array_filter($this->value);
-      $result = db_select('taxonomy_term_data', 'td')
-        ->fields('td')
-        ->condition('td.tid', $this->value)
-        ->execute();
-      foreach ($result as $term) {
-        $this->value_options[$term->tid] = $term->name;
+      $result = taxonomy_term_load_multiple($this->value);
+      foreach ($result as $entity_term) {
+        $this->value_options[$entity_term->tid] = entity_label('taxonomy_term', $entity_term);
       }
     }
     return parent::admin_summary();
diff --git a/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_relationship_node_term_data.inc b/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_relationship_node_term_data.inc
index d7fbb4c..cf72288 100644
--- a/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_relationship_node_term_data.inc
+++ b/profiles/commons/modules/contrib/views/modules/taxonomy/views_handler_relationship_node_term_data.inc
@@ -75,7 +75,9 @@ class views_handler_relationship_node_term_data extends views_handler_relationsh
       $query->addJoin($def['type'], 'taxonomy_vocabulary', 'tv', 'td.vid = tv.vid');
       $query->addJoin($def['type'], 'taxonomy_index', 'tn', 'tn.tid = td.tid');
       $query->condition('tv.machine_name', array_filter($this->options['vocabularies']));
-      $query->addTag('term_access');
+      if (empty($this->query->options['disable_sql_rewrite'])) {
+        $query->addTag('term_access');
+      }
       $query->fields('td');
       $query->fields('tn', array('nid'));
       $def['table formula'] = $query;
diff --git a/profiles/commons/modules/contrib/views/modules/user/views_handler_field_user_link_cancel.inc b/profiles/commons/modules/contrib/views/modules/user/views_handler_field_user_link_cancel.inc
index 9129c01..fe038da 100644
--- a/profiles/commons/modules/contrib/views/modules/user/views_handler_field_user_link_cancel.inc
+++ b/profiles/commons/modules/contrib/views/modules/user/views_handler_field_user_link_cancel.inc
@@ -22,7 +22,7 @@ class views_handler_field_user_link_cancel extends views_handler_field_user_link
     if ($uid && user_cancel_access($account)) {
       $this->options['alter']['make_link'] = TRUE;
 
-      $text = !empty($this->options['text']) ? $this->options['text'] : t('cancel');
+      $text = !empty($this->options['text']) ? $this->options['text'] : t('Cancel account');
 
       $this->options['alter']['path'] = "user/$uid/cancel";
       $this->options['alter']['query'] = drupal_get_destination();
diff --git a/profiles/commons/modules/contrib/views/modules/views.views.inc b/profiles/commons/modules/contrib/views/modules/views.views.inc
index 2029aa8..7c3f4db 100644
--- a/profiles/commons/modules/contrib/views/modules/views.views.inc
+++ b/profiles/commons/modules/contrib/views/modules/views.views.inc
@@ -81,6 +81,14 @@ function views_views_data() {
     ),
   );
 
+  $data['views']['messages'] = array(
+    'title' => t('Messages'),
+    'help' => t('Displays messages in the area.'),
+    'area' => array(
+      'handler' => 'views_handler_area_messages',
+    ),
+  );
+
   if (module_exists('contextual')) {
     $data['views']['contextual_links'] = array(
       'title' => t('Contextual Links'),
@@ -110,5 +118,14 @@ function views_views_data() {
     );
   }
 
+  $data['views']['fields_compare'] = array(
+    'title' => t('Fields comparison'),
+    'help' => t('Compare database fields against eachother.'),
+    'filter' => array(
+      'help' => t('Use fields comparison to filter the result of the view.'),
+      'handler' => 'views_handler_filter_fields_compare',
+    )
+  );
+
   return $data;
 }
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_cache.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_cache.inc
index 4d21701..81f71bf 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_cache.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_cache.inc
@@ -200,25 +200,28 @@ class views_plugin_cache extends views_plugin {
       $this->storage['head'] = '';
     }
 
+    // Check if the advanced mapping function of D 7.23 is available.
+    $array_mapping_func = function_exists('drupal_array_diff_assoc_recursive') ? 'drupal_array_diff_assoc_recursive' : 'array_diff_assoc';
+
     // Slightly less simple for CSS:
     $css = drupal_add_css();
     $css_start = isset($this->storage['css']) ? $this->storage['css'] : array();
-    $this->storage['css'] = array_diff_assoc($css, $css_start);
+    $this->storage['css'] = $array_mapping_func($css, $css_start);
 
     // Get javascript after/before views renders.
     $js = drupal_add_js();
     $js_start = isset($this->storage['js']) ? $this->storage['js'] : array();
     // If there are any differences between the old and the new javascript then
     // store them to be added later.
-    $this->storage['js'] = array_diff_assoc($js, $js_start);
+    $this->storage['js'] = $array_mapping_func($js, $js_start);
 
     // Special case the settings key and get the difference of the data.
     $settings = isset($js['settings']['data']) ? $js['settings']['data'] : array();
     $settings_start = isset($js_start['settings']['data']) ? $js_start['settings']['data'] : array();
-    $this->storage['js']['settings'] = array_diff_assoc($settings, $settings_start);
+    $this->storage['js']['settings'] = $array_mapping_func($settings, $settings_start);
 
     // Get difference of HTTP headers.
-    $this->storage['headers'] = array_diff_assoc(drupal_get_http_header(), $this->storage['headers']);
+    $this->storage['headers'] = $array_mapping_func(drupal_get_http_header(), $this->storage['headers']);
   }
 
   /**
@@ -253,59 +256,61 @@ class views_plugin_cache extends views_plugin {
   }
 
   function get_results_key() {
-    global $user;
-
     if (!isset($this->_results_key)) {
-
-      $build_info = $this->view->build_info;
-
-      $query_plugin = $this->view->display_handler->get_plugin('query');
-
-      foreach (array('query','count_query') as $index) {
-        // If the default query back-end is used generate SQL query strings from
-        // the query objects.
-        if ($build_info[$index] instanceof SelectQueryInterface) {
-          $query = clone $build_info[$index];
-          $query->preExecute();
-          $build_info[$index] = (string) $query;
-        }
-      }
-      $key_data = array(
-        'build_info' => $build_info,
-        'roles' => array_keys($user->roles),
-        'super-user' => $user->uid == 1, // special caching for super user.
-        'language' => $GLOBALS['language']->language,
-        'base_url' => $GLOBALS['base_url'],
-      );
-      foreach (array('exposed_info', 'page', 'sort', 'order', 'items_per_page', 'offset') as $key) {
-        if (isset($_GET[$key])) {
-          $key_data[$key] = $_GET[$key];
-        }
-      }
-
-      $this->_results_key = $this->view->name . ':' . $this->display->id . ':results:' . md5(serialize($key_data));
+      $this->_results_key = $this->view->name . ':' . $this->display->id . ':results:' . $this->get_cache_key();
     }
 
     return $this->_results_key;
   }
 
   function get_output_key() {
-    global $user;
     if (!isset($this->_output_key)) {
       $key_data = array(
-        'result' => $this->view->result,
-        'roles' => array_keys($user->roles),
-        'super-user' => $user->uid == 1, // special caching for super user.
         'theme' => $GLOBALS['theme'],
-        'language' => $GLOBALS['language']->language,
-        'base_url' => $GLOBALS['base_url'],
       );
-
-      $this->_output_key = $this->view->name . ':' . $this->display->id . ':output:' . md5(serialize($key_data));
+      $this->_output_key = $this->view->name . ':' . $this->display->id . ':output:' . $this->get_cache_key($key_data);
     }
 
     return $this->_output_key;
   }
+
+  /**
+   * Returns cache key.
+   *
+   * @param array $key_data
+   *   Additional data for cache segmentation and/or overrides for default
+   *   segmentation.
+   *
+   * @return string
+   */
+  function get_cache_key($key_data = array()) {
+    global $user;
+
+    $key_data += array(
+      'roles' => array_keys($user->roles),
+      'super-user' => $user->uid == 1, // special caching for super user.
+      'language' => $GLOBALS['language']->language,
+      'base_url' => $GLOBALS['base_url'],
+    );
+
+    if (empty($key_data['build_info'])) {
+      $build_info = $this->view->build_info;
+      foreach (array('query','count_query') as $index) {
+        // If the default query back-end is used generate SQL query strings from
+        // the query objects.
+        if ($build_info[$index] instanceof SelectQueryInterface) {
+          $query = clone $build_info[$index];
+          $query->preExecute();
+          $key_data['build_info'][$index] = array(
+            'sql' => (string) $query,
+            'arguments' => $query->getArguments(),
+          );
+        }
+      }
+    }
+    $key = md5(serialize($key_data));
+    return $key;
+  }
 }
 
 /**
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_display.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_display.inc
index 75a32c5..db124de 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_display.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_display.inc
@@ -918,7 +918,7 @@ class views_plugin_display extends views_plugin {
   /**
    * Get a full array of handlers for $type. This caches them.
    */
-  function get_handlers($type) {
+  function &get_handlers($type) {
     if (!isset($this->handlers[$type])) {
       $this->handlers[$type] = array();
       $types = views_object_types();
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_display_feed.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_display_feed.inc
index bfd220c..5eb68e3 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_display_feed.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_display_feed.inc
@@ -37,7 +37,7 @@ class views_plugin_display_feed extends views_plugin_display_page {
   function execute() {
     $output = $this->view->render();
     if (empty($output)) {
-      return drupal_not_found();
+      return MENU_NOT_FOUND;
     }
     print $output;
   }
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_display_page.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_display_page.inc
index 7ca4bf7..4bcec0b 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_display_page.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_display_page.inc
@@ -216,11 +216,11 @@ class views_plugin_display_page extends views_plugin_display {
     // display, and arguments should be set on the view.
     $this->view->build();
     if (!empty($this->view->build_info['fail'])) {
-      return drupal_not_found();
+      return MENU_NOT_FOUND;
     }
 
     if (!empty($this->view->build_info['denied'])) {
-      return drupal_access_denied();
+      return MENU_ACCESS_DENIED;
     }
 
     $this->view->get_breadcrumb(TRUE);
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form.inc
index 343eee8..5d54600 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form.inc
@@ -173,7 +173,7 @@ class views_plugin_exposed_form extends views_plugin {
     $view = $this->view;
     $exposed_data = isset($view->exposed_data) ? $view->exposed_data : array();
     $sort_by = isset($exposed_data['sort_by']) ? $exposed_data['sort_by'] : NULL;
-    if (!empty($sort_by)) {
+    if (!empty($sort_by) && $this->view->style_plugin->build_sort()) {
       // Make sure the original order of sorts is preserved
       // (e.g. a sticky sort is often first)
       if (isset($view->sort[$sort_by])) {
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form_input_required.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form_input_required.inc
index 4f2c2d2..ca97674 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form_input_required.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_exposed_form_input_required.inc
@@ -71,6 +71,7 @@ class views_plugin_exposed_form_input_required extends views_plugin_exposed_form
         'group_type' => 'group',
         'content' => $this->options['text_input_required'],
         'format' => $this->options['text_input_required_format'],
+        'empty' => TRUE,
       );
       $handler = views_get_handler('views', 'area', 'area');
       $handler->init($this->view, $options);
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_pager.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_pager.inc
index 416d662..312f54b 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_pager.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_pager.inc
@@ -107,7 +107,7 @@ class views_plugin_pager extends views_plugin {
    * Get the pager id, if it exists
    */
   function get_pager_id() {
-    return isset($this->options['id']) ? $this->options['id'] : 0;
+    return !empty($this->options['id']) ? $this->options['id'] : 0;
   }
 
   /**
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_full.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_full.inc
index d4c2203..aedb223 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_full.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_full.inc
@@ -276,7 +276,7 @@ class views_plugin_pager_full extends views_plugin_pager {
     );
     $output = theme($pager_theme, array(
       'tags' => $tags,
-      'element' => $this->options['id'],
+      'element' => $this->get_pager_id(),
       'parameters' => $input,
       'quantity' => $this->options['quantity'],
     ));
@@ -308,11 +308,12 @@ class views_plugin_pager_full extends views_plugin_pager {
     // array hasn't been initialized before.
     $page = isset($_GET['page']) ? explode(',', $_GET['page']) : array();
 
-    for ($i = 0; $i <= $this->options['id'] || $i < count($pager_page_array); $i++) {
+    $pager_id = $this->get_pager_id();
+    for ($i = 0; $i <= $pager_id || $i < count($pager_page_array); $i++) {
       $pager_page_array[$i] = empty($page[$i]) ? 0 : $page[$i];
     }
 
-    $this->current_page = intval($pager_page_array[$this->options['id']]);
+    $this->current_page = intval($pager_page_array[$pager_id]);
 
     if ($this->current_page < 0) {
       $this->current_page = 0;
@@ -348,24 +349,25 @@ class views_plugin_pager_full extends views_plugin_pager {
       // Dump information about what we already know into the globals.
       global $pager_page_array, $pager_total, $pager_total_items, $pager_limits;
       // Set the limit.
-      $pager_limits[$this->options['id']] = $this->options['items_per_page'];
+      $pager_id = $this->get_pager_id();
+      $pager_limits[$pager_id] = $this->options['items_per_page'];
       // Set the item count for the pager.
-      $pager_total_items[$this->options['id']] = $this->total_items;
+      $pager_total_items[$pager_id] = $this->total_items;
       // Calculate and set the count of available pages.
-      $pager_total[$this->options['id']] = $this->get_pager_total();
+      $pager_total[$pager_id] = $this->get_pager_total();
 
       // See if the requested page was within range:
       if ($this->current_page < 0) {
         $this->current_page = 0;
       }
-      else if ($this->current_page >= $pager_total[$this->options['id']]) {
+      else if ($this->current_page >= $pager_total[$pager_id]) {
         // Pages are numbered from 0 so if there are 10 pages, the last page is 9.
-        $this->current_page = $pager_total[$this->options['id']] - 1;
+        $this->current_page = $pager_total[$pager_id] - 1;
       }
 
       // Put this number in to guarantee that we do not generate notices when the pager
       // goes to look for it later.
-      $pager_page_array[$this->options['id']] = $this->current_page;
+      $pager_page_array[$pager_id] = $this->current_page;
     }
   }
 
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_mini.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_mini.inc
index bec48c8..87d5541 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_mini.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_pager_mini.inc
@@ -63,7 +63,7 @@ class views_plugin_pager_mini extends views_plugin_pager_full {
     );
     return theme($pager_theme, array(
       'tags' => $tags,
-      'element' => $this->options['id'],
+      'element' => $this->get_pager_id(),
       'parameters' => $input,
     ));
   }
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_query_default.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_query_default.inc
index 030c5ea..8a15e8d 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_query_default.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_query_default.inc
@@ -1365,6 +1365,16 @@ class views_plugin_query_default extends views_plugin_query {
     // Add all query substitutions as metadata.
     $query->addMetaData('views_substitutions', module_invoke_all('views_query_substitutions', $this));
 
+    if (!$get_count) {
+      if (!empty($this->limit) || !empty($this->offset)) {
+        // We can't have an offset without a limit, so provide a very large limit
+        // instead.
+        $limit  = intval(!empty($this->limit) ? $this->limit : 999999);
+        $offset = intval(!empty($this->offset) ? $this->offset : 0);
+        $query->range($offset, $limit);
+      }
+    }
+
     return $query;
   }
 
@@ -1469,16 +1479,8 @@ class views_plugin_query_default extends views_plugin_query {
           $this->pager->execute_count_query($count_query);
         }
 
-        // Let the pager modify the query to add limits.
         $this->pager->pre_execute($query);
 
-        if (!empty($this->limit) || !empty($this->offset)) {
-          // We can't have an offset without a limit, so provide a very large limit instead.
-          $limit  = intval(!empty($this->limit) ? $this->limit : 999999);
-          $offset = intval(!empty($this->offset) ? $this->offset : 0);
-          $query->range($offset, $limit);
-        }
-
         $result = $query->execute();
 
         $view->result = array();
diff --git a/profiles/commons/modules/contrib/views/plugins/views_plugin_style_jump_menu.inc b/profiles/commons/modules/contrib/views/plugins/views_plugin_style_jump_menu.inc
index 16b0aef..1de90f7 100644
--- a/profiles/commons/modules/contrib/views/plugins/views_plugin_style_jump_menu.inc
+++ b/profiles/commons/modules/contrib/views/plugins/views_plugin_style_jump_menu.inc
@@ -142,8 +142,17 @@ class views_plugin_style_jump_menu extends views_plugin_style {
     unset($this->view->row_index);
 
     $default_value = '';
-    if ($this->options['default_value'] && !empty($paths[url($_GET['q'])])) {
-      $default_value = $paths[url($_GET['q'])];
+    if ($this->options['default_value']) {
+      $lookup_options = array();
+      // We need to check if the path is absolute
+      // or else language is not taken in account.
+      if ($this->view->display[$this->view->current_display]->display_options['fields'][$this->options['path']]['absolute']) {
+        $lookup_options['absolute'] = TRUE;
+      }
+      $lookup_url = url($_GET['q'], $lookup_options);
+      if (!empty($paths[$lookup_url])) {
+        $default_value = $paths[$lookup_url];
+      }
     }
 
     ctools_include('jump-menu');
diff --git a/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_date.test b/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_date.test
index 028b687..7944142 100644
--- a/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_date.test
+++ b/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_date.test
@@ -34,6 +34,8 @@ class ViewsHandlerFieldDateTest extends ViewsSqlTest {
         'relationship' => 'none',
         // c is iso 8601 date format @see http://php.net/manual/en/function.date.php
         'custom_date_format' => 'c',
+        'second_date_format' => 'custom',
+        'second_date_format_custom' => 'c',
       ),
     ));
     $time = gmmktime(0, 0, 0, 1, 1, 2000);
@@ -51,6 +53,8 @@ class ViewsHandlerFieldDateTest extends ViewsSqlTest {
         'medium' => format_date($time, 'medium', '', $timezone),
         'large' => format_date($time, 'large', '', $timezone),
         'custom' => format_date($time, 'custom', 'c', $timezone),
+        'today time ago custom' => format_date($time, 'custom', 'c', $timezone),
+        'today time ago' => t('%time ago', array('%time' => format_interval(120, 2))),
       );
       $this->assertRenderedDatesEqual($view, $dates, $timezone);
     }
@@ -67,6 +71,17 @@ class ViewsHandlerFieldDateTest extends ViewsSqlTest {
 
   protected function assertRenderedDatesEqual($view, $map, $timezone = NULL) {
     foreach ($map as $date_format => $expected_result) {
+      $check_result_number = 0;
+
+      // If it's "today time ago" format we have to check the 6th element.
+      if ($date_format == 'today time ago') {
+        $check_result_number = 5;
+      }
+
+      // Correct the date format.
+      if ($date_format == 'today time ago custom') {
+        $date_format = 'today time ago';
+      }
       $view->field['created']->options['date_format'] = $date_format;
       $t_args = array(
         '%value' => $expected_result,
@@ -80,8 +95,23 @@ class ViewsHandlerFieldDateTest extends ViewsSqlTest {
       else {
         $message = t('Value %value in %format format matches.', $t_args);
       }
-      $actual_result = $view->field['created']->advanced_render($view->result[0]);
+      $actual_result = $view->field['created']->advanced_render($view->result[$check_result_number]);
       $this->assertEqual($expected_result, $actual_result, $message);
     }
   }
+
+  /**
+   * Appends dataSet() with a data row for "today time ago" format testing.
+   */
+  protected function dataSet() {
+    $data = parent::dataSet();
+    $data[] = array(
+      'name' => 'David',
+      'age' => 25,
+      'job' => 'Singer',
+      'created' => REQUEST_TIME - 120,
+    );
+
+    return $data;
+  }
 }
diff --git a/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_file_extension.test b/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_file_extension.test
new file mode 100644
index 0000000..ab8b0a9
--- /dev/null
+++ b/profiles/commons/modules/contrib/views/tests/handlers/views_handler_field_file_extension.test
@@ -0,0 +1,66 @@
+<?php
+
+/**
+ * @file
+ * Definition of ViewsHandlerFileExtensionTest.
+ */
+
+/**
+ * Tests the views_handler_field_file_extension handler.
+ */
+class ViewsHandlerFileExtensionTest extends ViewsSqlTest {
+  public static function getInfo() {
+    return array(
+      'name' => 'Field: File extension',
+      'description' => 'Test the views_handler_field_file_extension handler.',
+      'group' => 'Views Handlers',
+    );
+  }
+
+  function dataSet() {
+    $data = parent::dataSet();
+    $data[0]['name'] = 'file.png';
+    $data[1]['name'] = 'file.tar';
+    $data[2]['name'] = 'file.tar.gz';
+    $data[3]['name'] = 'file';
+
+    return $data;
+  }
+
+  function viewsData() {
+    $data = parent::viewsData();
+    $data['views_test']['name']['field']['handler'] = 'views_handler_field_file_extension';
+    $data['views_test']['name']['real field'] = 'name';
+
+    return $data;
+  }
+
+  /**
+   * Tests the 'extension_detect_tar' handler option.
+   */
+  public function testFileExtensionTarOption() {
+    $view = $this->getBasicView();
+
+    $view->display['default']->handler->override_option('fields', array(
+      'name' => array(
+        'id' => 'name',
+        'table' => 'views_test',
+        'field' => 'name',
+      ),
+    ));
+
+    $this->executeView($view);
+
+    // Test without the tar option.
+    $this->assertEqual($view->field['name']->advanced_render($view->result[0]), 'png');
+    $this->assertEqual($view->field['name']->advanced_render($view->result[1]), 'tar');
+    $this->assertEqual($view->field['name']->advanced_render($view->result[2]), 'gz');
+    $this->assertEqual($view->field['name']->advanced_render($view->result[3]), '');
+    // Test with the tar option.
+    $view->field['name']->options['extension_detect_tar'] = TRUE;
+    $this->assertEqual($view->field['name']->advanced_render($view->result[0]), 'png');
+    $this->assertEqual($view->field['name']->advanced_render($view->result[1]), 'tar');
+    $this->assertEqual($view->field['name']->advanced_render($view->result[2]), 'tar.gz');
+    $this->assertEqual($view->field['name']->advanced_render($view->result[3]), '');
+  }
+}
diff --git a/profiles/commons/modules/contrib/views/tests/handlers/views_handlers.test b/profiles/commons/modules/contrib/views/tests/handlers/views_handlers.test
new file mode 100644
index 0000000..f2faee3
--- /dev/null
+++ b/profiles/commons/modules/contrib/views/tests/handlers/views_handlers.test
@@ -0,0 +1,81 @@
+<?php
+
+/**
+ * @file
+ * Contains ViewsHandlerTest.
+ */
+
+/**
+ * Tests generic handler functionality.
+ *
+ * @see view
+ */
+class ViewsHandlerTest extends ViewsSqlTest {
+
+  public static function getInfo() {
+    return array(
+      'name' => 'Handlers',
+      'description' => 'Tests generic handler functionality.',
+      'group' => 'Views Handlers',
+    );
+  }
+
+  /**
+   * {@inheritdoc}
+   */
+  protected function viewsData() {
+    $views_data = parent::viewsData();
+    $views_data['views']['test_access'] = array(
+      'title' => 'test access',
+      'help' => '',
+      'area' => array(
+        'handler' => 'views_test_area_access',
+      ),
+    );
+
+    return $views_data;
+  }
+
+  /**
+   * Tests access for handlers using an area handler.
+   */
+  public function testHandlerAccess() {
+    $view = $this->getBasicView();
+
+    // add a test area
+    $view->display['default']->handler->override_option('header', array(
+      'test_access' => array(
+        'id' => 'test_access',
+        'table' => 'views',
+        'field' => 'test_access',
+        'custom_access' => FALSE,
+      ),
+    ));
+
+    $view->init_display();
+    $view->init_handlers();
+    $handlers = $view->display_handler->get_handlers('header');
+    $this->assertEqual(0, count($handlers));
+
+    $view->destroy();
+
+    $view = $this->getBasicView();
+
+    // add a test area
+    $view->display['default']->handler->override_option('header', array(
+      'test_access' => array(
+        'id' => 'test_access',
+        'table' => 'views',
+        'field' => 'test_access',
+        'custom_access' => TRUE,
+      ),
+    ));
+
+    $view->init_display();
+    $view->init_handlers();
+    $handlers = $view->display_handler->get_handlers('header');
+    $this->assertEqual(1, count($handlers));
+    $this->assertTrue(isset($handlers['test_access']));
+  }
+
+}
diff --git a/profiles/commons/modules/contrib/views/tests/test_handlers/views_test_area_access.inc b/profiles/commons/modules/contrib/views/tests/test_handlers/views_test_area_access.inc
new file mode 100644
index 0000000..57a0014
--- /dev/null
+++ b/profiles/commons/modules/contrib/views/tests/test_handlers/views_test_area_access.inc
@@ -0,0 +1,28 @@
+<?php
+
+/**
+ * @file
+ * Contains views_test_area_access
+ */
+
+class views_test_area_access extends views_handler_area {
+
+  /**
+   * {@inheritdoc}
+   */
+  function access() {
+    return $this->options['custom_access'];
+ }
+
+  /**
+   * {@inheritdoc}
+   */
+  function option_definition() {
+    $options = parent::option_definition();
+
+    $options['custom_access'] = array('default' => TRUE, 'bool' => TRUE);
+
+    return $options;
+  }
+
+}
diff --git a/profiles/commons/modules/contrib/views/tests/views_cache.test b/profiles/commons/modules/contrib/views/tests/views_cache.test
index 3103762..28534a2 100644
--- a/profiles/commons/modules/contrib/views/tests/views_cache.test
+++ b/profiles/commons/modules/contrib/views/tests/views_cache.test
@@ -241,4 +241,68 @@ class ViewsCacheTest extends ViewsSqlTest {
     $this->assertEqual($first_content_type, $second_content_type, t('Content types of responses are equal.'));
   }
 
+  /**
+   * Test caching of different exposed filter values with the same view result.
+   *
+   * Make sure the output is different.
+   */
+  function testExposedFilterSameResultsCaching() {
+    // Create the view with time-based cache with hour lifetimes and add exposed
+    // filter to it with "Starts with" operator.
+    $view = $this->getBasicView();
+    $view->set_display();
+    $view->display_handler->override_option('cache', array(
+      'type' => 'time',
+      'results_lifespan' => '3600',
+      'output_lifespan' => '3600',
+    ));
+    $view->display_handler->override_option('filters', array(
+      'name' => array(
+        'id' => 'name',
+        'table' => 'views_test',
+        'field' => 'name',
+        'relationship' => 'none',
+        'operator' => 'starts',
+        'exposed' => TRUE,
+        'expose' => array(
+          'operator_id' => 'name_op',
+          'operator' => 'name_op',
+          'identifier' => 'name',
+        ),
+      ),
+    ));
+
+    // Clone the view before setting exposed input.
+    $clone = $view->copy();
+
+    // Pass "Rin" to the exposed filter and check that only one row returned.
+    $view->set_exposed_input(array(
+      'name' => 'Rin',
+    ));
+    $this->executeView($view);
+    $first_result = $view->result;
+    $first_output = $view->render();
+    $this->assertEqual(1, count($first_result), t('The number of rows returned by the first view match.'));
+
+    // Pass full "Ringo" to the exposed filter at the second time and make sure
+    // results are the same.
+    $clone->set_exposed_input(array(
+      'name' => 'Ringo',
+    ));
+    $this->executeView($clone);
+    $second_result = $clone->result;
+    $second_output = $clone->render();
+    $this->assertEqual($first_result, $second_result, t('Results of both views are the same.'));
+
+    // Check that output is not the same and it contains full "Ringo" word in
+    // default value of exposed input.
+    $this->assertNotEqual($first_output, $second_output, t('Output of the second view is different.'));
+    $this->drupalSetContent($second_output);
+    $element = $this->xpath('//input[@name="name" and @value="Ringo"]');
+    $this->assertTrue(!empty($element), t('Input field of exposed filter has the second value.'));
+
+    $view->destroy();
+    $clone->destroy();
+  }
+
 }
diff --git a/profiles/commons/modules/contrib/views/tests/views_module.test b/profiles/commons/modules/contrib/views/tests/views_module.test
index dc6c164..6a27443 100644
--- a/profiles/commons/modules/contrib/views/tests/views_module.test
+++ b/profiles/commons/modules/contrib/views/tests/views_module.test
@@ -152,6 +152,51 @@ class ViewsModuleTest extends ViewsSqlTest {
   }
 
   /**
+   * Tests views_fetch_data().
+   */
+  function testFetchData() {
+
+    // Make sure we start with a empty cache.
+    $this->resetStaticViewsDataCache();
+    cache_clear_all('*', 'cache_views', TRUE);
+    variable_set('views_test_views_data_count', 0);
+
+    // Request info about an existing table.
+    $this->assertTrue(views_fetch_data('views_test'), 'Data about existing table returned');
+    // This should have triggered a views data rebuild, and written a cache
+    // entry for all tables and the requested table but no other tables.
+    $this->assertEqual(variable_get('views_test_views_data_count', 0), 1, 'Views data rebuilt once');
+    $this->assertTrue(cache_get('views_data:en', 'cache_views'), 'Cache for all tables written.');
+    $this->assertTrue(cache_get('views_data:views_test:en', 'cache_views'), 'Cache for requested table written.');
+    $this->assertFalse(cache_get('views_data:views_test_previous:en', 'cache_views'), 'No Cache written for not requested table.');
+    $this->assertTrue(drupal_static('_views_fetch_data_fully_loaded'), 'Views data is fully loaded');
+
+    $this->resetStaticViewsDataCache();
+
+    // Request the same table again.
+    $this->assertTrue(views_fetch_data('views_test'), 'Data about existing table returned');
+    $this->assertEqual(variable_get('views_test_views_data_count', 0), 1, 'Views data rebuilt once');
+    $this->assertFalse(drupal_static('_views_fetch_data_fully_loaded'), 'Views data is not fully loaded');
+
+    $this->resetStaticViewsDataCache();
+
+    // Request a missing table, this should load the full cache from cache but
+    // not rebuilt.
+    $this->assertFalse(views_fetch_data('views_test_missing'), 'No data about missing table returned');
+    $this->assertEqual(variable_get('views_test_views_data_count', 0), 1, 'Views data rebuilt once');
+    $this->assertTrue(drupal_static('_views_fetch_data_fully_loaded'), 'Views data is fully loaded');
+
+    $this->resetStaticViewsDataCache();
+
+    // Request the same empty table again, this should load only that (empty)
+    // cache for that table.
+    $this->assertFalse(views_fetch_data('views_test_missing'), 'No data about missing table returned');
+    $this->assertEqual(variable_get('views_test_views_data_count', 0), 1, 'Views data rebuilt once');
+    $this->assertFalse(drupal_static('_views_fetch_data_fully_loaded'), 'Views data is not fully loaded');
+
+  }
+
+  /**
    * Ensure that a certain handler is a instance of a certain table/field.
    */
   function assertInstanceHandler($handler, $table, $field, $id) {
@@ -160,4 +205,13 @@ class ViewsModuleTest extends ViewsSqlTest {
 
     $this->assertEqual($field_data['handler'], get_class($handler));
   }
+
+  /**
+   * Resets the views data cache.
+   */
+  protected function resetStaticViewsDataCache() {
+    drupal_static_reset('_views_fetch_data_cache');
+    drupal_static_reset('_views_fetch_data_recursion_protected');
+    drupal_static_reset('_views_fetch_data_fully_loaded');
+  }
 }
diff --git a/profiles/commons/modules/contrib/views/tests/views_test.info b/profiles/commons/modules/contrib/views/tests/views_test.info
index 23bd884..e0256dc 100644
--- a/profiles/commons/modules/contrib/views/tests/views_test.info
+++ b/profiles/commons/modules/contrib/views/tests/views_test.info
@@ -5,9 +5,9 @@ core = 7.x
 dependencies[] = views
 hidden = TRUE
 
-; Information added by drupal.org packaging script on 2013-04-09
-version = "7.x-3.7"
+; Information added by Drupal.org packaging script on 2014-05-20
+version = "7.x-3.8"
 core = "7.x"
 project = "views"
-datestamp = "1365499236"
+datestamp = "1400618928"
 
diff --git a/profiles/commons/modules/contrib/views/tests/views_test.module b/profiles/commons/modules/contrib/views/tests/views_test.module
index 7adcf43..a746069 100644
--- a/profiles/commons/modules/contrib/views/tests/views_test.module
+++ b/profiles/commons/modules/contrib/views/tests/views_test.module
@@ -31,6 +31,10 @@ function views_test_views_api() {
  * Implements hook_views_data().
  */
 function views_test_views_data() {
+  // Count how often this hook is called.
+  $count = variable_get('views_test_views_data_count', 0);
+  $count++;
+  variable_set('views_test_views_data_count', $count);
   return  variable_get('views_test_views_data', array());
 }
 
diff --git a/profiles/commons/modules/contrib/views/views.api.php b/profiles/commons/modules/contrib/views/views.api.php
index ba9b326..07cd76c 100644
--- a/profiles/commons/modules/contrib/views/views.api.php
+++ b/profiles/commons/modules/contrib/views/views.api.php
@@ -513,6 +513,80 @@ function hook_views_data_alter(&$data) {
   // Note that the $data array is not returned – it is modified by reference.
 }
 
+/**
+ * Override the default data for a Field API field.
+ *
+ * Field module's implementation of hook_views_data() invokes this for each
+ * field in the module that defines the field type (as declared in the field
+ * array). It is not invoked in other modules.
+ *
+ * If no hook implementation exists, hook_views_data() falls back to
+ * field_views_field_default_views_data().
+ *
+ * @see field_views_data()
+ * @see hook_field_views_data_alter()
+ * @see hook_field_views_data_views_data_alter()
+ *
+ * @param $field
+ *  A field definition array, as returned by field_info_fields().
+ *
+ * @return
+ *  An array of views data, in the same format as the return value of
+ *  hook_views_data().
+ */
+function hook_field_views_data($field) {
+
+}
+
+/**
+ * Alter the views data for a single Field API field.
+ *
+ * This is called even if there is no hook_field_views_data() implementation for
+ * the field, and therefore may be used to alter the default data that
+ * field_views_field_default_views_data() supplies for the field.
+ *
+ * @param $result
+ *  An array of views table data provided for a single field. This has the same
+ *  format as the return value of hook_views_data().
+ * @param $field
+ *  A field definition array, as returned by field_info_fields().
+ * @param $module
+ *  The module that defines the field type.
+ *
+ * @see field_views_data()
+ * @see hook_field_views_data()
+ * @see hook_field_views_data_views_data_alter()
+ */
+function hook_field_views_data_alter(&$result, $field, $module) {
+
+}
+
+/**
+ * Alter the views data on a per field basis.
+ *
+ * Field module's implementation of hook_views_data_alter() invokes this for
+ * each field in the module that defines the field type (as declared in the
+ * field array). It is not invoked in other modules.
+ *
+ * Unlike hook_field_views_data_alter(), this operates on the whole of the views
+ * data. This allows a field module to add data that concerns its fields to
+ * other tables, which would not yet be defined at the point when
+ * hook_field_views_data() and hook_field_views_data_alter() are invoked. For
+ * example, entityreference adds reverse relationships on the tables for the
+ * entities which are referenced by entityreference fields.
+ *
+ * (Note: this is weirdly named so as not to conflict with
+ * hook_field_views_data_alter().)
+ *
+ * @see hook_field_views_data()
+ * @see hook_field_views_data_alter()
+ * @see field_views_data_alter()
+ */
+function hook_field_views_data_views_data_alter(&$data, $field) {
+  $field_name = $field['field_name'];
+  $data_key = 'field_data_' . $field_name;
+  // Views data for this field is in $data[$data_key]
+}
 
 /**
  * Describes plugins defined by the module.
diff --git a/profiles/commons/modules/contrib/views/views.info b/profiles/commons/modules/contrib/views/views.info
index 50d8148..50f939c 100644
--- a/profiles/commons/modules/contrib/views/views.info
+++ b/profiles/commons/modules/contrib/views/views.info
@@ -10,6 +10,7 @@ stylesheets[all][] = css/views.css
 dependencies[] = ctools
 ; Handlers
 files[] = handlers/views_handler_area.inc
+files[] = handlers/views_handler_area_messages.inc
 files[] = handlers/views_handler_area_result.inc
 files[] = handlers/views_handler_area_text.inc
 files[] = handlers/views_handler_area_text_custom.inc
@@ -49,6 +50,7 @@ files[] = handlers/views_handler_filter_in_operator.inc
 files[] = handlers/views_handler_filter_many_to_one.inc
 files[] = handlers/views_handler_filter_numeric.inc
 files[] = handlers/views_handler_filter_string.inc
+files[] = handlers/views_handler_filter_fields_compare.inc
 files[] = handlers/views_handler_relationship.inc
 files[] = handlers/views_handler_relationship_groupwise_max.inc
 files[] = handlers/views_handler_sort.inc
@@ -253,6 +255,7 @@ files[] = plugins/views_plugin_style_summary_unformatted.inc
 files[] = plugins/views_plugin_style_table.inc
 
 ; Tests
+files[] = tests/handlers/views_handlers.test
 files[] = tests/handlers/views_handler_area_text.test
 files[] = tests/handlers/views_handler_argument_null.test
 files[] = tests/handlers/views_handler_argument_string.test
@@ -261,6 +264,7 @@ files[] = tests/handlers/views_handler_field_boolean.test
 files[] = tests/handlers/views_handler_field_custom.test
 files[] = tests/handlers/views_handler_field_counter.test
 files[] = tests/handlers/views_handler_field_date.test
+files[] = tests/handlers/views_handler_field_file_extension.test
 files[] = tests/handlers/views_handler_field_file_size.test
 files[] = tests/handlers/views_handler_field_math.test
 files[] = tests/handlers/views_handler_field_url.test
@@ -274,6 +278,7 @@ files[] = tests/handlers/views_handler_filter_string.test
 files[] = tests/handlers/views_handler_sort_random.test
 files[] = tests/handlers/views_handler_sort_date.test
 files[] = tests/handlers/views_handler_sort.test
+files[] = tests/test_handlers/views_test_area_access.inc
 files[] = tests/test_plugins/views_test_plugin_access_test_dynamic.inc
 files[] = tests/test_plugins/views_test_plugin_access_test_static.inc
 files[] = tests/test_plugins/views_test_plugin_style_test_mapping.inc
@@ -312,9 +317,9 @@ files[] = tests/views_cache.test
 files[] = tests/views_view.test
 files[] = tests/views_ui.test
 
-; Information added by drupal.org packaging script on 2013-04-09
-version = "7.x-3.7"
+; Information added by Drupal.org packaging script on 2014-05-20
+version = "7.x-3.8"
 core = "7.x"
 project = "views"
-datestamp = "1365499236"
+datestamp = "1400618928"
 
diff --git a/profiles/commons/modules/contrib/views/views.module b/profiles/commons/modules/contrib/views/views.module
index fc427f4..20258df 100644
--- a/profiles/commons/modules/contrib/views/views.module
+++ b/profiles/commons/modules/contrib/views/views.module
@@ -355,9 +355,6 @@ function views_permission() {
  * Implement hook_menu().
  */
 function views_menu() {
-  // Any event which causes a menu_rebuild could potentially mean that the
-  // Views data is updated -- module changes, profile changes, etc.
-  views_invalidate_cache();
   $items = array();
   $items['views/ajax'] = array(
     'title' => 'Views',
diff --git a/profiles/commons/modules/contrib/views/views_ui.info b/profiles/commons/modules/contrib/views/views_ui.info
index 95ea014..d7c8c25 100644
--- a/profiles/commons/modules/contrib/views/views_ui.info
+++ b/profiles/commons/modules/contrib/views/views_ui.info
@@ -7,9 +7,9 @@ dependencies[] = views
 files[] = views_ui.module
 files[] = plugins/views_wizard/views_ui_base_views_wizard.class.php
 
-; Information added by drupal.org packaging script on 2013-04-09
-version = "7.x-3.7"
+; Information added by Drupal.org packaging script on 2014-05-20
+version = "7.x-3.8"
 core = "7.x"
 project = "views"
-datestamp = "1365499236"
+datestamp = "1400618928"
 
diff --git a/profiles/commons/tests/behat/composer.json b/profiles/commons/tests/behat/composer.json
index 5bf9093..ac51c0f 100644
--- a/profiles/commons/tests/behat/composer.json
+++ b/profiles/commons/tests/behat/composer.json
@@ -1,6 +1,6 @@
 {
   "require": {
-    "drupal/drupal-extension": "*",
+    "drupal/drupal-extension": "1.0.0",
 
     "symfony/css-selector": "2.4.2",
     "symfony/finder": "2.4.2",
diff --git a/profiles/commons/tests/behat/features/bootstrap/FeatureContext.php b/profiles/commons/tests/behat/features/bootstrap/FeatureContext.php
index 2e36560..21bf89d 100644
--- a/profiles/commons/tests/behat/features/bootstrap/FeatureContext.php
+++ b/profiles/commons/tests/behat/features/bootstrap/FeatureContext.php
@@ -240,9 +240,10 @@ class FeatureContext extends DrupalContext
       if ($end === FALSE) {
         break;
       }
+      $random_generator = new Random;
       $name = substr($argument, $start + 1, $end - $start - 1);
       if ($name == 'random') {
-        $this->vars[$name] = Random::name(8);
+        $this->vars[$name] = $random_generator->name(8);
         $random[] = $this->vars[$name];
       }
       // In order to test previous random values stored in the form,
@@ -265,4 +266,40 @@ class FeatureContext extends DrupalContext
 
     return $argument;
   }
+
+  /**
+   * @Given /^I log in with the One Time Login Url$/
+   */
+  public function iLogInWithTheOneTimeLoginUrl() {
+    if ($this->loggedIn()) {
+      $this->logOut();
+    }
+
+    $random = new Random;
+
+    // Create user (and project)
+    $user = (object) array(
+      'name' => $random->name(8),
+      'pass' => $random->name(16),
+      'role' => 'authenticated user',
+    );
+    $user->mail = "{$user->name}@example.com";
+
+    // Create a new user.
+    $this->getDriver()->userCreate($user);
+
+    $this->users[$user->name] = $this->user = $user;
+
+    $base_url = rtrim($this->locatePath('/'), '/');
+    $login_link = $this->getMainContext()->getDriver('drush')->drush('uli', array(
+      "'$user->name'",
+      '--browser=0',
+      "--uri=${base_url}",
+    ));
+    // Trim EOL characters. Required or else visiting the link won't work.
+    $login_link = trim($login_link);
+    $login_link = str_replace("/login", '', $login_link);
+    $this->getSession()->visit($this->locatePath($login_link));
+    return TRUE;
+  }
 }
diff --git a/profiles/commons/tests/behat/features/login.feature b/profiles/commons/tests/behat/features/login.feature
index 45de1b4..a973210 100644
--- a/profiles/commons/tests/behat/features/login.feature
+++ b/profiles/commons/tests/behat/features/login.feature
@@ -13,3 +13,16 @@ Feature: Anonymous user login
       And press "E-mail new password"
     Then I should see "Further instructions have been sent to your e-mail address."
       And I should see "Log in"
+
+  @drush
+  Scenario: User can change password after using one-time-login-url
+    Given I log in with the One Time Login Url
+    Then I should see the heading "Reset password"
+    And I should see "This login can be used only once."
+    When I press the "Log in" button
+    Then I should see "You have just used your one-time login link. It is no longer necessary to use this link to log in. Please change your password."
+    When I fill in "mycoolpassword" for "Password"
+    And I fill in "mycoolpassword" for "Confirm password"
+    And I press "Save"
+    Then I should see "The changes have been saved."
+    When I click "Log out"
diff --git a/profiles/commons/themes/commons/commons_origins/commons_origins.info b/profiles/commons/themes/commons/commons_origins/commons_origins.info
index 060d412..6d4863a 100644
--- a/profiles/commons/themes/commons/commons_origins/commons_origins.info
+++ b/profiles/commons/themes/commons/commons_origins/commons_origins.info
@@ -429,9 +429,9 @@
 
   ;
 
-; Information added by Drupal.org packaging script on 2014-05-08
-version = "7.x-3.12"
+; Information added by Drupal.org packaging script on 2014-05-22
+version = "7.x-3.13"
 core = "7.x"
 project = "commons"
-datestamp = "1399579131"
+datestamp = "1400787228"
 
diff --git a/profiles/commons/themes/commons/commons_origins/css/commons-media.css b/profiles/commons/themes/commons/commons_origins/css/commons-media.css
index 07e1a8d..9ac1b2f 100644
--- a/profiles/commons/themes/commons/commons_origins/css/commons-media.css
+++ b/profiles/commons/themes/commons/commons_origins/css/commons-media.css
@@ -44,7 +44,7 @@ table[id^="field-media-values"] .media-widget .button {
 }
 
 .form-type-media .preview {
-  background: url('../images/icons-sfd37165efe.png') 0 -789px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -789px no-repeat;
   width: 26px;
   height: 20px;
   display: inline-block;
diff --git a/profiles/commons/themes/commons/commons_origins/css/global.styles.css b/profiles/commons/themes/commons/commons_origins/css/global.styles.css
index 1572621..746a5f5 100644
--- a/profiles/commons/themes/commons/commons_origins/css/global.styles.css
+++ b/profiles/commons/themes/commons/commons_origins/css/global.styles.css
@@ -438,7 +438,7 @@ var {
 }
 
 .node-teaser.node-promoted {
-  background-image: url('../images/node-promoted-star.png?1395768501');
+  background-image: url('../images/node-promoted-star.png?1400601840');
   background-position: top right;
   background-repeat: no-repeat;
   background-color: #f7f7f7;
@@ -474,7 +474,8 @@ var {
 }
 
 .user-picture,
-.views-field-picture {
+.views-field-picture,
+.profile-badge-picture {
   background: white;
   display: inline-block;
   padding: 4px;
@@ -491,19 +492,25 @@ var {
 .node .user-picture:after, .comment .user-picture:after, .privatemsg-message .user-picture:after, .node
 .views-field-picture:after, .comment
 .views-field-picture:after, .privatemsg-message
-.views-field-picture:after {
+.views-field-picture:after, .node
+.profile-badge-picture:after, .comment
+.profile-badge-picture:after, .privatemsg-message
+.profile-badge-picture:after {
   content: "";
   width: 5px;
   height: 8px;
   position: absolute;
   right: -5px;
   top: 10px;
-  background: url('../images/user_img_arrow.png?1395768501');
+  background: url('../images/user_img_arrow.png?1400601840');
 }
 .node .user-picture img, .comment .user-picture img, .privatemsg-message .user-picture img, .node
 .views-field-picture img, .comment
 .views-field-picture img, .privatemsg-message
-.views-field-picture img {
+.views-field-picture img, .node
+.profile-badge-picture img, .comment
+.profile-badge-picture img, .privatemsg-message
+.profile-badge-picture img {
   width: 50px;
 }
 
@@ -747,7 +754,7 @@ html.js input.form-autocomplete {
   padding-right: 20px;
 }
 html.js input.form-autocomplete.throbbing {
-  background-image: url('../images/commons-throbber.gif?1395336282');
+  background-image: url('../images/commons-throbber.gif?1400601840');
   background-position: right center;
 }
 
@@ -1378,7 +1385,7 @@ button, #panels-ipe-control-container
 }
 
 .rate-commons-like-btn:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -563px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -563px no-repeat;
   width: 10px;
   height: 14px;
   display: inline-block;
@@ -1396,7 +1403,7 @@ button, #panels-ipe-control-container
 }
 [class*="flag-commons-follow-"] .flag-action:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -1050px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1050px no-repeat;
   width: 13px;
   height: 11px;
   display: inline-block;
@@ -1421,7 +1428,7 @@ button, #panels-ipe-control-container
 .flag-inappropriate-node .flag-action:before,
 .flag-inappropriate-comment .flag-action:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -1081px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1081px no-repeat;
   width: 12px;
   height: 10px;
   display: inline-block;
@@ -1436,7 +1443,7 @@ button, #panels-ipe-control-container
 }
 .sharethis-buttons:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -958px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -958px no-repeat;
   width: 12px;
   height: 12px;
   display: inline-block;
@@ -1518,7 +1525,7 @@ button, #panels-ipe-control-container
 }
 .comment-comments .action-item-small:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -1238px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1238px no-repeat;
   width: 13px;
   height: 12px;
   display: inline-block;
@@ -1681,7 +1688,7 @@ button, #panels-ipe-control-container
  * Generic styles for the more link
  */
 .more-link {
-  background-image: url('../images/icons/icon-more.png?1395768501');
+  background-image: url('../images/icons/icon-more.png?1400601840');
   background-repeat: no-repeat;
   min-height: 14px;
   padding: 0 0 0 1.7em;
@@ -1923,7 +1930,7 @@ h1.node-title a:hover {
 
 .row-type-event:before,
 .node-content-type-event:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -661px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -692px no-repeat;
   width: 12px;
   height: 12px;
   display: inline-block;
@@ -1936,7 +1943,7 @@ h1.node-title a:hover {
 .node-content-type-page:before,
 .row-type-document:before,
 .node-content-type-document:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -1302px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1302px no-repeat;
   width: 9px;
   height: 12px;
   display: inline-block;
@@ -1947,7 +1954,7 @@ h1.node-title a:hover {
 
 .row-type-poll:before,
 .node-content-type-poll:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -630px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -661px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -1958,7 +1965,7 @@ h1.node-title a:hover {
 
 .row-type-post:before,
 .node-content-type-post:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -1175px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1175px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -1971,7 +1978,7 @@ h1.node-title a:hover {
 .row-type-answer:before,
 .node-content-type-question:before,
 .node-content-type-answer:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -597px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -597px no-repeat;
   width: 13px;
   height: 13px;
   display: inline-block;
@@ -1982,7 +1989,7 @@ h1.node-title a:hover {
 
 .row-type-wiki:before,
 .node-content-type-wiki:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -396px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -396px no-repeat;
   width: 13px;
   height: 13px;
   display: inline-block;
@@ -2191,7 +2198,7 @@ h1.node-title a:hover {
 }
 .page-node .field-name-field-topics .field-item:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -1364px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1364px no-repeat;
   width: 8px;
   height: 8px;
   display: inline-block;
@@ -2202,7 +2209,7 @@ h1.node-title a:hover {
 }
 .page-node .field-name-og-group-ref .field-item:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -990px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -990px no-repeat;
   width: 8px;
   height: 8px;
   display: inline-block;
@@ -2239,7 +2246,7 @@ h1.node-title a:hover {
 
 .comments-title:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -46px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -46px no-repeat;
   width: 31px;
   height: 24px;
   display: inline-block;
@@ -2304,7 +2311,7 @@ ul.comment-links li {
 }
 .comment-reply:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -1206px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1206px no-repeat;
   width: 13px;
   height: 12px;
   display: inline-block;
@@ -2519,7 +2526,7 @@ ul.node-action-links a {
   width: 58px;
   height: 22px;
   display: inline-block;
-  background-image: url('../images/tag-featured.png?1395768501');
+  background-image: url('../images/tag-featured.png?1400601840');
   background-repeat: no-repeat;
   margin: 6px 0 0 5px;
 }
@@ -2528,7 +2535,7 @@ ul.node-action-links a {
   width: 27px;
   height: 22px;
   display: inline-block;
-  background-image: url('../images/tag-new.png?1395768501');
+  background-image: url('../images/tag-new.png?1400601840');
   background-repeat: no-repeat;
   margin: 4px 0 0 5px;
 }
@@ -2624,7 +2631,7 @@ ul.node-action-links a {
   }
 }
 .page-user .pane-user-field-facebook-url a:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -136px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -136px no-repeat;
   width: 26px;
   height: 26px;
   display: inline-block;
@@ -2634,7 +2641,7 @@ ul.node-action-links a {
 }
 @media only screen and (max-width: 480px) {
   .page-user .pane-user-field-facebook-url a {
-    background: url('../images/icons-sfd37165efe.png') 0 -136px no-repeat;
+    background: url('../images/icons-s34f2cfa4c8.png') 0 -136px no-repeat;
     width: 26px;
     height: 26px;
     display: inline-block;
@@ -2644,7 +2651,7 @@ ul.node-action-links a {
   }
 }
 .page-user .pane-user-field-linkedin-url a:before {
-  background: url('../images/icons-sfd37165efe.png') 0 0 no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 0 no-repeat;
   width: 26px;
   height: 26px;
   display: inline-block;
@@ -2654,7 +2661,7 @@ ul.node-action-links a {
 }
 @media only screen and (max-width: 480px) {
   .page-user .pane-user-field-linkedin-url a {
-    background: url('../images/icons-sfd37165efe.png') 0 0 no-repeat;
+    background: url('../images/icons-s34f2cfa4c8.png') 0 0 no-repeat;
     width: 26px;
     height: 26px;
     display: inline-block;
@@ -2664,7 +2671,7 @@ ul.node-action-links a {
   }
 }
 .page-user .pane-user-field-twitter-url a:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -90px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -90px no-repeat;
   width: 26px;
   height: 26px;
   display: inline-block;
@@ -2674,7 +2681,7 @@ ul.node-action-links a {
 }
 @media only screen and (max-width: 480px) {
   .page-user .pane-user-field-twitter-url a {
-    background: url('../images/icons-sfd37165efe.png') 0 -90px no-repeat;
+    background: url('../images/icons-s34f2cfa4c8.png') 0 -90px no-repeat;
     width: 26px;
     height: 26px;
     display: inline-block;
@@ -2804,7 +2811,7 @@ a:hover, a:focus {
   padding: 0;
 }
 #menu-bar.nav ul.menu li:hover, #menu-bar.nav ul.menu li.active-trail {
-  background: url('../images/main-nav-hover.png?1395768501') repeat-x left top;
+  background: url('../images/main-nav-hover.png?1400601840') repeat-x left top;
 }
 #menu-bar.nav ul.menu li:hover .arrow:before, #menu-bar.nav ul.menu li.active-trail .arrow:before {
   content: "";
@@ -2885,26 +2892,26 @@ a:hover, a:focus {
 }
 
 .main-menu-home a {
-  background: url('../images/icons/icon-home.png?1395768501') no-repeat center 10px;
+  background: url('../images/icons/icon-home.png?1400601840') no-repeat center 10px;
 }
 
 .main-menu-groups a {
-  background: url('../images/icons/icon-groups.png?1395768501') no-repeat center 10px;
+  background: url('../images/icons/icon-groups.png?1400601840') no-repeat center 10px;
 }
 
 .main-menu-events a {
-  background: url('../images/icons/icon-events.png?1395768501') no-repeat center 10px;
+  background: url('../images/icons/icon-events.png?1400601840') no-repeat center 10px;
 }
 
 .main-menu-people a {
-  background: url('../images/icons/icon-people.png?1395768501') no-repeat center 10px;
+  background: url('../images/icons/icon-people.png?1400601840') no-repeat center 10px;
 }
 
 #menu-bar.nav ul.menu li.main-menu-search {
   display: none;
 }
 #menu-bar.nav ul.menu li.main-menu-search a {
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat center 10px;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat center 10px;
 }
 @media only screen and (max-width: 768px) {
   #menu-bar.nav ul.menu li.main-menu-search {
@@ -2946,7 +2953,7 @@ ul.commons-utility-links li.last a {
 }
 
 .unread-invitations a {
-  background: url('../images/icons-sfd37165efe.png') 0 -890px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -890px no-repeat;
   width: 14px;
   height: 14px;
   display: inline-block;
@@ -2957,7 +2964,7 @@ ul.commons-utility-links li.last a {
 
 .unread-messages a,
 .no-unread-messages a {
-  background: url('../images/icons-sfd37165efe.png') 0 -924px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -924px no-repeat;
   width: 18px;
   height: 14px;
   display: inline-block;
@@ -3409,7 +3416,7 @@ ul.action-links {
   margin: 0;
 }
 .pane-commons-groups-commons-groups-create-group a:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -324px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -324px no-repeat;
   width: 15px;
   height: 15px;
   display: inline-block;
@@ -3620,7 +3627,7 @@ ul.action-links {
   cursor: pointer;
 }
 .commons-bw-create-choose span {
-  background: url('../images/icons-sfd37165efe.png') 0 -1334px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1334px no-repeat;
   width: 8px;
   height: 10px;
   display: inline-block;
@@ -3682,7 +3689,7 @@ ul.action-links {
   padding: 10px 10px 10px 27px;
 }
 .commons-bw-create-all-widget-types li .commons-polls-create:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -630px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -661px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -3695,7 +3702,7 @@ ul.action-links {
   top: 13px;
 }
 .commons-bw-create-all-widget-types li .commons-posts-create:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -1175px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -1175px no-repeat;
   width: 11px;
   height: 11px;
   display: inline-block;
@@ -3708,7 +3715,7 @@ ul.action-links {
   top: 13px;
 }
 .commons-bw-create-all-widget-types li .commons-wikis-create:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -396px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -396px no-repeat;
   width: 13px;
   height: 13px;
   display: inline-block;
@@ -3721,7 +3728,7 @@ ul.action-links {
   top: 13px;
 }
 .commons-bw-create-all-widget-types li .commons-events-create:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -661px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -692px no-repeat;
   width: 12px;
   height: 12px;
   display: inline-block;
@@ -3734,7 +3741,7 @@ ul.action-links {
   top: 13px;
 }
 .commons-bw-create-all-widget-types li .commons-q-a-create:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -597px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -597px no-repeat;
   width: 13px;
   height: 13px;
   display: inline-block;
@@ -3970,7 +3977,7 @@ ul.action-links {
   text-indent: -9999em;
 }
 .block-search .form-submit, .block-search .form-submit:hover {
-  background: transparent url('../images/icons/ico_search_wht.png?1395768501') no-repeat center center;
+  background: transparent url('../images/icons/ico_search_wht.png?1400601840') no-repeat center center;
   border: none;
 }
 @media only screen and (max-width: 768px) {
@@ -4440,13 +4447,13 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
  *  Placeholder styles
  */
 #menu-bar.nav .menu-item-193 a {
-  background-image: url('../images/icons/icon-home.png?1395768501');
+  background-image: url('../images/icons/icon-home.png?1400601840');
 }
 #menu-bar.nav .menu-item-194 a {
-  background-image: url('../images/icons/icon-groups.png?1395768501');
+  background-image: url('../images/icons/icon-groups.png?1400601840');
 }
 #menu-bar.nav .menu-item-195 a {
-  background-image: url('../images/icons/icon-events.png?1395768501');
+  background-image: url('../images/icons/icon-events.png?1400601840');
 }
 
 /**
@@ -4517,7 +4524,7 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
   margin: 0;
 }
 .pane-commons-events-commons-events-create-event-link a:before {
-  background: url('../images/icons-sfd37165efe.png') 0 -429px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -429px no-repeat;
   width: 15px;
   height: 15px;
   display: inline-block;
@@ -4553,12 +4560,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 
 .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #46bb2e url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #4fcd35), color-stop(100%, #3ea729));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#4fcd35, #3ea729);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#4fcd35, #3ea729);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#4fcd35, #3ea729);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#4fcd35, #3ea729);
+  background: #46bb2e url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #4fcd35), color-stop(100%, #3ea729));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#4fcd35, #3ea729);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#4fcd35, #3ea729);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#4fcd35, #3ea729);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#4fcd35, #3ea729);
   border-color: #27691a;
   text-shadow: -1px 1px 2px #379224, -1px -1px 2px #379224, 1px -1px 2px #379224, 1px 1px 2px #379224;
 }
@@ -4567,22 +4574,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .action-item-search[type="submit"]:hover {
   color: white;
-  background: #3ea729 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #46bb2e), color-stop(100%, #379224));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#46bb2e, #379224);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#46bb2e, #379224);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#46bb2e, #379224);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#46bb2e, #379224);
+  background: #3ea729 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #46bb2e), color-stop(100%, #379224));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#46bb2e, #379224);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#46bb2e, #379224);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#46bb2e, #379224);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#46bb2e, #379224);
   border-color: #184010;
   text-shadow: -1px 1px 2px #379224, -1px -1px 2px #379224, 1px -1px 2px #379224, 1px 1px 2px #379224;
 }
 .action-item-search[type="submit"]:focus, .action-item-search[type="submit"]:active {
-  background: #46bb2e url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #3ea729), color-stop(100%, #4fcd35));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#3ea729, #4fcd35);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#3ea729, #4fcd35);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#3ea729, #4fcd35);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#3ea729, #4fcd35);
+  background: #46bb2e url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #3ea729), color-stop(100%, #4fcd35));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#3ea729, #4fcd35);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#3ea729, #4fcd35);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#3ea729, #4fcd35);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#3ea729, #4fcd35);
   border-color: #27691a;
   text-shadow: -1px 1px 2px #379224, -1px -1px 2px #379224, 1px -1px 2px #379224, 1px 1px 2px #379224;
 }
@@ -4961,7 +4968,7 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 
 .message-contact:before {
   content: "";
-  background: url('../images/icons-sfd37165efe.png') 0 -531px no-repeat;
+  background: url('../images/icons-s34f2cfa4c8.png') 0 -531px no-repeat;
   width: 11px;
   height: 12px;
   display: inline-block;
@@ -5037,6 +5044,85 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 
 /**
+ * Profile listings
+ */
+.profile-badges {
+  margin: 0 0 0 -10px;
+}
+.profile-badges, .block-content .profile-badges {
+  padding: 0;
+}
+[dir="rtl"] .profile-badges {
+  margin-right: -10px;
+  margin-left: 0;
+}
+
+.profile-badge {
+  float: left;
+  display: block;
+  width: 33%;
+  list-style-type: none;
+  text-align: center;
+  -webkit-box-sizing: border-box;
+  -moz-box-sizing: border-box;
+  box-sizing: border-box;
+}
+[dir="rtl"] .profile-badge {
+  float: right;
+}
+.profile-badge, .block-content .profile-badge {
+  margin: 0 0 10px 0;
+  padding-left: 10px;
+}
+[dir="rtl"] .profile-badge, [dir="rtl"] .block-content .profile-badge {
+  padding-right: 10px;
+  padding-left: 0;
+}
+.profile-badge:nth-child(3n+1) {
+  clear: left;
+}
+[dir="rtl"] .profile-badge:nth-child(3n+1) {
+  clear: right;
+}
+@media only screen and (min-width: 769px) {
+  .profile-badge {
+    width: 25%;
+  }
+  .profile-badge:nth-child(3n+1) {
+    clear: none;
+  }
+  [dir="rtl"] .profile-badge:nth-child(3n+1) {
+    clear: none;
+  }
+  .profile-badge:nth-child(4n+1) {
+    clear: left;
+  }
+  [dir="rtl"] .profile-badge:nth-child(4n+1) {
+    clear: right;
+  }
+}
+
+.profile-badge-picture .user-picture {
+  background: none;
+  padding: 0;
+  -webkit-border-radius: 0;
+  -moz-border-radius: 0;
+  -ms-border-radius: 0;
+  -o-border-radius: 0;
+  border-radius: 0;
+  -webkit-box-shadow: none;
+  -moz-box-shadow: none;
+  box-shadow: none;
+}
+
+.profile-badge-name {
+  display: block;
+  line-height: 1.2em;
+  font-size: .88em;
+  margin-top: .6em;
+}
+
+/**
  * Add the color palettes
  */
 .palette-orange-red h2 {
@@ -5192,12 +5278,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-orange-red .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #ff9126 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ff9e40), color-stop(100%, #ff840c));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#ff9e40, #ff840c);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#ff9e40, #ff840c);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#ff9e40, #ff840c);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#ff9e40, #ff840c);
+  background: #ff9126 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ff9e40), color-stop(100%, #ff840c));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#ff9e40, #ff840c);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#ff9e40, #ff840c);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#ff9e40, #ff840c);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#ff9e40, #ff840c);
   border-color: #bf5e00;
   text-shadow: -1px 1px 2px #f27700, -1px -1px 2px #f27700, 1px -1px 2px #f27700, 1px 1px 2px #f27700;
 }
@@ -5206,22 +5292,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-orange-red .action-item-search[type="submit"]:hover {
   color: white;
-  background: #ff840c url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ff9126), color-stop(100%, #f27700));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#ff9126, #f27700);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#ff9126, #f27700);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#ff9126, #f27700);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#ff9126, #f27700);
+  background: #ff840c url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ff9126), color-stop(100%, #f27700));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#ff9126, #f27700);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#ff9126, #f27700);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#ff9126, #f27700);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#ff9126, #f27700);
   border-color: #8c4500;
   text-shadow: -1px 1px 2px #f27700, -1px -1px 2px #f27700, 1px -1px 2px #f27700, 1px 1px 2px #f27700;
 }
 .palette-orange-red .action-item-search[type="submit"]:focus, .palette-orange-red .action-item-search[type="submit"]:active {
-  background: #ff9126 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ff840c), color-stop(100%, #ff9e40));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#ff840c, #ff9e40);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#ff840c, #ff9e40);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#ff840c, #ff9e40);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#ff840c, #ff9e40);
+  background: #ff9126 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #ff840c), color-stop(100%, #ff9e40));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#ff840c, #ff9e40);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#ff840c, #ff9e40);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#ff840c, #ff9e40);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#ff840c, #ff9e40);
   border-color: #bf5e00;
   text-shadow: -1px 1px 2px #f27700, -1px -1px 2px #f27700, 1px -1px 2px #f27700, 1px 1px 2px #f27700;
 }
@@ -5402,12 +5488,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-magenta-blue .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #0097bf url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #00abd9), color-stop(100%, #0083a6));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#00abd9, #0083a6);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#00abd9, #0083a6);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#00abd9, #0083a6);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#00abd9, #0083a6);
+  background: #0097bf url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #00abd9), color-stop(100%, #0083a6));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#00abd9, #0083a6);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#00abd9, #0083a6);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#00abd9, #0083a6);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#00abd9, #0083a6);
   border-color: #004659;
   text-shadow: -1px 1px 2px #006f8c, -1px -1px 2px #006f8c, 1px -1px 2px #006f8c, 1px 1px 2px #006f8c;
 }
@@ -5416,22 +5502,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-magenta-blue .action-item-search[type="submit"]:hover {
   color: white;
-  background: #0083a6 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #0097bf), color-stop(100%, #006f8c));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#0097bf, #006f8c);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#0097bf, #006f8c);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#0097bf, #006f8c);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#0097bf, #006f8c);
+  background: #0083a6 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #0097bf), color-stop(100%, #006f8c));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#0097bf, #006f8c);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#0097bf, #006f8c);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#0097bf, #006f8c);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#0097bf, #006f8c);
   border-color: #001e26;
   text-shadow: -1px 1px 2px #006f8c, -1px -1px 2px #006f8c, 1px -1px 2px #006f8c, 1px 1px 2px #006f8c;
 }
 .palette-magenta-blue .action-item-search[type="submit"]:focus, .palette-magenta-blue .action-item-search[type="submit"]:active {
-  background: #0097bf url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #0083a6), color-stop(100%, #00abd9));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#0083a6, #00abd9);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#0083a6, #00abd9);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#0083a6, #00abd9);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#0083a6, #00abd9);
+  background: #0097bf url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #0083a6), color-stop(100%, #00abd9));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#0083a6, #00abd9);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#0083a6, #00abd9);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#0083a6, #00abd9);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#0083a6, #00abd9);
   border-color: #004659;
   text-shadow: -1px 1px 2px #006f8c, -1px -1px 2px #006f8c, 1px -1px 2px #006f8c, 1px 1px 2px #006f8c;
 }
@@ -5612,12 +5698,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-blue-blue .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #7ebd26 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #8cd22a), color-stop(100%, #70a822));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#8cd22a, #70a822);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#8cd22a, #70a822);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#8cd22a, #70a822);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#8cd22a, #70a822);
+  background: #7ebd26 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #8cd22a), color-stop(100%, #70a822));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#8cd22a, #70a822);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#8cd22a, #70a822);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#8cd22a, #70a822);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#8cd22a, #70a822);
   border-color: #456815;
   text-shadow: -1px 1px 2px #62931d, -1px -1px 2px #62931d, 1px -1px 2px #62931d, 1px 1px 2px #62931d;
 }
@@ -5626,22 +5712,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-blue-blue .action-item-search[type="submit"]:hover {
   color: white;
-  background: #70a822 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #7ebd26), color-stop(100%, #62931d));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#7ebd26, #62931d);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#7ebd26, #62931d);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#7ebd26, #62931d);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#7ebd26, #62931d);
+  background: #70a822 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #7ebd26), color-stop(100%, #62931d));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#7ebd26, #62931d);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#7ebd26, #62931d);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#7ebd26, #62931d);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#7ebd26, #62931d);
   border-color: #293e0c;
   text-shadow: -1px 1px 2px #62931d, -1px -1px 2px #62931d, 1px -1px 2px #62931d, 1px 1px 2px #62931d;
 }
 .palette-blue-blue .action-item-search[type="submit"]:focus, .palette-blue-blue .action-item-search[type="submit"]:active {
-  background: #7ebd26 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #70a822), color-stop(100%, #8cd22a));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#70a822, #8cd22a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#70a822, #8cd22a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#70a822, #8cd22a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#70a822, #8cd22a);
+  background: #7ebd26 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #70a822), color-stop(100%, #8cd22a));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#70a822, #8cd22a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#70a822, #8cd22a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#70a822, #8cd22a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#70a822, #8cd22a);
   border-color: #456815;
   text-shadow: -1px 1px 2px #62931d, -1px -1px 2px #62931d, 1px -1px 2px #62931d, 1px 1px 2px #62931d;
 }
@@ -5822,12 +5908,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-black-green .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #4090ba url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #519cc3), color-stop(100%, #3981a7));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#519cc3, #3981a7);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#519cc3, #3981a7);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#519cc3, #3981a7);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#519cc3, #3981a7);
+  background: #4090ba url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #519cc3), color-stop(100%, #3981a7));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#519cc3, #3981a7);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#519cc3, #3981a7);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#519cc3, #3981a7);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#519cc3, #3981a7);
   border-color: #26556e;
   text-shadow: -1px 1px 2px #337394, -1px -1px 2px #337394, 1px -1px 2px #337394, 1px 1px 2px #337394;
 }
@@ -5836,22 +5922,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-black-green .action-item-search[type="submit"]:hover {
   color: white;
-  background: #3981a7 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #4090ba), color-stop(100%, #337394));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#4090ba, #337394);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#4090ba, #337394);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#4090ba, #337394);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#4090ba, #337394);
+  background: #3981a7 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #4090ba), color-stop(100%, #337394));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#4090ba, #337394);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#4090ba, #337394);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#4090ba, #337394);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#4090ba, #337394);
   border-color: #193848;
   text-shadow: -1px 1px 2px #337394, -1px -1px 2px #337394, 1px -1px 2px #337394, 1px 1px 2px #337394;
 }
 .palette-black-green .action-item-search[type="submit"]:focus, .palette-black-green .action-item-search[type="submit"]:active {
-  background: #4090ba url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #3981a7), color-stop(100%, #519cc3));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#3981a7, #519cc3);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#3981a7, #519cc3);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#3981a7, #519cc3);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#3981a7, #519cc3);
+  background: #4090ba url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #3981a7), color-stop(100%, #519cc3));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#3981a7, #519cc3);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#3981a7, #519cc3);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#3981a7, #519cc3);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#3981a7, #519cc3);
   border-color: #26556e;
   text-shadow: -1px 1px 2px #337394, -1px -1px 2px #337394, 1px -1px 2px #337394, 1px 1px 2px #337394;
 }
@@ -6032,12 +6118,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-brown-yellow .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #e3ad40 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e6b756), color-stop(100%, #e0a32a));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#e6b756, #e0a32a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#e6b756, #e0a32a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#e6b756, #e0a32a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#e6b756, #e0a32a);
+  background: #e3ad40 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e6b756), color-stop(100%, #e0a32a));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#e6b756, #e0a32a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#e6b756, #e0a32a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#e6b756, #e0a32a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#e6b756, #e0a32a);
   border-color: #a57618;
   text-shadow: -1px 1px 2px #d1961f, -1px -1px 2px #d1961f, 1px -1px 2px #d1961f, 1px 1px 2px #d1961f;
 }
@@ -6046,22 +6132,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-brown-yellow .action-item-search[type="submit"]:hover {
   color: white;
-  background: #e0a32a url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e3ad40), color-stop(100%, #d1961f));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#e3ad40, #d1961f);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#e3ad40, #d1961f);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#e3ad40, #d1961f);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#e3ad40, #d1961f);
+  background: #e0a32a url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e3ad40), color-stop(100%, #d1961f));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#e3ad40, #d1961f);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#e3ad40, #d1961f);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#e3ad40, #d1961f);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#e3ad40, #d1961f);
   border-color: #785612;
   text-shadow: -1px 1px 2px #d1961f, -1px -1px 2px #d1961f, 1px -1px 2px #d1961f, 1px 1px 2px #d1961f;
 }
 .palette-brown-yellow .action-item-search[type="submit"]:focus, .palette-brown-yellow .action-item-search[type="submit"]:active {
-  background: #e3ad40 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e0a32a), color-stop(100%, #e6b756));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#e0a32a, #e6b756);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#e0a32a, #e6b756);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#e0a32a, #e6b756);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#e0a32a, #e6b756);
+  background: #e3ad40 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e0a32a), color-stop(100%, #e6b756));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#e0a32a, #e6b756);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#e0a32a, #e6b756);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#e0a32a, #e6b756);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#e0a32a, #e6b756);
   border-color: #a57618;
   text-shadow: -1px 1px 2px #d1961f, -1px -1px 2px #d1961f, 1px -1px 2px #d1961f, 1px 1px 2px #d1961f;
 }
@@ -6242,12 +6328,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-seafoam-orange .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #b68800 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #d09b00), color-stop(100%, #9d7500));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#d09b00, #9d7500);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#d09b00, #9d7500);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#d09b00, #9d7500);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#d09b00, #9d7500);
+  background: #b68800 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #d09b00), color-stop(100%, #9d7500));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#d09b00, #9d7500);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#d09b00, #9d7500);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#d09b00, #9d7500);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#d09b00, #9d7500);
   border-color: #503c00;
   text-shadow: -1px 1px 2px #836200, -1px -1px 2px #836200, 1px -1px 2px #836200, 1px 1px 2px #836200;
 }
@@ -6256,22 +6342,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-seafoam-orange .action-item-search[type="submit"]:hover {
   color: white;
-  background: #9d7500 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b68800), color-stop(100%, #836200));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#b68800, #836200);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#b68800, #836200);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#b68800, #836200);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#b68800, #836200);
+  background: #9d7500 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b68800), color-stop(100%, #836200));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#b68800, #836200);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#b68800, #836200);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#b68800, #836200);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#b68800, #836200);
   border-color: #1d1600;
   text-shadow: -1px 1px 2px #836200, -1px -1px 2px #836200, 1px -1px 2px #836200, 1px 1px 2px #836200;
 }
 .palette-seafoam-orange .action-item-search[type="submit"]:focus, .palette-seafoam-orange .action-item-search[type="submit"]:active {
-  background: #b68800 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #9d7500), color-stop(100%, #d09b00));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#9d7500, #d09b00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#9d7500, #d09b00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#9d7500, #d09b00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#9d7500, #d09b00);
+  background: #b68800 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #9d7500), color-stop(100%, #d09b00));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#9d7500, #d09b00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#9d7500, #d09b00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#9d7500, #d09b00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#9d7500, #d09b00);
   border-color: #503c00;
   text-shadow: -1px 1px 2px #836200, -1px -1px 2px #836200, 1px -1px 2px #836200, 1px 1px 2px #836200;
 }
@@ -6452,12 +6538,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-black-blue-yellow .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #d0a600 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #eaba00), color-stop(100%, #b69200));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#eaba00, #b69200);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#eaba00, #b69200);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#eaba00, #b69200);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#eaba00, #b69200);
+  background: #d0a600 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #eaba00), color-stop(100%, #b69200));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#eaba00, #b69200);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#eaba00, #b69200);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#eaba00, #b69200);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#eaba00, #b69200);
   border-color: #6a5500;
   text-shadow: -1px 1px 2px #9d7d00, -1px -1px 2px #9d7d00, 1px -1px 2px #9d7d00, 1px 1px 2px #9d7d00;
 }
@@ -6466,22 +6552,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-black-blue-yellow .action-item-search[type="submit"]:hover {
   color: white;
-  background: #b69200 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #d0a600), color-stop(100%, #9d7d00));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#d0a600, #9d7d00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#d0a600, #9d7d00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#d0a600, #9d7d00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#d0a600, #9d7d00);
+  background: #b69200 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #d0a600), color-stop(100%, #9d7d00));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#d0a600, #9d7d00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#d0a600, #9d7d00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#d0a600, #9d7d00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#d0a600, #9d7d00);
   border-color: #372c00;
   text-shadow: -1px 1px 2px #9d7d00, -1px -1px 2px #9d7d00, 1px -1px 2px #9d7d00, 1px 1px 2px #9d7d00;
 }
 .palette-black-blue-yellow .action-item-search[type="submit"]:focus, .palette-black-blue-yellow .action-item-search[type="submit"]:active {
-  background: #d0a600 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b69200), color-stop(100%, #eaba00));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#b69200, #eaba00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#b69200, #eaba00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#b69200, #eaba00);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#b69200, #eaba00);
+  background: #d0a600 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b69200), color-stop(100%, #eaba00));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#b69200, #eaba00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#b69200, #eaba00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#b69200, #eaba00);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#b69200, #eaba00);
   border-color: #6a5500;
   text-shadow: -1px 1px 2px #9d7d00, -1px -1px 2px #9d7d00, 1px -1px 2px #9d7d00, 1px 1px 2px #9d7d00;
 }
@@ -6662,12 +6748,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-brick-brick .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #a12e1e url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b63422), color-stop(100%, #8c281a));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#b63422, #8c281a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#b63422, #8c281a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#b63422, #8c281a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#b63422, #8c281a);
+  background: #a12e1e url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b63422), color-stop(100%, #8c281a));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#b63422, #8c281a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#b63422, #8c281a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#b63422, #8c281a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#b63422, #8c281a);
   border-color: #4b150e;
   text-shadow: -1px 1px 2px #762216, -1px -1px 2px #762216, 1px -1px 2px #762216, 1px 1px 2px #762216;
 }
@@ -6676,22 +6762,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-brick-brick .action-item-search[type="submit"]:hover {
   color: white;
-  background: #8c281a url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #a12e1e), color-stop(100%, #762216));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#a12e1e, #762216);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#a12e1e, #762216);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#a12e1e, #762216);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#a12e1e, #762216);
+  background: #8c281a url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #a12e1e), color-stop(100%, #762216));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#a12e1e, #762216);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#a12e1e, #762216);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#a12e1e, #762216);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#a12e1e, #762216);
   border-color: #200906;
   text-shadow: -1px 1px 2px #762216, -1px -1px 2px #762216, 1px -1px 2px #762216, 1px 1px 2px #762216;
 }
 .palette-brick-brick .action-item-search[type="submit"]:focus, .palette-brick-brick .action-item-search[type="submit"]:active {
-  background: #a12e1e url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #8c281a), color-stop(100%, #b63422));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#8c281a, #b63422);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#8c281a, #b63422);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#8c281a, #b63422);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#8c281a, #b63422);
+  background: #a12e1e url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #8c281a), color-stop(100%, #b63422));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#8c281a, #b63422);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#8c281a, #b63422);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#8c281a, #b63422);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#8c281a, #b63422);
   border-color: #4b150e;
   text-shadow: -1px 1px 2px #762216, -1px -1px 2px #762216, 1px -1px 2px #762216, 1px 1px 2px #762216;
 }
@@ -6872,12 +6958,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-gray-lightgray-blue .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #04b6e7 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #0ac7fb), color-stop(100%, #04a2ce));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#0ac7fb, #04a2ce);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#0ac7fb, #04a2ce);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#0ac7fb, #04a2ce);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#0ac7fb, #04a2ce);
+  background: #04b6e7 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #0ac7fb), color-stop(100%, #04a2ce));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#0ac7fb, #04a2ce);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#0ac7fb, #04a2ce);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#0ac7fb, #04a2ce);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#0ac7fb, #04a2ce);
   border-color: #026783;
   text-shadow: -1px 1px 2px #038fb5, -1px -1px 2px #038fb5, 1px -1px 2px #038fb5, 1px 1px 2px #038fb5;
 }
@@ -6886,22 +6972,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-gray-lightgray-blue .action-item-search[type="submit"]:hover {
   color: white;
-  background: #04a2ce url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #04b6e7), color-stop(100%, #038fb5));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#04b6e7, #038fb5);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#04b6e7, #038fb5);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#04b6e7, #038fb5);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#04b6e7, #038fb5);
+  background: #04a2ce url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #04b6e7), color-stop(100%, #038fb5));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#04b6e7, #038fb5);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#04b6e7, #038fb5);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#04b6e7, #038fb5);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#04b6e7, #038fb5);
   border-color: #014051;
   text-shadow: -1px 1px 2px #038fb5, -1px -1px 2px #038fb5, 1px -1px 2px #038fb5, 1px 1px 2px #038fb5;
 }
 .palette-gray-lightgray-blue .action-item-search[type="submit"]:focus, .palette-gray-lightgray-blue .action-item-search[type="submit"]:active {
-  background: #04b6e7 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #04a2ce), color-stop(100%, #0ac7fb));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#04a2ce, #0ac7fb);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#04a2ce, #0ac7fb);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#04a2ce, #0ac7fb);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#04a2ce, #0ac7fb);
+  background: #04b6e7 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #04a2ce), color-stop(100%, #0ac7fb));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#04a2ce, #0ac7fb);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#04a2ce, #0ac7fb);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#04a2ce, #0ac7fb);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#04a2ce, #0ac7fb);
   border-color: #026783;
   text-shadow: -1px 1px 2px #038fb5, -1px -1px 2px #038fb5, 1px -1px 2px #038fb5, 1px 1px 2px #038fb5;
 }
@@ -7082,12 +7168,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-black-white-red .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #cc0000 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e60000), color-stop(100%, #b30000));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#e60000, #b30000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#e60000, #b30000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#e60000, #b30000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#e60000, #b30000);
+  background: #cc0000 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e60000), color-stop(100%, #b30000));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#e60000, #b30000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#e60000, #b30000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#e60000, #b30000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#e60000, #b30000);
   border-color: #660000;
   text-shadow: -1px 1px 2px #990000, -1px -1px 2px #990000, 1px -1px 2px #990000, 1px 1px 2px #990000;
 }
@@ -7096,22 +7182,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-black-white-red .action-item-search[type="submit"]:hover {
   color: white;
-  background: #b30000 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #cc0000), color-stop(100%, #990000));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#cc0000, #990000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#cc0000, #990000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#cc0000, #990000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#cc0000, #990000);
+  background: #b30000 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #cc0000), color-stop(100%, #990000));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#cc0000, #990000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#cc0000, #990000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#cc0000, #990000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#cc0000, #990000);
   border-color: #330000;
   text-shadow: -1px 1px 2px #990000, -1px -1px 2px #990000, 1px -1px 2px #990000, 1px 1px 2px #990000;
 }
 .palette-black-white-red .action-item-search[type="submit"]:focus, .palette-black-white-red .action-item-search[type="submit"]:active {
-  background: #cc0000 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b30000), color-stop(100%, #e60000));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#b30000, #e60000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#b30000, #e60000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#b30000, #e60000);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#b30000, #e60000);
+  background: #cc0000 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #b30000), color-stop(100%, #e60000));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#b30000, #e60000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#b30000, #e60000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#b30000, #e60000);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#b30000, #e60000);
   border-color: #660000;
   text-shadow: -1px 1px 2px #990000, -1px -1px 2px #990000, 1px -1px 2px #990000, 1px 1px 2px #990000;
 }
@@ -7292,12 +7378,12 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-brown-burnt-orange .action-item-search[type="submit"] {
   min-width: 15px;
-  background: #e18728 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e4933e), color-stop(100%, #d27a1d));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#e4933e, #d27a1d);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#e4933e, #d27a1d);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#e4933e, #d27a1d);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#e4933e, #d27a1d);
+  background: #e18728 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e4933e), color-stop(100%, #d27a1d));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#e4933e, #d27a1d);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#e4933e, #d27a1d);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#e4933e, #d27a1d);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#e4933e, #d27a1d);
   border-color: #8f5314;
   text-shadow: -1px 1px 2px #bc6d1a, -1px -1px 2px #bc6d1a, 1px -1px 2px #bc6d1a, 1px 1px 2px #bc6d1a;
 }
@@ -7306,22 +7392,22 @@ body.front.logged-in .view-commons-homepage-content .article.node.node-page .lin
 }
 .palette-brown-burnt-orange .action-item-search[type="submit"]:hover {
   color: white;
-  background: #d27a1d url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e18728), color-stop(100%, #bc6d1a));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#e18728, #bc6d1a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#e18728, #bc6d1a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#e18728, #bc6d1a);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#e18728, #bc6d1a);
+  background: #d27a1d url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #e18728), color-stop(100%, #bc6d1a));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#e18728, #bc6d1a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#e18728, #bc6d1a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#e18728, #bc6d1a);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#e18728, #bc6d1a);
   border-color: #62390e;
   text-shadow: -1px 1px 2px #bc6d1a, -1px -1px 2px #bc6d1a, 1px -1px 2px #bc6d1a, 1px 1px 2px #bc6d1a;
 }
 .palette-brown-burnt-orange .action-item-search[type="submit"]:focus, .palette-brown-burnt-orange .action-item-search[type="submit"]:active {
-  background: #e18728 url('../images/icons/icon-search.png?1395768501') no-repeat;
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #d27a1d), color-stop(100%, #e4933e));
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -webkit-linear-gradient(#d27a1d, #e4933e);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -moz-linear-gradient(#d27a1d, #e4933e);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, -o-linear-gradient(#d27a1d, #e4933e);
-  background: url('../images/icons/icon-search.png?1395768501') no-repeat, linear-gradient(#d27a1d, #e4933e);
+  background: #e18728 url('../images/icons/icon-search.png?1400601840') no-repeat;
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #d27a1d), color-stop(100%, #e4933e));
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -webkit-linear-gradient(#d27a1d, #e4933e);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -moz-linear-gradient(#d27a1d, #e4933e);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, -o-linear-gradient(#d27a1d, #e4933e);
+  background: url('../images/icons/icon-search.png?1400601840') no-repeat, linear-gradient(#d27a1d, #e4933e);
   border-color: #8f5314;
   text-shadow: -1px 1px 2px #bc6d1a, -1px -1px 2px #bc6d1a, 1px -1px 2px #bc6d1a, 1px 1px 2px #bc6d1a;
 }
diff --git a/profiles/commons/themes/commons/commons_origins/css/lt-ie9.css b/profiles/commons/themes/commons/commons_origins/css/lt-ie9.css
index d53f039..c14d056 100644
--- a/profiles/commons/themes/commons/commons_origins/css/lt-ie9.css
+++ b/profiles/commons/themes/commons/commons_origins/css/lt-ie9.css
@@ -10,7 +10,7 @@ html {
 }
 
 body.front.not-logged-in #content {
-  background: url('../images/commons-drop.png?1395768501') right top no-repeat;
+  background: url('../images/commons-drop.png?1400510663') right top no-repeat;
 }
 body.front.not-logged-in .region-three-33-top {
   margin-bottom: 24px;
diff --git a/profiles/commons/themes/commons/commons_origins/css/responsive.custom.css b/profiles/commons/themes/commons/commons_origins/css/responsive.custom.css
index fa8baef..500fa30 100644
--- a/profiles/commons/themes/commons/commons_origins/css/responsive.custom.css
+++ b/profiles/commons/themes/commons/commons_origins/css/responsive.custom.css
@@ -129,7 +129,7 @@
  */
 @media only screen and (min-width: 768px) {
   body.front.not-logged-in #content {
-    background: url('../images/commons-drop.png?1395768501') right top no-repeat;
+    background: url('../images/commons-drop.png?1400510663') right top no-repeat;
   }
   body.front.not-logged-in .region-three-33-top {
     margin-bottom: 24px;
diff --git a/profiles/commons/themes/commons/commons_origins/images/icons-s34f2cfa4c8.png b/profiles/commons/themes/commons/commons_origins/images/icons-s34f2cfa4c8.png
new file mode 100644
index 0000000..a9a2841
Binary files /dev/null and b/profiles/commons/themes/commons/commons_origins/images/icons-s34f2cfa4c8.png differ
diff --git a/profiles/commons/themes/commons/commons_origins/images/icons/all.png b/profiles/commons/themes/commons/commons_origins/images/icons/all.png
index 250416e..840249a 100644
Binary files a/profiles/commons/themes/commons/commons_origins/images/icons/all.png and b/profiles/commons/themes/commons/commons_origins/images/icons/all.png differ
diff --git a/profiles/commons/themes/commons/commons_origins/images/icons/docs.png b/profiles/commons/themes/commons/commons_origins/images/icons/docs.png
index 9cd6875..1a99be4 100644
Binary files a/profiles/commons/themes/commons/commons_origins/images/icons/docs.png and b/profiles/commons/themes/commons/commons_origins/images/icons/docs.png differ
diff --git a/profiles/commons/themes/commons/commons_origins/sass/global.styles.scss b/profiles/commons/themes/commons/commons_origins/sass/global.styles.scss
index 946215b..63432b6 100755
--- a/profiles/commons/themes/commons/commons_origins/sass/global.styles.scss
+++ b/profiles/commons/themes/commons/commons_origins/sass/global.styles.scss
@@ -447,7 +447,8 @@ var {
 }
 
 .user-picture,
-.views-field-picture {
+.views-field-picture,
+.profile-badge-picture {
   background:$white;
   display: inline-block;
   padding:4px;
@@ -4636,6 +4637,89 @@ body.front.logged-in .view-commons-homepage-content .article.node {
 }
 
 /**
+ * Profile listings
+ */
+.profile-badges {
+  &,
+  .block-content & {
+    padding: 0;
+  }
+
+  margin: 0 0 0 (-$gutter_width);
+
+  [dir="rtl"] & {
+    margin-right: -$gutter_width;
+    margin-left: 0;
+  }
+}
+
+.profile-badge {
+  float: left;
+  display: block;
+  width: 33%;
+  list-style-type: none;
+  text-align: center;
+  @include box-sizing(border-box);
+
+  [dir="rtl"] & {
+    float: right;
+  }
+
+  &,
+  .block-content & {
+    margin: 0 0 $gutter_width 0;
+    padding-left: $gutter_width;
+
+    [dir="rtl"] & {
+      padding-right: $gutter_width;
+      padding-left: 0;
+    }
+  }
+
+  &:nth-child(3n+1) {
+    clear: left;
+
+    [dir="rtl"] & {
+      clear: right;
+    }
+  }
+
+  @include respond(large) {
+    width: 25%;
+
+    &:nth-child(3n+1) {
+      clear: none;
+
+      [dir="rtl"] & {
+        clear: none;
+      }
+    }
+
+    &:nth-child(4n+1) {
+      clear: left;
+
+      [dir="rtl"] & {
+        clear: right;
+      }
+    }
+  }
+}
+
+.profile-badge-picture .user-picture {
+  background: none;
+  padding: 0;
+  @include border-radius(0);
+  @include box-shadow(none);
+}
+
+.profile-badge-name {
+  display: block;
+  line-height: 1.2em;
+  font-size: .88em;
+  margin-top: .6em;
+}
+
+/**
  * Add the color palettes
  */
 
diff --git a/profiles/commons/themes/contrib/adaptivetheme/at_admin/adaptivetheme_admin.info b/profiles/commons/themes/contrib/adaptivetheme/at_admin/adaptivetheme_admin.info
index a397bc5..33588dc 100755
--- a/profiles/commons/themes/contrib/adaptivetheme/at_admin/adaptivetheme_admin.info
+++ b/profiles/commons/themes/contrib/adaptivetheme/at_admin/adaptivetheme_admin.info
@@ -349,9 +349,9 @@
   settings[custom_css] = ''
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.2+1-dev"
 core = "7.x"
 project = "adaptivetheme"
-datestamp = "1399579137"
+datestamp = "1400787234"
 
diff --git a/profiles/commons/themes/contrib/adaptivetheme/at_core/adaptivetheme.info b/profiles/commons/themes/contrib/adaptivetheme/at_core/adaptivetheme.info
index 6e0c880..01d7ad5 100755
--- a/profiles/commons/themes/contrib/adaptivetheme/at_core/adaptivetheme.info
+++ b/profiles/commons/themes/contrib/adaptivetheme/at_core/adaptivetheme.info
@@ -374,9 +374,9 @@
   settings[custom_css] = ''
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.2+1-dev"
 core = "7.x"
 project = "adaptivetheme"
-datestamp = "1399579137"
+datestamp = "1400787234"
 
diff --git a/profiles/commons/themes/contrib/adaptivetheme/at_subtheme/adaptivetheme_subtheme.info b/profiles/commons/themes/contrib/adaptivetheme/at_subtheme/adaptivetheme_subtheme.info
index 6a68352..05de009 100755
--- a/profiles/commons/themes/contrib/adaptivetheme/at_subtheme/adaptivetheme_subtheme.info
+++ b/profiles/commons/themes/contrib/adaptivetheme/at_subtheme/adaptivetheme_subtheme.info
@@ -472,9 +472,9 @@
   settings[custom_css] = ''
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-3.2+1-dev"
 core = "7.x"
 project = "adaptivetheme"
-datestamp = "1399579137"
+datestamp = "1400787234"
 
diff --git a/profiles/commons/themes/contrib/ember/ember.info b/profiles/commons/themes/contrib/ember/ember.info
index d5aa209..d87798b 100644
--- a/profiles/commons/themes/contrib/ember/ember.info
+++ b/profiles/commons/themes/contrib/ember/ember.info
@@ -24,9 +24,9 @@ regions[sidebar_first] = First sidebar
 regions_hidden[] = sidebar_first
 
 
-; Information added by drush on 2014-05-08
+; Information added by drush on 2014-05-22
 version = "7.x-2.0-alpha2+4-dev"
 core = "7.x"
 project = "ember"
-datestamp = "1399579136"
+datestamp = "1400787234"
 
